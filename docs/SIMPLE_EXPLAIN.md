# ç°¡å–®èªªæ˜ï¼šPre-commit Hook æ˜¯ä»€éº¼ï¼Ÿ

## ğŸ¯ ä¸€å¥è©±èªªæ˜

**åœ¨ä½  `git commit` çš„æ™‚å€™ï¼Œè‡ªå‹•å¹«ä½ æª¢æŸ¥å’Œä¿®å¾©ç¨‹å¼ç¢¼**

---

## ğŸ“– ç”¨ç”Ÿæ´»ä¾‹å­æ¯”å–»

å°±åƒï¼š
- ğŸ“ **ä½ å¯«å®Œä½œæ¥­** â†’ è€å¸«æœƒå…ˆ**æª¢æŸ¥ä¸€é**å†æ”¶
- âœ… ç°¡å–®çš„éŒ¯èª¤ï¼ˆéŒ¯å­—ã€æ¨™é»ï¼‰â†’ **è‡ªå‹•å¹«ä½ æ”¹å¥½**
- âš ï¸ è¤‡é›œçš„å•é¡Œï¼ˆé‚è¼¯éŒ¯èª¤ï¼‰â†’ **æé†’ä½ æ³¨æ„**ï¼Œä½†é‚„æ˜¯æœƒæ”¶

---

## ğŸ’» å¯¦éš›é‹ä½œæ–¹å¼

### æ­¥é©Ÿ 1ï¼šä½ ä¿®æ”¹æª”æ¡ˆ

```typescript
// ä½ ä¿®æ”¹äº† app/api/test.ts
let name = "æ¸¬è©¦";  // é€™è£¡ç”¨ letï¼Œä½†å…¶å¯¦å¯ä»¥æ”¹æˆ const
```

### æ­¥é©Ÿ 2ï¼šä½ æƒ³è¦ commit

```bash
git add app/api/test.ts
git commit -m "æ–°å¢æ¸¬è©¦åŠŸèƒ½"
```

### æ­¥é©Ÿ 3ï¼šPre-commit Hook è‡ªå‹•åŸ·è¡Œ âš¡

```
æ­£åœ¨åŸ·è¡Œ lint-staged...
æª¢æŸ¥ app/api/test.ts...
ç™¼ç¾å•é¡Œï¼šlet æ‡‰è©²æ”¹æˆ const
è‡ªå‹•ä¿®å¾©ä¸­...
âœ… ä¿®å¾©å®Œæˆ
```

### æ­¥é©Ÿ 4ï¼šæª”æ¡ˆè¢«è‡ªå‹•ä¿®æ”¹äº† âœ¨

```typescript
// æª”æ¡ˆè‡ªå‹•è®Šæˆé€™æ¨£
const name = "æ¸¬è©¦";  // let è‡ªå‹•æ”¹æˆ const äº†ï¼
```

### æ­¥é©Ÿ 5ï¼šCommit æˆåŠŸ âœ…

```
[main abc123] æ–°å¢æ¸¬è©¦åŠŸèƒ½
```

---

## ğŸ¤” ã€Œå±€éƒ¨ä¿®å¾©ã€æ˜¯ä»€éº¼æ„æ€ï¼Ÿ

**ã€Œå±€éƒ¨ã€= åªä¿®ä½ é€™æ¬¡æ”¹çš„æª”æ¡ˆ**

### âŒ ä¸æ˜¯é€™æ¨£ï¼ˆå…¨å°ˆæ¡ˆä¿®å¾©ï¼‰

```
æª¢æŸ¥æ‰€æœ‰æª”æ¡ˆ...
ç™¼ç¾ 373 å€‹è­¦å‘Š...
ä¿®å¾©æ‰€æœ‰æª”æ¡ˆ...
ğŸ˜± è¦ç­‰å¾ˆä¹…ï¼Œè€Œä¸”å¯èƒ½æ”¹å£å…¶ä»–æª”æ¡ˆï¼
```

### âœ… æ˜¯é€™æ¨£ï¼ˆåªä¿®ä½ æ”¹çš„ï¼‰

```
ä½ æ”¹äº† 3 å€‹æª”æ¡ˆï¼š
- app/api/test.ts
- components/Button.tsx  
- lib/utils.ts

åªæª¢æŸ¥é€™ 3 å€‹æª”æ¡ˆ
åªä¿®å¾©é€™ 3 å€‹æª”æ¡ˆçš„å•é¡Œ
å…¶ä»– 370 å€‹æª”æ¡ˆçš„è­¦å‘Šï¼Ÿä¸ç®¡å®ƒï¼
```

---

## ğŸ¬ å¯¦éš›ç¤ºç¯„

å‡è¨­ä½ ç¾åœ¨è¦ commit ä¸€å€‹æ–°åŠŸèƒ½ï¼š

### æƒ…æ³ Aï¼šç°¡å–®çš„å•é¡Œï¼ˆæœƒè‡ªå‹•ä¿®å¾©ï¼‰

```typescript
// ä½ å¯«çš„ç¨‹å¼ç¢¼
let count = 0;
```

**Commit æ™‚ï¼š**
- âœ… è‡ªå‹•æŠŠ `let` æ”¹æˆ `const`
- âœ… Commit æˆåŠŸ
- âœ¨ ä½ ä¸éœ€è¦æ‰‹å‹•æ”¹

### æƒ…æ³ Bï¼šè¤‡é›œçš„å•é¡Œï¼ˆåªæœƒæé†’ï¼‰

```typescript
// ä½ å¯«çš„ç¨‹å¼ç¢¼
function handleData(data: any) {
  // any å‹åˆ¥ä¸çŸ¥é“è©²æ”¹æˆä»€éº¼
}
```

**Commit æ™‚ï¼š**
- âš ï¸ é¡¯ç¤ºè­¦å‘Šï¼šé€™è£¡æœ‰ `any` å‹åˆ¥
- âœ… Commit é‚„æ˜¯æœƒæˆåŠŸï¼ˆå› ç‚ºæ˜¯è­¦å‘Šï¼Œä¸æ˜¯éŒ¯èª¤ï¼‰
- ğŸ’¡ æé†’ä½ ä¹‹å¾Œå¯ä»¥ä¿®å¾©

---

## ğŸ“Š å°æ¯”èªªæ˜

| é …ç›® | æ²’æœ‰ Pre-commit Hook | æœ‰ Pre-commit Hook |
|------|---------------------|-------------------|
| **ç°¡å–®éŒ¯èª¤** | âŒ æœƒè·Ÿè‘— commit é€²å» | âœ… è‡ªå‹•ä¿®å¾© |
| **æª¢æŸ¥ç¯„åœ** | âŒ æ²’æª¢æŸ¥ | âœ… åªæª¢æŸ¥ä½ æ”¹çš„æª”æ¡ˆ |
| **é€Ÿåº¦** | âš¡ å¾ˆå¿« | âš¡ ä¹Ÿå¾ˆå¿«ï¼ˆåªæª¢æŸ¥æ”¹çš„æª”æ¡ˆï¼‰|
| **å¹²æ“¾** | âŒ æ²’å¹²æ“¾ï¼ˆä½†éŒ¯èª¤æœƒç´¯ç©ï¼‰| âœ… è‡ªå‹•è™•ç†ï¼Œå¹¾ä¹ç„¡æ„Ÿ |

---

## ğŸ¯ é‡é»ç¸½çµ

### âœ… æœƒç™¼ç”Ÿçš„äº‹

1. ä½  commit æ™‚ï¼Œè‡ªå‹•æª¢æŸ¥ä½ æ”¹çš„æª”æ¡ˆ
2. ç°¡å–®å•é¡Œè‡ªå‹•ä¿®å¾©ï¼ˆ`let` â†’ `const`ï¼‰
3. è¤‡é›œå•é¡Œåªæé†’ï¼Œä¸é˜»æ­¢ä½  commit

### âŒ ä¸æœƒç™¼ç”Ÿçš„äº‹

1. âŒ ä¸æœƒæª¢æŸ¥æ•´å€‹å°ˆæ¡ˆçš„ 373 å€‹è­¦å‘Š
2. âŒ ä¸æœƒè‡ªå‹•ä¿®å¾©æ‰€æœ‰å•é¡Œ
3. âŒ ä¸æœƒæ‹–æ…¢ä½ çš„å·¥ä½œ

---

## ğŸ” å¯¦éš›æ¸¬è©¦

æƒ³è¦çœ‹å®ƒæ€éº¼é‹ä½œï¼Ÿ

```bash
# 1. å»ºç«‹ä¸€å€‹æ¸¬è©¦æª”æ¡ˆï¼ˆæœ‰ç°¡å–®éŒ¯èª¤ï¼‰
echo 'let test = "hello";' > app/api/test-example.ts

# 2. åŠ å…¥ Git
git add app/api/test-example.ts

# 3. å˜—è©¦ commit
git commit -m "æ¸¬è©¦ pre-commit hook"

# 4. ä½ æœƒçœ‹åˆ°ï¼š
# - è‡ªå‹•æª¢æŸ¥ test-example.ts
# - è‡ªå‹•æŠŠ let æ”¹æˆ const
# - Commit æˆåŠŸ
```

---

**ç°¡å–®è¨˜ä½ï¼šå°±åƒä¸€å€‹è‡ªå‹•åŠ©æ‰‹ï¼Œåœ¨ä½ æäº¤å‰å¹«ä½ æª¢æŸ¥å’Œä¿®å¾©ä½ æ”¹çš„æª”æ¡ˆï¼** ğŸš€
