# Skills èˆ‡å·¥å…·ç³»çµ±æŠ€è¡“è½åœ°æ–¹æ¡ˆ

**ç‰ˆæœ¬**: 1.0  
**å»ºç«‹æ—¥æœŸ**: 2026-01-13  
**ç‹€æ…‹**: è¦åŠƒä¸­  
**è² è²¬äºº**: ç³»çµ±æ¶æ§‹åœ˜éšŠ

---

## ğŸ“‹ åŸ·è¡Œæ‘˜è¦

æœ¬æ–‡ä»¶è©³è¿° EAKAP å¹³å°ã€ŒSkills èˆ‡å·¥å…·ç³»çµ±ã€çš„æŠ€è¡“è½åœ°æ–¹æ¡ˆã€‚æ­¤æ–¹æ¡ˆæ¡ç”¨ **ã€Œé¸é … Aï¼ˆå…§å»ºå·¥å…·ï¼‰+ ç°¡åŒ–ç‰ˆé¸é … Cï¼ˆHTTP API ä»£ç†ï¼‰ã€** çš„æ··åˆæ¶æ§‹ï¼Œæ—¨åœ¨ï¼š

1. **è®“ AI Agent èƒ½çœŸæ­£åŸ·è¡Œæ“ä½œ**ï¼ˆä¸åªæ˜¯çµ¦å»ºè­°ï¼‰
2. **è®“å®¢æˆ¶æ“ä½œæ¥µåº¦ç°¡åŒ–**ï¼ˆåªéœ€å‹¾é¸åŠŸèƒ½ï¼‰
3. **è®“ AI æ¶æ§‹å¸«èƒ½è‡ªå‹•æ¨è–¦ä¸¦é…ç½®**
4. **ç¢ºä¿ç³»çµ±ç©©å®šä¸”æ˜“æ–¼ç¶­è­·**

---

## ğŸ¯ æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

### å°å®¢æˆ¶çš„æ‰¿è«¾

| åŸå‰‡ | èªªæ˜ |
|------|------|
| **é›¶å­¸ç¿’æˆæœ¬** | å®¢æˆ¶åªéœ€å‹¾é¸ï¼Œç„¡éœ€ç†è§£æŠ€è¡“ç´°ç¯€ |
| **AI è‡ªå‹•é…ç½®** | èŠå¤©æ©Ÿå™¨äººæœƒè‡ªå‹•æ¨è–¦ä¸¦å¹«å®¢æˆ¶å‹¾é¸ |
| **å³é–‹å³ç”¨** | Agent å»ºç«‹å¾Œç«‹å³å¯ç”¨ï¼Œç„¡éœ€é¡å¤–è¨­å®š |
| **ç©©å®šå¯é ** | æ‰€æœ‰å·¥å…·éƒ½ç¶“éæ¸¬è©¦ï¼Œä¸æœƒæœ‰æ„å¤–éŒ¯èª¤ |

### å°ç¶­è­·çš„æ‰¿è«¾

| åŸå‰‡ | èªªæ˜ |
|------|------|
| **ç„¡å¤–éƒ¨æ²™ç®±ä¾è³´** | ä¸ä½¿ç”¨ e2b ç­‰ç¬¬ä¸‰æ–¹æ²™ç®±ï¼Œé¿å…æˆæœ¬èˆ‡ç©©å®šæ€§å•é¡Œ |
| **çµ±ä¸€ç¨‹å¼ç¢¼ç®¡ç†** | æ‰€æœ‰å·¥å…·éƒ½æ˜¯å¹³å°å…§å»ºï¼Œé›†ä¸­ç®¡ç† |
| **å¯è§€æ¸¬æ€§** | å®Œæ•´çš„æ—¥èªŒè¨˜éŒ„èˆ‡éŒ¯èª¤è¿½è¹¤ |
| **æ¼¸é€²å¼æ“´å±•** | å¯éš¨æ™‚æ–°å¢å·¥å…·ï¼Œä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½ |

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              EAKAP å¹³å°                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          å‰ç«¯ UI å±¤                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ Agent ç·¨è¼¯å™¨      â”‚  â”‚ AI æ¶æ§‹å¸«èŠå¤©å®¤   â”‚  â”‚ Skills å¸‚å ´ç€è¦½å™¨     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ (AgentEditor)     â”‚  â”‚ (ArchitectModal) â”‚  â”‚ (SkillsMarketplace)  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚                   â”‚  â”‚                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ å·¥å…·å‹¾é¸å€      â”‚  â”‚ â€¢ è‡ªå‹•æ¨è–¦å·¥å…·    â”‚  â”‚ â€¢ ç€è¦½æŠ€èƒ½åŒ…          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Skills å‹¾é¸å€   â”‚  â”‚ â€¢ è‡ªå‹•æ¨è–¦ Skills â”‚  â”‚ â€¢ ä¸€éµå®‰è£            â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          API å±¤                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ /api/chat        â”‚  â”‚ /api/agents      â”‚  â”‚ /api/skills          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ (å°è©± + å·¥å…·å‘¼å«) â”‚  â”‚ (Agent CRUD)     â”‚  â”‚ (Skills CRUD)        â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                                               â”‚
â”‚              â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     Gemini Function Calling å±¤                          â”‚ â”‚
â”‚  â”‚                                                                         â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚   â”‚                    å·¥å…·è²æ˜ (Tool Declarations)                  â”‚  â”‚ â”‚
â”‚  â”‚   â”‚   â€¢ search_knowledge    â€¢ send_email      â€¢ create_task         â”‚  â”‚ â”‚
â”‚  â”‚   â”‚   â€¢ query_data          â€¢ web_search      â€¢ generate_report     â”‚  â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                â”‚                                        â”‚ â”‚
â”‚  â”‚                                â–¼                                        â”‚ â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚   â”‚                    å·¥å…·åŸ·è¡Œå™¨ (Tool Executor)                    â”‚  â”‚ â”‚
â”‚  â”‚   â”‚                    lib/tools/executor.ts                        â”‚  â”‚ â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                                          â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚                    â”‚                    â”‚                     â”‚
â”‚              â–¼                    â–¼                    â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å…§å»ºå·¥å…· (é¸é … A) â”‚ â”‚  ç¬¬ä¸‰æ–¹ API æ•´åˆ   â”‚ â”‚  HTTP API ä»£ç† (ç°¡åŒ–ç‰ˆ C) â”‚  â”‚
â”‚  â”‚                    â”‚ â”‚                    â”‚ â”‚                          â”‚  â”‚
â”‚  â”‚ â€¢ search_knowledge â”‚ â”‚ â€¢ send_email       â”‚ â”‚ â€¢ google_drive_search    â”‚  â”‚
â”‚  â”‚ â€¢ query_data       â”‚ â”‚ â€¢ line_notify      â”‚ â”‚ â€¢ brave_web_search       â”‚  â”‚
â”‚  â”‚ â€¢ create_report    â”‚ â”‚ â€¢ slack_message    â”‚ â”‚ â€¢ github_search          â”‚  â”‚
â”‚  â”‚ â€¢ export_csv       â”‚ â”‚ â€¢ sms_send         â”‚ â”‚                          â”‚  â”‚
â”‚  â”‚ â€¢ create_task      â”‚ â”‚                    â”‚ â”‚                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                      â”‚                        â”‚                  â”‚
â”‚           â–¼                      â–¼                        â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Supabase      â”‚ â”‚   å¤–éƒ¨æœå‹™ API    â”‚ â”‚      å¤–éƒ¨æœå°‹ API         â”‚  â”‚
â”‚  â”‚  (çŸ¥è­˜åº«/è³‡æ–™åº«)   â”‚ â”‚ (Resend/Line/ç­‰)  â”‚ â”‚  (Google/Brave/GitHub)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ è³‡æ–™åº«è¨­è¨ˆ

> âš ï¸ **é‡è¦æé†’**ï¼šä»¥ä¸‹ SQL èªæ³•å¯ç›´æ¥åœ¨ Supabase SQL Editor ä¸­åŸ·è¡Œã€‚å»ºè­°ä¾åºåŸ·è¡Œï¼š
> 1. å…ˆåŸ·è¡Œã€ŒMigration 1ï¼šè³‡æ–™çµæ§‹ã€
> 2. å†åŸ·è¡Œã€ŒMigration 2ï¼šç¨®å­è³‡æ–™ã€

---

### Migration 1ï¼šè³‡æ–™çµæ§‹ï¼ˆå®Œæ•´å¯åŸ·è¡Œ SQLï¼‰

å°‡ä»¥ä¸‹ SQL è¤‡è£½åˆ° Supabase SQL Editor åŸ·è¡Œï¼š

```sql
-- =============================================
-- Skills èˆ‡å·¥å…·ç³»çµ± - Migration 1: è³‡æ–™çµæ§‹
-- å»ºç«‹æ—¥æœŸ: 2026-01-13
-- èªªæ˜: å»ºç«‹å·¥å…·è¨»å†Šè¡¨ã€æŠ€èƒ½åŒ…åº«ã€æ“´å±• agents æ¬„ä½ã€å·¥å…·åŸ·è¡Œæ—¥èªŒ
-- =============================================

-- ============================================
-- 1. tools_registry - å·¥å…·è¨»å†Šè¡¨
-- ============================================
CREATE TABLE IF NOT EXISTS tools_registry (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- åŸºæœ¬è³‡è¨Š
    name TEXT NOT NULL UNIQUE,              -- å·¥å…·å”¯ä¸€è­˜åˆ¥å (ä¾‹: search_knowledge)
    display_name TEXT NOT NULL,             -- å‰å°é¡¯ç¤ºåç¨± (ä¾‹: æœå°‹çŸ¥è­˜åº«)
    description TEXT NOT NULL,              -- å·¥å…·èªªæ˜
    icon TEXT,                              -- åœ–ç¤º (emoji æˆ– icon name)
    
    -- åˆ†é¡
    category TEXT NOT NULL DEFAULT 'general'
        CHECK (category IN ('knowledge', 'data', 'communication', 'export', 'external', 'task', 'general')),
    
    -- Gemini Function Calling å®šç¾©
    function_declaration JSONB NOT NULL,    -- Gemini å·¥å…·å®šç¾© (name, description, parameters)
    
    -- æ¬Šé™æ§åˆ¶
    requires_api_key BOOLEAN DEFAULT FALSE, -- æ˜¯å¦éœ€è¦å®¢æˆ¶æä¾› API Key
    api_key_config JSONB,                   -- API Key é…ç½®èªªæ˜
    
    -- ç‹€æ…‹
    is_active BOOLEAN DEFAULT TRUE,         -- æ˜¯å¦å•Ÿç”¨
    is_premium BOOLEAN DEFAULT FALSE,       -- æ˜¯å¦ç‚ºé€²éšåŠŸèƒ½ï¼ˆéœ€ä»˜è²»ï¼‰
    
    -- å…ƒæ•¸æ“š
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_tools_registry_category ON tools_registry(category);
CREATE INDEX IF NOT EXISTS idx_tools_registry_active ON tools_registry(is_active);
CREATE INDEX IF NOT EXISTS idx_tools_registry_name ON tools_registry(name);

-- è¨»è§£
COMMENT ON TABLE tools_registry IS 'ç³»çµ±å·¥å…·è¨»å†Šè¡¨ï¼Œå®šç¾©æ‰€æœ‰å¯ä¾› Agent ä½¿ç”¨çš„å·¥å…·';
COMMENT ON COLUMN tools_registry.name IS 'å·¥å…·å”¯ä¸€è­˜åˆ¥åï¼Œç”¨æ–¼ç¨‹å¼ç¢¼ä¸­å¼•ç”¨';
COMMENT ON COLUMN tools_registry.function_declaration IS 'Gemini Function Calling çš„å®Œæ•´å®šç¾©ï¼ŒåŒ…å« name, description, parameters';
COMMENT ON COLUMN tools_registry.requires_api_key IS 'è‹¥ç‚º TRUEï¼Œå®¢æˆ¶éœ€åœ¨è¨­å®šé é…ç½®å°æ‡‰çš„ API Key';

-- ============================================
-- 2. skills_library - æŠ€èƒ½åŒ…åº«
-- ============================================
CREATE TABLE IF NOT EXISTS skills_library (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- åŸºæœ¬è³‡è¨Š
    name TEXT NOT NULL,                     -- æŠ€èƒ½å”¯ä¸€è­˜åˆ¥å (ä¾‹: customer_service_sop)
    display_name TEXT NOT NULL,             -- å‰å°é¡¯ç¤ºåç¨± (ä¾‹: å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹)
    description TEXT,                       -- æŠ€èƒ½èªªæ˜
    icon TEXT,                              -- åœ–ç¤º (emoji)
    
    -- åˆ†é¡èˆ‡æ¨™ç±¤
    category TEXT DEFAULT 'general'
        CHECK (category IN ('marketing', 'sales', 'hr', 'legal', 'support', 'finance', 'operations', 'analytics', 'custom', 'general')),
    tags TEXT[] DEFAULT '{}',
    
    -- æ ¸å¿ƒå…§å®¹ï¼ˆé€™æ˜¯æœ€é‡è¦çš„æ¬„ä½ï¼ï¼‰
    skill_content TEXT NOT NULL,            -- SKILL.md çš„å®Œæ•´ Markdown å…§å®¹
    
    -- å·¥å…·éœ€æ±‚ï¼ˆé¸æ“‡æ­¤æŠ€èƒ½æ™‚æœƒè‡ªå‹•å‹¾é¸é€™äº›å·¥å…·ï¼‰
    required_tools TEXT[] DEFAULT '{}',     -- ä¾‹: ['search_knowledge', 'send_email']
    
    -- ä¾†æºè¿½è¹¤
    source TEXT DEFAULT 'internal'
        CHECK (source IN ('internal', 'skillsmp', 'enterprise')),
    external_id TEXT,                       -- å¤–éƒ¨ä¾†æº IDï¼ˆå¦‚ SkillsMP çš„ skill IDï¼‰
    external_url TEXT,                      -- å¤–éƒ¨ä¾†æºé€£çµ
    
    -- ä½œè€…èˆ‡ç‰ˆæœ¬
    author TEXT DEFAULT 'EAKAP Official',
    version TEXT DEFAULT '1.0.0',
    
    -- æ¬Šé™æ§åˆ¶
    is_public BOOLEAN DEFAULT TRUE,         -- æ˜¯å¦å°æ‰€æœ‰ä½¿ç”¨è€…å¯è¦‹
    is_official BOOLEAN DEFAULT FALSE,      -- æ˜¯å¦ç‚ºå®˜æ–¹èªè­‰ï¼ˆæœƒé¡¯ç¤º â­ æ¨™è¨˜ï¼‰
    owner_user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,  -- ä¼æ¥­è‡ªå»ºæŠ€èƒ½çš„æ“æœ‰è€…
    
    -- ä½¿ç”¨çµ±è¨ˆ
    usage_count INTEGER DEFAULT 0,
    
    -- ç‹€æ…‹
    is_active BOOLEAN DEFAULT TRUE,
    
    -- æ™‚é–“æˆ³
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_skills_library_category ON skills_library(category);
CREATE INDEX IF NOT EXISTS idx_skills_library_source ON skills_library(source);
CREATE INDEX IF NOT EXISTS idx_skills_library_public ON skills_library(is_public);
CREATE INDEX IF NOT EXISTS idx_skills_library_official ON skills_library(is_official);
CREATE INDEX IF NOT EXISTS idx_skills_library_owner ON skills_library(owner_user_id);
CREATE INDEX IF NOT EXISTS idx_skills_library_tags ON skills_library USING GIN(tags);
CREATE INDEX IF NOT EXISTS idx_skills_library_required_tools ON skills_library USING GIN(required_tools);
CREATE INDEX IF NOT EXISTS idx_skills_library_active ON skills_library(is_active);

-- å…¨æ–‡æœå°‹ç´¢å¼•ï¼ˆæ”¯æ´ä¸­æ–‡æœå°‹ï¼‰
CREATE INDEX IF NOT EXISTS idx_skills_library_search ON skills_library 
USING GIN(to_tsvector('simple', COALESCE(name, '') || ' ' || COALESCE(display_name, '') || ' ' || COALESCE(description, '')));

-- è¨»è§£
COMMENT ON TABLE skills_library IS 'æŠ€èƒ½åŒ…åº«ï¼Œå­˜æ”¾å¯ä¾› Agent è¼‰å…¥çš„æ‰€æœ‰æŠ€èƒ½åŒ…ï¼ˆåŒ…å«å…§å»ºã€SkillsMP åŒ¯å…¥ã€ä¼æ¥­è‡ªå»ºï¼‰';
COMMENT ON COLUMN skills_library.skill_content IS 'SKILL.md æ ¼å¼çš„å®Œæ•´æŠ€èƒ½å…§å®¹ï¼Œæœƒåœ¨å°è©±æ™‚æ³¨å…¥åˆ° System Prompt';
COMMENT ON COLUMN skills_library.required_tools IS 'æ­¤æŠ€èƒ½éœ€è¦çš„å·¥å…·åˆ—è¡¨ï¼Œé¸æ“‡æŠ€èƒ½æ™‚ç³»çµ±æœƒè‡ªå‹•å‹¾é¸å°æ‡‰å·¥å…·';
COMMENT ON COLUMN skills_library.source IS 'internal=å®˜æ–¹å…§å»º, skillsmp=å¾SkillsMPåŒ¯å…¥, enterprise=ä¼æ¥­è‡ªå»º';
COMMENT ON COLUMN skills_library.owner_user_id IS 'ä¼æ¥­è‡ªå»ºæŠ€èƒ½æ™‚è¨˜éŒ„å»ºç«‹è€…ï¼Œå®˜æ–¹æŠ€èƒ½æ­¤æ¬„ä½ç‚º NULL';

-- ============================================
-- 3. æ“´å±• agents è³‡æ–™è¡¨
-- ============================================
ALTER TABLE agents
ADD COLUMN IF NOT EXISTS enabled_tools TEXT[] DEFAULT '{}',
ADD COLUMN IF NOT EXISTS enabled_skills UUID[] DEFAULT '{}';

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_agents_enabled_tools ON agents USING GIN(enabled_tools);
CREATE INDEX IF NOT EXISTS idx_agents_enabled_skills ON agents USING GIN(enabled_skills);

-- è¨»è§£
COMMENT ON COLUMN agents.enabled_tools IS 'æ­¤ Agent å•Ÿç”¨çš„å·¥å…·åˆ—è¡¨ (å·¥å…· name å­—ä¸²é™£åˆ—)';
COMMENT ON COLUMN agents.enabled_skills IS 'æ­¤ Agent è¼‰å…¥çš„æŠ€èƒ½åŒ… ID åˆ—è¡¨ (UUID é™£åˆ—)';

-- ============================================
-- 4. tool_executions_log - å·¥å…·åŸ·è¡Œæ—¥èªŒ
-- ============================================
CREATE TABLE IF NOT EXISTS tool_executions_log (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    
    -- é—œè¯
    agent_id UUID REFERENCES agents(id) ON DELETE SET NULL,
    session_id UUID REFERENCES chat_sessions(id) ON DELETE SET NULL,
    user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
    
    -- åŸ·è¡Œå…§å®¹
    tool_name TEXT NOT NULL,
    input_params JSONB,                     -- è¼¸å…¥åƒæ•¸
    output_result JSONB,                    -- è¼¸å‡ºçµæœ
    
    -- åŸ·è¡Œç‹€æ…‹
    status TEXT NOT NULL DEFAULT 'pending'
        CHECK (status IN ('pending', 'running', 'success', 'failed')),
    error_message TEXT,
    
    -- æ•ˆèƒ½è¿½è¹¤
    execution_time_ms INTEGER,
    
    -- æ™‚é–“æˆ³
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_tool_executions_agent ON tool_executions_log(agent_id);
CREATE INDEX IF NOT EXISTS idx_tool_executions_session ON tool_executions_log(session_id);
CREATE INDEX IF NOT EXISTS idx_tool_executions_user ON tool_executions_log(user_id);
CREATE INDEX IF NOT EXISTS idx_tool_executions_tool ON tool_executions_log(tool_name);
CREATE INDEX IF NOT EXISTS idx_tool_executions_status ON tool_executions_log(status);
CREATE INDEX IF NOT EXISTS idx_tool_executions_time ON tool_executions_log(created_at DESC);

-- è¨»è§£
COMMENT ON TABLE tool_executions_log IS 'å·¥å…·åŸ·è¡Œæ—¥èªŒï¼Œè¨˜éŒ„æ‰€æœ‰ AI å·¥å…·å‘¼å«çš„è¼¸å…¥è¼¸å‡ºï¼Œç”¨æ–¼è¿½è¹¤ã€é™¤éŒ¯èˆ‡åˆ†æ';

-- ============================================
-- 5. è‡ªå‹•æ›´æ–° updated_at è§¸ç™¼å™¨
-- ============================================
-- tools_registry
CREATE TRIGGER update_tools_registry_updated_at 
    BEFORE UPDATE ON tools_registry
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- skills_library
CREATE TRIGGER update_skills_library_updated_at 
    BEFORE UPDATE ON skills_library
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- ============================================
-- 6. RLS æ”¿ç­–
-- ============================================

-- å•Ÿç”¨ RLS
ALTER TABLE tools_registry ENABLE ROW LEVEL SECURITY;
ALTER TABLE skills_library ENABLE ROW LEVEL SECURITY;
ALTER TABLE tool_executions_log ENABLE ROW LEVEL SECURITY;

-- tools_registry: æ‰€æœ‰äººå¯è®€ï¼Œåªæœ‰ SUPER_ADMIN å¯å¯«
CREATE POLICY "æ‰€æœ‰äººå¯è®€å–å·¥å…·åˆ—è¡¨" ON tools_registry
    FOR SELECT USING (is_active = TRUE);

CREATE POLICY "è¶…ç´šç®¡ç†å“¡å¯ç®¡ç†å·¥å…·" ON tools_registry
    FOR ALL USING (
        EXISTS (
            SELECT 1 FROM user_profiles
            WHERE id = auth.uid() AND role = 'SUPER_ADMIN'
        )
    );

-- skills_library: å…¬é–‹æŠ€èƒ½æ‰€æœ‰äººå¯è®€ï¼Œç§äººæŠ€èƒ½åªæœ‰æ“æœ‰è€…å¯è®€
CREATE POLICY "æ‰€æœ‰äººå¯è®€å–å…¬é–‹æŠ€èƒ½" ON skills_library
    FOR SELECT USING (is_public = TRUE AND is_active = TRUE);

CREATE POLICY "æ“æœ‰è€…å¯è®€å–è‡ªå·±çš„æŠ€èƒ½" ON skills_library
    FOR SELECT USING (owner_user_id = auth.uid());

CREATE POLICY "è¶…ç´šç®¡ç†å“¡å¯è®€å–æ‰€æœ‰æŠ€èƒ½" ON skills_library
    FOR SELECT USING (
        EXISTS (
            SELECT 1 FROM user_profiles
            WHERE id = auth.uid() AND role = 'SUPER_ADMIN'
        )
    );

CREATE POLICY "ä½¿ç”¨è€…å¯å»ºç«‹ä¼æ¥­æŠ€èƒ½" ON skills_library
    FOR INSERT WITH CHECK (
        auth.uid() IS NOT NULL 
        AND owner_user_id = auth.uid()
        AND source = 'enterprise'
    );

CREATE POLICY "æ“æœ‰è€…å¯æ›´æ–°è‡ªå·±çš„æŠ€èƒ½" ON skills_library
    FOR UPDATE USING (owner_user_id = auth.uid());

CREATE POLICY "æ“æœ‰è€…å¯åˆªé™¤è‡ªå·±çš„æŠ€èƒ½" ON skills_library
    FOR DELETE USING (owner_user_id = auth.uid());

CREATE POLICY "è¶…ç´šç®¡ç†å“¡å¯ç®¡ç†æ‰€æœ‰æŠ€èƒ½" ON skills_library
    FOR ALL USING (
        EXISTS (
            SELECT 1 FROM user_profiles
            WHERE id = auth.uid() AND role = 'SUPER_ADMIN'
        )
    );

-- tool_executions_log: ä½¿ç”¨è€…å¯è®€å–è‡ªå·±çš„ï¼Œç®¡ç†å“¡å¯è®€å–å…¨éƒ¨
CREATE POLICY "ä½¿ç”¨è€…å¯è®€å–è‡ªå·±çš„å·¥å…·åŸ·è¡Œè¨˜éŒ„" ON tool_executions_log
    FOR SELECT USING (user_id = auth.uid());

CREATE POLICY "ç®¡ç†å“¡å¯è®€å–æ‰€æœ‰å·¥å…·åŸ·è¡Œè¨˜éŒ„" ON tool_executions_log
    FOR SELECT USING (
        EXISTS (
            SELECT 1 FROM user_profiles
            WHERE id = auth.uid() AND role IN ('SUPER_ADMIN', 'DEPT_ADMIN')
        )
    );

-- ç³»çµ±å¯«å…¥ (éœ€é€é Service Role)
CREATE POLICY "ç³»çµ±å¯å¯«å…¥å·¥å…·åŸ·è¡Œè¨˜éŒ„" ON tool_executions_log
    FOR INSERT WITH CHECK (TRUE);

-- ============================================
-- Migration 1 å®Œæˆ
-- ============================================
```

---

### Migration 2ï¼šç¨®å­è³‡æ–™ï¼ˆå®˜æ–¹å·¥å…·èˆ‡æŠ€èƒ½åŒ…ï¼‰

å°‡ä»¥ä¸‹ SQL è¤‡è£½åˆ° Supabase SQL Editor åŸ·è¡Œï¼š

```sql
-- =============================================
-- Skills èˆ‡å·¥å…·ç³»çµ± - Migration 2: ç¨®å­è³‡æ–™
-- å»ºç«‹æ—¥æœŸ: 2026-01-13
-- èªªæ˜: æ’å…¥ 10 å€‹å®˜æ–¹å…§å»ºå·¥å…· + 10 å€‹å®˜æ–¹æŠ€èƒ½åŒ…
-- =============================================

-- ============================================
-- 1. æ’å…¥å®˜æ–¹å…§å»ºå·¥å…· (10 å€‹)
-- ============================================

INSERT INTO tools_registry (name, display_name, description, icon, category, function_declaration, requires_api_key, is_active) VALUES

-- å·¥å…· 1: æœå°‹çŸ¥è­˜åº«
('search_knowledge', 'æœå°‹çŸ¥è­˜åº«', 'åœ¨ä¼æ¥­çŸ¥è­˜åº«ä¸­æœå°‹ç›¸é—œæ–‡ä»¶èˆ‡è³‡è¨Š', 'ğŸ”', 'knowledge',
'{
  "name": "search_knowledge",
  "description": "æœå°‹ä¼æ¥­çŸ¥è­˜åº«ï¼Œæ‰¾å‡ºèˆ‡æŸ¥è©¢ç›¸é—œçš„æ–‡ä»¶å…§å®¹ã€‚ç”¨æ–¼å›ç­”éœ€è¦åƒè€ƒå…§éƒ¨è³‡æ–™çš„å•é¡Œã€‚",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "æœå°‹é—œéµå­—æˆ–å•é¡Œ"
      },
      "department": {
        "type": "string",
        "description": "é™å®šæœå°‹çš„éƒ¨é–€ï¼ˆå¯é¸ï¼‰"
      },
      "max_results": {
        "type": "integer",
        "description": "æœ€å¤§å›å‚³ç­†æ•¸ï¼Œé è¨­ 5"
      }
    },
    "required": ["query"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 2: æŸ¥è©¢æ¥­å‹™è³‡æ–™
('query_business_data', 'æŸ¥è©¢æ¥­å‹™è³‡æ–™', 'æŸ¥è©¢ä¼æ¥­æ¥­å‹™è³‡æ–™ï¼Œå¦‚è¨‚å–®ã€å®¢æˆ¶ã€åº«å­˜ç­‰', 'ğŸ“Š', 'data',
'{
  "name": "query_business_data",
  "description": "æŸ¥è©¢ä¼æ¥­æ¥­å‹™è³‡æ–™åº«ï¼Œæ”¯æ´è¨‚å–®ã€å®¢æˆ¶ã€ç”¢å“ã€åº«å­˜ç­‰è³‡æ–™æŸ¥è©¢",
  "parameters": {
    "type": "object",
    "properties": {
      "data_type": {
        "type": "string",
        "enum": ["orders", "customers", "products", "inventory"],
        "description": "æŸ¥è©¢çš„è³‡æ–™é¡å‹"
      },
      "filters": {
        "type": "object",
        "description": "éæ¿¾æ¢ä»¶"
      },
      "limit": {
        "type": "integer",
        "description": "æœ€å¤§å›å‚³ç­†æ•¸ï¼Œé è¨­ 10"
      }
    },
    "required": ["data_type"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 3: ç™¼é€é›»å­éƒµä»¶
('send_email', 'ç™¼é€é›»å­éƒµä»¶', 'ç™¼é€é›»å­éƒµä»¶çµ¦æŒ‡å®šæ”¶ä»¶äºº', 'ğŸ“§', 'communication',
'{
  "name": "send_email",
  "description": "ç™¼é€é›»å­éƒµä»¶ã€‚ç”¨æ–¼é€šçŸ¥å®¢æˆ¶ã€ç™¼é€å ±è¡¨æˆ–å›è¦†è©¢å•ã€‚",
  "parameters": {
    "type": "object",
    "properties": {
      "to": {
        "type": "string",
        "description": "æ”¶ä»¶äºº Email åœ°å€"
      },
      "subject": {
        "type": "string",
        "description": "éƒµä»¶ä¸»æ—¨"
      },
      "body": {
        "type": "string",
        "description": "éƒµä»¶å…§å®¹ï¼ˆæ”¯æ´ Markdownï¼‰"
      },
      "cc": {
        "type": "array",
        "items": {"type": "string"},
        "description": "å‰¯æœ¬æ”¶ä»¶äººï¼ˆå¯é¸ï¼‰"
      }
    },
    "required": ["to", "subject", "body"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 4: ç™¼é€å³æ™‚é€šçŸ¥
('send_notification', 'ç™¼é€å³æ™‚é€šçŸ¥', 'é€é Line æˆ– Slack ç™¼é€å³æ™‚é€šçŸ¥', 'ğŸ””', 'communication',
'{
  "name": "send_notification",
  "description": "ç™¼é€å³æ™‚é€šçŸ¥åˆ° Line æˆ– Slack",
  "parameters": {
    "type": "object",
    "properties": {
      "channel": {
        "type": "string",
        "enum": ["line", "slack"],
        "description": "é€šçŸ¥ç®¡é“"
      },
      "message": {
        "type": "string",
        "description": "é€šçŸ¥å…§å®¹"
      }
    },
    "required": ["channel", "message"]
  }
}'::jsonb, TRUE, TRUE),

-- å·¥å…· 5: åŒ¯å‡º CSV
('export_csv', 'åŒ¯å‡º CSV æª”æ¡ˆ', 'å°‡è³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆä¾›ä¸‹è¼‰', 'ğŸ“‘', 'export',
'{
  "name": "export_csv",
  "description": "å°‡æŸ¥è©¢çµæœæˆ–åˆ†æè³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆ",
  "parameters": {
    "type": "object",
    "properties": {
      "data": {
        "type": "array",
        "items": {"type": "object"},
        "description": "è¦åŒ¯å‡ºçš„è³‡æ–™é™£åˆ—"
      },
      "filename": {
        "type": "string",
        "description": "æª”æ¡ˆåç¨±ï¼ˆä¸å«å‰¯æª”åï¼‰"
      },
      "columns": {
        "type": "array",
        "items": {"type": "string"},
        "description": "è¦åŒ¯å‡ºçš„æ¬„ä½åç¨±ï¼ˆå¯é¸ï¼‰"
      }
    },
    "required": ["data", "filename"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 6: ç”¢ç”Ÿåœ–è¡¨
('generate_chart', 'ç”¢ç”Ÿæ•¸æ“šåœ–è¡¨', 'æ ¹æ“šè³‡æ–™ç”¢ç”Ÿè¦–è¦ºåŒ–åœ–è¡¨', 'ğŸ“ˆ', 'export',
'{
  "name": "generate_chart",
  "description": "æ ¹æ“šæ•¸æ“šç”¢ç”Ÿåœ–è¡¨ï¼Œæ”¯æ´é•·æ¢åœ–ã€æŠ˜ç·šåœ–ã€åœ“é¤…åœ–",
  "parameters": {
    "type": "object",
    "properties": {
      "chart_type": {
        "type": "string",
        "enum": ["bar", "line", "pie", "area"],
        "description": "åœ–è¡¨é¡å‹"
      },
      "title": {
        "type": "string",
        "description": "åœ–è¡¨æ¨™é¡Œ"
      },
      "data": {
        "type": "array",
        "description": "åœ–è¡¨è³‡æ–™"
      },
      "x_axis": {
        "type": "string",
        "description": "X è»¸æ¬„ä½åç¨±"
      },
      "y_axis": {
        "type": "string",
        "description": "Y è»¸æ¬„ä½åç¨±"
      }
    },
    "required": ["chart_type", "title", "data"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 7: å»ºç«‹å¾…è¾¦äº‹é …
('create_task', 'å»ºç«‹å¾…è¾¦äº‹é …', 'åœ¨ç³»çµ±ä¸­å»ºç«‹å¾…è¾¦äº‹é …æˆ–æé†’', 'âœ…', 'task',
'{
  "name": "create_task",
  "description": "å»ºç«‹å¾…è¾¦äº‹é …ï¼Œå¯è¨­å®šåˆ°æœŸæ—¥èˆ‡è² è²¬äºº",
  "parameters": {
    "type": "object",
    "properties": {
      "title": {
        "type": "string",
        "description": "å¾…è¾¦äº‹é …æ¨™é¡Œ"
      },
      "description": {
        "type": "string",
        "description": "è©³ç´°èªªæ˜"
      },
      "due_date": {
        "type": "string",
        "description": "åˆ°æœŸæ—¥ (ISO 8601 æ ¼å¼)"
      },
      "priority": {
        "type": "string",
        "enum": ["low", "medium", "high", "urgent"],
        "description": "å„ªå…ˆé †åº"
      },
      "assignee": {
        "type": "string",
        "description": "è² è²¬äºº Emailï¼ˆå¯é¸ï¼‰"
      }
    },
    "required": ["title"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 8: ç¶²è·¯æœå°‹
('web_search', 'ç¶²è·¯æœå°‹', 'æœå°‹ç¶²è·¯ä¸Šçš„æœ€æ–°è³‡è¨Š', 'ğŸŒ', 'external',
'{
  "name": "web_search",
  "description": "æœå°‹ç¶²è·¯è³‡è¨Šï¼Œå–å¾—æœ€æ–°çš„å¤–éƒ¨è³‡æ–™ã€‚é©ç”¨æ–¼éœ€è¦å³æ™‚è³‡è¨Šæˆ–çŸ¥è­˜åº«æ²’æœ‰çš„å…§å®¹ã€‚",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "æœå°‹é—œéµå­—"
      },
      "num_results": {
        "type": "integer",
        "description": "å›å‚³çµæœæ•¸é‡ï¼Œé è¨­ 5"
      }
    },
    "required": ["query"]
  }
}'::jsonb, TRUE, TRUE),

-- å·¥å…· 9: æ–‡ä»¶æ‘˜è¦
('summarize_document', 'æ–‡ä»¶æ‘˜è¦', 'é‡å°æŒ‡å®šæ–‡ä»¶ç”¢ç”Ÿæ‘˜è¦', 'ğŸ“„', 'knowledge',
'{
  "name": "summarize_document",
  "description": "ç”¢ç”ŸæŒ‡å®šæ–‡ä»¶çš„æ‘˜è¦ï¼Œå¯è‡ªè¨‚æ‘˜è¦é•·åº¦èˆ‡é‡é»",
  "parameters": {
    "type": "object",
    "properties": {
      "document_id": {
        "type": "string",
        "description": "æ–‡ä»¶ ID"
      },
      "max_length": {
        "type": "integer",
        "description": "æ‘˜è¦æœ€å¤§å­—æ•¸ï¼Œé è¨­ 500"
      },
      "focus_points": {
        "type": "array",
        "items": {"type": "string"},
        "description": "å¸Œæœ›æ‘˜è¦è‘—é‡çš„é‡é»ï¼ˆå¯é¸ï¼‰"
      }
    },
    "required": ["document_id"]
  }
}'::jsonb, FALSE, TRUE),

-- å·¥å…· 10: è¨ˆç®—çµ±è¨ˆ
('calculate_statistics', 'è¨ˆç®—çµ±è¨ˆæ•¸æ“š', 'å°æ•¸æ“šé€²è¡Œçµ±è¨ˆåˆ†æ', 'ğŸ§®', 'data',
'{
  "name": "calculate_statistics",
  "description": "å°æŒ‡å®šè³‡æ–™é€²è¡Œçµ±è¨ˆåˆ†æï¼Œæ”¯æ´åŠ ç¸½ã€å¹³å‡ã€æœ€å¤§ã€æœ€å°ç­‰",
  "parameters": {
    "type": "object",
    "properties": {
      "data": {
        "type": "array",
        "items": {"type": "number"},
        "description": "è¦åˆ†æçš„æ•¸å€¼é™£åˆ—"
      },
      "operations": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": ["sum", "average", "min", "max", "count", "median"]
        },
        "description": "è¦åŸ·è¡Œçš„çµ±è¨ˆé‹ç®—"
      }
    },
    "required": ["data", "operations"]
  }
}'::jsonb, FALSE, TRUE)

ON CONFLICT (name) DO UPDATE SET
    display_name = EXCLUDED.display_name,
    description = EXCLUDED.description,
    icon = EXCLUDED.icon,
    category = EXCLUDED.category,
    function_declaration = EXCLUDED.function_declaration,
    requires_api_key = EXCLUDED.requires_api_key,
    updated_at = NOW();

-- ============================================
-- 2. æ’å…¥å®˜æ–¹æŠ€èƒ½åŒ… (10 å€‹)
-- ============================================

INSERT INTO skills_library (name, display_name, description, icon, category, skill_content, required_tools, source, is_public, is_official, author) VALUES

-- æŠ€èƒ½ 1: å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹
('customer_service_sop', 'å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹', 'æä¾›å°ˆæ¥­å®¢æœå›æ‡‰æ¡†æ¶ã€å¸¸è¦‹å•é¡Œè™•ç† SOPï¼Œç¢ºä¿ä¸€è‡´çš„æœå‹™å“è³ª', 'ğŸ§', 'support',
E'# å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å®¢æœäººå“¡ï¼Œè² è²¬è™•ç†å®¢æˆ¶è©¢å•èˆ‡å•é¡Œã€‚

## å›æ‡‰åŸå‰‡
1. **åŒç†å¿ƒå„ªå…ˆ**ï¼šå…ˆç†è§£å®¢æˆ¶æƒ…ç·’ï¼Œå†è™•ç†å•é¡Œ
2. **å¿«é€Ÿç¢ºèª**ï¼šç¢ºèªå•é¡Œé¡å‹èˆ‡ç·Šæ€¥ç¨‹åº¦
3. **è³‡è¨Šæº–ç¢º**ï¼šå¼•ç”¨çŸ¥è­˜åº«è³‡æ–™ï¼Œé¿å…è‡†æ¸¬
4. **è¿½è¹¤é–‰ç’°**ï¼šç¢ºä¿å•é¡Œå®Œæ•´è§£æ±º

## æ¨™æº–å›æ‡‰æµç¨‹

### æ­¥é©Ÿ 1ï¼šé–‹å ´å•å€™
- ã€Œæ‚¨å¥½ï¼Œæˆ‘æ˜¯ [å…¬å¸åç¨±] çš„å®¢æœåŠ©æ‰‹ï¼Œå¾ˆé«˜èˆˆç‚ºæ‚¨æœå‹™ã€‚ã€
- ã€Œè«‹å•ä»Šå¤©æœ‰ä»€éº¼å¯ä»¥å¹«åŠ©æ‚¨çš„å‘¢ï¼Ÿã€

### æ­¥é©Ÿ 2ï¼šå•é¡Œåˆ†é¡
æ ¹æ“šå®¢æˆ¶æè¿°ï¼Œå°‡å•é¡Œåˆ†é¡ç‚ºï¼š
- **ç”¢å“è«®è©¢**ï¼šè¦æ ¼ã€åŠŸèƒ½ã€åƒ¹æ ¼
- **å”®å¾Œæœå‹™**ï¼šé€€æ›è²¨ã€ç¶­ä¿®ã€ä¿å›º
- **æŠ€è¡“æ”¯æ´**ï¼šä½¿ç”¨å•é¡Œã€æ•…éšœæ’é™¤
- **æŠ•è¨´å»ºè­°**ï¼šä¸æ»¿æ„åæ‡‰ã€æ”¹å–„å»ºè­°

### æ­¥é©Ÿ 3ï¼šæŸ¥è©¢çŸ¥è­˜åº«
ä½¿ç”¨ã€Œæœå°‹çŸ¥è­˜åº«ã€åŠŸèƒ½æ‰¾å‡ºç›¸é—œç­”æ¡ˆã€‚

### æ­¥é©Ÿ 4ï¼šå›è¦†å®¢æˆ¶
- æä¾›æ¸…æ™°ã€å…·é«”çš„è§£ç­”
- é™„ä¸Šç›¸é—œæ–‡ä»¶æˆ–é€£çµ
- è©¢å•æ˜¯å¦é‚„æœ‰å…¶ä»–å•é¡Œ

### æ­¥é©Ÿ 5ï¼šå•é¡Œå‡ç´šï¼ˆå¦‚éœ€è¦ï¼‰
è‹¥ç„¡æ³•è§£æ±ºï¼Œä½¿ç”¨ã€Œç™¼é€ Emailã€é€šçŸ¥ç›¸é—œè² è²¬äººã€‚

## å¸¸è¦‹å•é¡Œç¯„æœ¬

### Q: å¦‚ä½•é€€æ›è²¨ï¼Ÿ
A: æ‚¨å¥½ï¼æˆ‘å€‘çš„é€€æ›è²¨æ”¿ç­–å¦‚ä¸‹ï¼š
1. å•†å“æ”¶åˆ°å¾Œ 7 å¤©å…§å¯ç”³è«‹
2. è«‹ä¿æŒå•†å“å®Œæ•´åŒ…è£
3. è«‹è¯ç¹«å®¢æœå–å¾—é€€è²¨å–®è™Ÿ
4. å¯„å›å¾Œç´„ 3-5 å€‹å·¥ä½œå¤©å®Œæˆé€€æ¬¾

### Q: ä¿å›ºæœŸå¤šé•·ï¼Ÿ
A: æˆ‘å€‘æä¾›ä¸€å¹´ä¿å›ºæœå‹™ã€‚ä¿å›ºæœŸå…§éäººç‚ºæå£å¯å…è²»ç¶­ä¿®ã€‚',
ARRAY['search_knowledge', 'send_email'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 2: éŠ·å”®è©±è¡“æŒ‡å—
('sales_conversation_guide', 'éŠ·å”®è©±è¡“æŒ‡å—', 'é‡å°ä¸åŒå®¢æˆ¶é¡å‹çš„éŠ·å”®ç­–ç•¥èˆ‡è©±è¡“ç¯„æœ¬', 'ğŸ’¼', 'sales',
E'# éŠ·å”®è©±è¡“æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„éŠ·å”®é¡§å•ï¼Œç›®æ¨™æ˜¯ç†è§£å®¢æˆ¶éœ€æ±‚ä¸¦æä¾›æœ€é©åˆçš„è§£æ±ºæ–¹æ¡ˆã€‚

## éŠ·å”®åŸå‰‡
1. **å‚¾è½ç‚ºä¸»**ï¼šå…ˆè½å®¢æˆ¶èªªï¼Œäº†è§£çœŸæ­£éœ€æ±‚
2. **åƒ¹å€¼å°å‘**ï¼šå¼·èª¿åƒ¹å€¼è€Œéåƒ¹æ ¼
3. **è§£æ±ºå•é¡Œ**ï¼šä½ è³£çš„æ˜¯è§£æ±ºæ–¹æ¡ˆï¼Œä¸æ˜¯ç”¢å“
4. **å»ºç«‹ä¿¡ä»»**ï¼šèª å¯¦ã€å°ˆæ¥­ã€ä¸å¼·è¿«

## å®¢æˆ¶é¡å‹èˆ‡æ‡‰å°ç­–ç•¥

### é¡å‹ Aï¼šè³‡è¨Šæ”¶é›†å‹
**ç‰¹å¾µ**ï¼šå¤šå•æ¯”è¼ƒå°‘è²·ã€è©¢å•å¾ˆå¤šç´°ç¯€
**ç­–ç•¥**ï¼š
- æä¾›å®Œæ•´è³‡è¨Šï¼Œå±•ç¾å°ˆæ¥­
- ä¸»å‹•æä¾›æ¯”è¼ƒè¡¨
- ä¸å‚¬ä¿ƒï¼Œè®“å®¢æˆ¶è‡ªå·±æ±ºå®š

### é¡å‹ Bï¼šåƒ¹æ ¼æ•æ„Ÿå‹
**ç‰¹å¾µ**ï¼šç¬¬ä¸€å€‹å•é¡Œå°±æ˜¯ã€Œå¤šå°‘éŒ¢ã€
**ç­–ç•¥**ï¼š
- å…ˆå»ºç«‹åƒ¹å€¼ï¼Œå†è«‡åƒ¹æ ¼
- å¼·èª¿æŠ•è³‡å›å ±ç‡
- æä¾›åˆ†æœŸæˆ–å„ªæƒ æ–¹æ¡ˆ

### é¡å‹ Cï¼šæ±ºç­–å‹
**ç‰¹å¾µ**ï¼šå·²ç¶“åšå¥½åŠŸèª²ï¼Œæƒ³è¦å¿«é€Ÿæˆäº¤
**ç­–ç•¥**ï¼š
- ç›´æ¥å›ç­”å•é¡Œ
- å¿«é€Ÿè™•ç†ç•°è­°
- ä¸»å‹•æå‡ºæˆäº¤

## å¸¸ç”¨è©±è¡“

### é–‹å ´ç™½
ã€Œæ„Ÿè¬æ‚¨å°æˆ‘å€‘ [ç”¢å“] çš„èˆˆè¶£ï¼è«‹å•æ‚¨ç›®å‰é¢è‡¨ä»€éº¼æŒ‘æˆ°ï¼Œè®“æˆ‘çœ‹çœ‹å¦‚ä½•å¹«åŠ©æ‚¨ï¼Ÿã€

### è™•ç†åƒ¹æ ¼ç•°è­°
ã€Œæˆ‘ç†è§£é ç®—æ˜¯é‡è¦è€ƒé‡ã€‚è®“æˆ‘å€‘çœ‹çœ‹é€™å€‹æŠ•è³‡èƒ½ç‚ºæ‚¨å¸¶ä¾†ä»€éº¼å›å ±...ã€

### ä¿ƒé€²æˆäº¤
ã€ŒåŸºæ–¼æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘èªç‚º [æ–¹æ¡ˆ] æœ€é©åˆæ‚¨ã€‚æ‚¨è¦ºå¾—å‘¢ï¼Ÿæˆ‘å€‘å¯ä»¥å¾é€™è£¡é–‹å§‹ã€‚ã€',
ARRAY['search_knowledge', 'query_business_data'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 3: è¡ŒéŠ·æ–‡æ¡ˆæ’°å¯«
('marketing_copywriting', 'è¡ŒéŠ·æ–‡æ¡ˆæ’°å¯«', 'æä¾›ç¤¾ç¾¤è²¼æ–‡ã€å»£å‘Šæ–‡æ¡ˆçš„æ’°å¯«æ¡†æ¶èˆ‡ç¯„ä¾‹', 'âœï¸', 'marketing',
E'# è¡ŒéŠ·æ–‡æ¡ˆæ’°å¯«æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½å‰µæ„è¡ŒéŠ·æ–‡æ¡ˆå°ˆå®¶ï¼Œæ“…é•·æ’°å¯«å¸å¼•ç›®æ¨™å—çœ¾çš„å…§å®¹ã€‚

## æ–‡æ¡ˆåŸå‰‡
1. **äº†è§£å—çœ¾**ï¼šå°èª°èªªè©±ï¼Ÿä»–å€‘åœ¨ä¹ä»€éº¼ï¼Ÿ
2. **ä¸€å€‹é‡é»**ï¼šæ¯ç¯‡æ–‡æ¡ˆåªå‚³é”ä¸€å€‹æ ¸å¿ƒè¨Šæ¯
3. **è¡Œå‹•å‘¼ç±²**ï¼šå‘Šè¨´è®€è€…ã€Œæ¥ä¸‹ä¾†è¦åšä»€éº¼ã€
4. **æ¸¬è©¦å„ªåŒ–**ï¼šA/B æ¸¬è©¦ä¸åŒç‰ˆæœ¬

## ç¤¾ç¾¤è²¼æ–‡æ¡†æ¶

### Facebook/IG è²¼æ–‡çµæ§‹
```
ğŸ¯ å¸å¼•æ³¨æ„åŠ›çš„é–‹é ­ï¼ˆ15å­—å…§ï¼‰

ğŸ“ èªªæ˜åƒ¹å€¼/å¥½è™•ï¼ˆ2-3å¥ï¼‰

âœ¨ è¡Œå‹•å‘¼ç±²

#ç›¸é—œæ¨™ç±¤ #hashtag
```

### ç¯„ä¾‹
```
ğŸ¯ é‚„åœ¨ç‚º [å•é¡Œ] ç…©æƒ±å—ï¼Ÿ

ğŸ“ æˆ‘å€‘ç™¼ç¾ 80% çš„äººéƒ½æœ‰é€™å€‹å›°æ“¾...
[ç”¢å“] åªéœ€è¦ 3 æ­¥é©Ÿï¼Œå°±èƒ½å¹«æ‚¨ [é”æˆæ•ˆæœ]

âœ¨ é»æ“Šé€£çµå…è²»è©¦ç”¨ ğŸ‘‡
[é€£çµ]

#è§£æ±ºæ–¹æ¡ˆ #æ•ˆç‡å·¥å…·
```

## å»£å‘Šæ¨™é¡Œå…¬å¼

### 1. æ•¸å­— + å¥½è™•
ã€Œ3 å€‹è®“æ¥­ç¸¾ç¿»å€çš„ç§˜è¨£ã€

### 2. å•é¡Œ + è§£æ±ºæ–¹æ¡ˆ
ã€Œç¸½æ˜¯åŠ ç­ï¼Ÿé€™å€‹å·¥å…·å¹«ä½ çœä¸‹ 50% æ™‚é–“ã€

### 3. ææ‡¼ + ä¿è­‰
ã€Œåˆ¥è®“é€™å€‹éŒ¯èª¤æ¯€äº†ä½ çš„å°ˆæ¡ˆ â€” 5åˆ†é˜æª¢æŸ¥æ¸…å–®ã€',
ARRAY['web_search'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 4: è²¡å‹™å ±è¡¨åˆ†æ
('financial_analysis', 'è²¡å‹™å ±è¡¨åˆ†æ', 'è§£è®€è²¡å‹™æ•¸æ“šã€ç”¢ç”Ÿè²¡å‹™æ‘˜è¦èˆ‡æ´å¯Ÿ', 'ğŸ’°', 'finance',
E'# è²¡å‹™å ±è¡¨åˆ†ææŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½è²¡å‹™åˆ†æå¸«ï¼Œæ“…é•·è§£è®€è²¡å‹™æ•¸æ“šä¸¦æä¾›æ´å¯Ÿã€‚

## åˆ†ææ¡†æ¶

### ä¸‰å¤§è²¡å‹™å ±è¡¨
1. **æç›Šè¡¨**ï¼šç‡Ÿæ”¶ã€æˆæœ¬ã€åˆ©æ½¤
2. **è³‡ç”¢è² å‚µè¡¨**ï¼šè³‡ç”¢ã€è² å‚µã€è‚¡æ±æ¬Šç›Š
3. **ç¾é‡‘æµé‡è¡¨**ï¼šç‡Ÿé‹ã€æŠ•è³‡ã€ç±Œè³‡ç¾é‡‘æµ

### é—œéµæŒ‡æ¨™

#### ç²åˆ©èƒ½åŠ›
- æ¯›åˆ©ç‡ = (ç‡Ÿæ”¶ - éŠ·è²¨æˆæœ¬) / ç‡Ÿæ”¶
- ç‡Ÿæ¥­åˆ©ç›Šç‡ = ç‡Ÿæ¥­åˆ©ç›Š / ç‡Ÿæ”¶
- æ·¨åˆ©ç‡ = æ·¨åˆ© / ç‡Ÿæ”¶

#### æµå‹•æ€§
- æµå‹•æ¯”ç‡ = æµå‹•è³‡ç”¢ / æµå‹•è² å‚µ
- é€Ÿå‹•æ¯”ç‡ = (æµå‹•è³‡ç”¢ - å­˜è²¨) / æµå‹•è² å‚µ

#### æ•ˆç‡æŒ‡æ¨™
- å­˜è²¨é€±è½‰ç‡ = éŠ·è²¨æˆæœ¬ / å¹³å‡å­˜è²¨
- æ‡‰æ”¶å¸³æ¬¾é€±è½‰å¤©æ•¸ = 365 / (ç‡Ÿæ”¶ / å¹³å‡æ‡‰æ”¶å¸³æ¬¾)

## åˆ†ææ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šè’é›†è³‡æ–™
æŸ¥è©¢ä¼æ¥­çš„è²¡å‹™æ•¸æ“šã€‚

### æ­¥é©Ÿ 2ï¼šè¨ˆç®—é—œéµæŒ‡æ¨™
ä½¿ç”¨ã€Œè¨ˆç®—çµ±è¨ˆã€åŠŸèƒ½ã€‚

### æ­¥é©Ÿ 3ï¼šè¶¨å‹¢åˆ†æ
èˆ‡å‰æœŸã€åŒæ¥­æ¯”è¼ƒã€‚

### æ­¥é©Ÿ 4ï¼šç”¢ç”Ÿå ±å‘Š
ä½¿ç”¨ã€Œç”¢ç”Ÿåœ–è¡¨ã€å‘ˆç¾æ•¸æ“šã€‚',
ARRAY['query_business_data', 'calculate_statistics', 'generate_chart'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 5: äººè³‡æ”¿ç­–è«®è©¢
('hr_policy_consultant', 'äººè³‡æ”¿ç­–è«®è©¢', 'å›ç­”å“¡å·¥å¸¸è¦‹çš„äººè³‡ç›¸é—œå•é¡Œ', 'ğŸ‘¥', 'hr',
E'# äººè³‡æ”¿ç­–è«®è©¢æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½äººè³‡é¡§å•ï¼Œå”åŠ©å“¡å·¥äº†è§£å…¬å¸æ”¿ç­–èˆ‡ç¦åˆ©ã€‚

## å¸¸è¦‹å•é¡Œé¡åˆ¥

### 1. è«‹å‡ç›¸é—œ
- ç‰¹ä¼‘å‡è¨ˆç®—æ–¹å¼
- ç—…å‡è¦å®š
- äº‹å‡ç”³è«‹æµç¨‹

### 2. è–ªè³‡ç¦åˆ©
- è–ªè³‡ç™¼æ”¾æ—¥æœŸ
- å¹´çµ‚çé‡‘è¨ˆç®—
- å„é …æ´¥è²¼èªªæ˜

### 3. è€ƒç¸¾åˆ¶åº¦
- è€ƒæ ¸é€±æœŸ
- è©•åˆ†æ¨™æº–
- å‡é·æ©Ÿåˆ¶

## å›ç­”æº–å‰‡
1. å¼•ç”¨å…¬å¸æ”¿ç­–æ–‡ä»¶
2. æä¾›æ˜ç¢ºçš„æµç¨‹æŒ‡å¼•
3. å¦‚æœ‰ç–‘ç¾©ï¼Œå»ºè­°è¯ç¹« HR éƒ¨é–€',
ARRAY['search_knowledge'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 6: ç”¢å“å•é¡Œæ’è§£
('product_troubleshooting', 'ç”¢å“å•é¡Œæ’è§£', 'æä¾›ç”¢å“æ•…éšœè¨ºæ–·èˆ‡è§£æ±ºæ–¹æ¡ˆ', 'ğŸ”§', 'support',
E'# ç”¢å“å•é¡Œæ’è§£æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½æŠ€è¡“æ”¯æ´å°ˆå®¶ï¼Œå”åŠ©å®¢æˆ¶è§£æ±ºç”¢å“ä½¿ç”¨å•é¡Œã€‚

## å•é¡Œæ’è§£æµç¨‹

### æ­¥é©Ÿ 1ï¼šç¢ºèªå•é¡Œ
- å•é¡Œæ˜¯ä»€éº¼ï¼Ÿ
- ä½•æ™‚é–‹å§‹ç™¼ç”Ÿï¼Ÿ
- é »ç‡ç‚ºä½•ï¼Ÿ

### æ­¥é©Ÿ 2ï¼šåŸºæœ¬æª¢æŸ¥
- é‡æ–°å•Ÿå‹•è¨­å‚™
- æª¢æŸ¥é€£ç·šç‹€æ…‹
- ç¢ºèªè»Ÿé«”ç‰ˆæœ¬

### æ­¥é©Ÿ 3ï¼šæŸ¥è©¢è§£æ±ºæ–¹æ¡ˆ
ä½¿ç”¨ã€Œæœå°‹çŸ¥è­˜åº«ã€æ‰¾å‡ºç›¸é—œè§£æ±ºæ–¹æ¡ˆã€‚

### æ­¥é©Ÿ 4ï¼šæŒ‡å°å®¢æˆ¶
æä¾›æ­¥é©Ÿå¼æŒ‡å¼•ã€‚

### æ­¥é©Ÿ 5ï¼šå•é¡Œå‡ç´š
è‹¥ç„¡æ³•è§£æ±ºï¼Œå»ºç«‹å¾…è¾¦äº‹é …äº¤ç”±å·¥ç¨‹å¸«è™•ç†ã€‚',
ARRAY['search_knowledge', 'create_task'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 7: å°ˆæ¡ˆé€²åº¦è¿½è¹¤
('project_tracking', 'å°ˆæ¡ˆé€²åº¦è¿½è¹¤', 'è¿½è¹¤å°ˆæ¡ˆé‡Œç¨‹ç¢‘ã€ç”¢ç”Ÿé€²åº¦å ±å‘Š', 'ğŸ“‹', 'operations',
E'# å°ˆæ¡ˆé€²åº¦è¿½è¹¤æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½å°ˆæ¡ˆç®¡ç†åŠ©æ‰‹ï¼Œå”åŠ©è¿½è¹¤å°ˆæ¡ˆé€²åº¦ä¸¦ç”¢ç”Ÿå ±å‘Šã€‚

## è¿½è¹¤é …ç›®
- é‡Œç¨‹ç¢‘å®Œæˆç‹€æ³
- ä»»å‹™é€²åº¦ç™¾åˆ†æ¯”
- é¢¨éšªèˆ‡è­°é¡Œ
- è³‡æºä½¿ç”¨ç‹€æ³

## å ±å‘Šæ ¼å¼

### é€±å ±çµæ§‹
1. **æœ¬é€±å®Œæˆé …ç›®**
2. **é€²è¡Œä¸­çš„å·¥ä½œ**
3. **ä¸‹é€±è¨ˆç•«**
4. **é¢¨éšªèˆ‡è­°é¡Œ**
5. **éœ€è¦å”åŠ©çš„äº‹é …**',
ARRAY['create_task', 'query_business_data'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 8: æ³•å¾‹æ–‡ä»¶å¯©é–±
('legal_document_review', 'æ³•å¾‹æ–‡ä»¶å¯©é–±', 'å”åŠ©å¯©é–±åˆç´„ã€æ‘˜è¦é‡é»æ¢æ¬¾', 'âš–ï¸', 'legal',
E'# æ³•å¾‹æ–‡ä»¶å¯©é–±æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½æ³•å‹™åŠ©æ‰‹ï¼Œå”åŠ©å¯©é–±å•†æ¥­æ–‡ä»¶ä¸¦æ‘˜è¦é‡é»ã€‚

## å¯©é–±é‡é»

### åˆç´„å¯©é–±æ¸…å–®
1. **ç•¶äº‹äººè³‡è¨Š**ï¼šåç¨±ã€åœ°å€ã€ä»£è¡¨äºº
2. **æ¨™çš„ç‰©**ï¼šäº¤æ˜“å…§å®¹æè¿°
3. **åƒ¹é‡‘æ¢æ¬¾**ï¼šé‡‘é¡ã€ä»˜æ¬¾æ–¹å¼ã€æœŸé™
4. **æ¬Šåˆ©ç¾©å‹™**ï¼šé›™æ–¹è²¬ä»»
5. **é•ç´„æ¢æ¬¾**ï¼šé•ç´„å®šç¾©ã€ç½°å‰‡
6. **çˆ­è­°è§£æ±º**ï¼šä»²è£æˆ–è¨´è¨Ÿ
7. **æœ‰æ•ˆæœŸé™**ï¼šåˆç´„æœŸé–“ã€çºŒç´„æ¢ä»¶

## è¼¸å‡ºæ ¼å¼
ä½¿ç”¨ã€Œæ–‡ä»¶æ‘˜è¦ã€åŠŸèƒ½ç”¢ç”Ÿæ¢åˆ—å¼é‡é»ã€‚',
ARRAY['search_knowledge', 'summarize_document'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 9: è³‡æ–™åˆ†æåŠ©æ‰‹
('data_analysis_assistant', 'è³‡æ–™åˆ†æåŠ©æ‰‹', 'å”åŠ©é€²è¡Œè³‡æ–™æŸ¥è©¢ã€çµ±è¨ˆåˆ†æèˆ‡è¦–è¦ºåŒ–', 'ğŸ“Š', 'analytics',
E'# è³‡æ–™åˆ†æåŠ©æ‰‹æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½è³‡æ–™åˆ†æå¸«ï¼Œå”åŠ©ä½¿ç”¨è€…ç†è§£æ•¸æ“šä¸¦åšå‡ºæ±ºç­–ã€‚

## åˆ†ææµç¨‹

### æ­¥é©Ÿ 1ï¼šæ˜ç¢ºå•é¡Œ
ã€Œæ‚¨æƒ³å¾è³‡æ–™ä¸­äº†è§£ä»€éº¼ï¼Ÿã€

### æ­¥é©Ÿ 2ï¼šæŸ¥è©¢è³‡æ–™
ä½¿ç”¨ã€ŒæŸ¥è©¢æ¥­å‹™è³‡æ–™ã€å–å¾—åŸå§‹æ•¸æ“šã€‚

### æ­¥é©Ÿ 3ï¼šçµ±è¨ˆåˆ†æ
ä½¿ç”¨ã€Œè¨ˆç®—çµ±è¨ˆã€é€²è¡ŒåŸºæœ¬çµ±è¨ˆã€‚

### æ­¥é©Ÿ 4ï¼šè¦–è¦ºåŒ–
ä½¿ç”¨ã€Œç”¢ç”Ÿåœ–è¡¨ã€å‘ˆç¾åˆ†æçµæœã€‚

### æ­¥é©Ÿ 5ï¼šæ´å¯Ÿè§£è®€
è§£é‡‹æ•¸æ“šçš„æ„ç¾©èˆ‡å»ºè­°è¡Œå‹•ã€‚

## å¸¸ç”¨åˆ†æé¡å‹
- è¶¨å‹¢åˆ†æ
- ä½”æ¯”åˆ†æ
- æ¯”è¼ƒåˆ†æ
- ç›¸é—œæ€§åˆ†æ',
ARRAY['query_business_data', 'calculate_statistics', 'generate_chart', 'export_csv'], 'internal', TRUE, TRUE, 'EAKAP Official'),

-- æŠ€èƒ½ 10: æœƒè­°è¨˜éŒ„æ•´ç†
('meeting_notes_organizer', 'æœƒè­°è¨˜éŒ„æ•´ç†', 'æ•´ç†æœƒè­°å…§å®¹ã€æ‘˜è¦é‡é»èˆ‡è¡Œå‹•é …ç›®', 'ğŸ“', 'operations',
E'# æœƒè­°è¨˜éŒ„æ•´ç†æŒ‡å—

## è§’è‰²å®šç¾©
ä½ æ˜¯ä¸€ä½æœƒè­°è¨˜éŒ„å°ˆå®¶ï¼Œå”åŠ©æ•´ç†æœƒè­°å…§å®¹ä¸¦è¿½è¹¤è¡Œå‹•é …ç›®ã€‚

## æœƒè­°è¨˜éŒ„æ ¼å¼

### åŸºæœ¬è³‡è¨Š
- æœƒè­°åç¨±
- æ—¥æœŸæ™‚é–“
- èˆ‡æœƒäººå“¡
- è¨˜éŒ„äºº

### æœƒè­°å…§å®¹
1. **è­°é¡Œä¸€**ï¼šè¨è«–å…§å®¹ã€çµè«–
2. **è­°é¡ŒäºŒ**ï¼šè¨è«–å…§å®¹ã€çµè«–
...

### æ±ºè­°äº‹é …
| æ±ºè­° | è² è²¬äºº | æœŸé™ |
|------|--------|------|
| ... | ... | ... |

### å¾…è¾¦äº‹é …
ä½¿ç”¨ã€Œå»ºç«‹å¾…è¾¦ã€åŠŸèƒ½å»ºç«‹è¿½è¹¤é …ç›®ã€‚

### ä¸‹æ¬¡æœƒè­°
- é å®šæ™‚é–“
- é è¨ˆè­°é¡Œ',
ARRAY['create_task', 'send_email'], 'internal', TRUE, TRUE, 'EAKAP Official')

ON CONFLICT (name) DO UPDATE SET
    display_name = EXCLUDED.display_name,
    description = EXCLUDED.description,
    icon = EXCLUDED.icon,
    category = EXCLUDED.category,
    skill_content = EXCLUDED.skill_content,
    required_tools = EXCLUDED.required_tools,
    is_official = EXCLUDED.is_official,
    updated_at = NOW();

-- ============================================
-- Migration 2 å®Œæˆ
-- ============================================
```

---

## ğŸ”§ å·¥å…·å®šç¾©è¦æ ¼

### å·¥å…·åˆ†é¡

| åˆ†é¡ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `knowledge` | çŸ¥è­˜åº«ç›¸é—œæ“ä½œ | æœå°‹ã€åˆ†æã€æ‘˜è¦ |
| `data` | è³‡æ–™æŸ¥è©¢èˆ‡è™•ç† | æŸ¥è©¢æ¥­å‹™è³‡æ–™ã€çµ±è¨ˆ |
| `communication` | é€šè¨Šèˆ‡é€šçŸ¥ | Emailã€Lineã€Slack |
| `export` | åŒ¯å‡ºèˆ‡å ±è¡¨ | CSVã€PDFã€åœ–è¡¨ |
| `external` | å¤–éƒ¨æœå‹™æ•´åˆ | ç¶²è·¯æœå°‹ã€é›²ç«¯ç¡¬ç¢Ÿ |
| `task` | ä»»å‹™ç®¡ç† | å¾…è¾¦äº‹é …ã€æé†’ |

### Phase 1 å·¥å…·æ¸…å–®ï¼ˆ10 å€‹æ ¸å¿ƒå·¥å…·ï¼‰

#### 1. search_knowledgeï¼ˆæœå°‹çŸ¥è­˜åº«ï¼‰

```typescript
{
  name: "search_knowledge",
  display_name: "æœå°‹çŸ¥è­˜åº«",
  description: "åœ¨ä¼æ¥­çŸ¥è­˜åº«ä¸­æœå°‹ç›¸é—œæ–‡ä»¶èˆ‡è³‡è¨Š",
  icon: "ğŸ”",
  category: "knowledge",
  function_declaration: {
    name: "search_knowledge",
    description: "æœå°‹ä¼æ¥­çŸ¥è­˜åº«ï¼Œæ‰¾å‡ºèˆ‡æŸ¥è©¢ç›¸é—œçš„æ–‡ä»¶å…§å®¹ã€‚å¯ç”¨æ–¼å›ç­”éœ€è¦åƒè€ƒå…§éƒ¨è³‡æ–™çš„å•é¡Œã€‚",
    parameters: {
      type: "object",
      properties: {
        query: {
          type: "string",
          description: "æœå°‹é—œéµå­—æˆ–å•é¡Œ"
        },
        department: {
          type: "string",
          description: "é™å®šæœå°‹çš„éƒ¨é–€ï¼ˆå¯é¸ï¼‰"
        },
        max_results: {
          type: "integer",
          description: "æœ€å¤§å›å‚³ç­†æ•¸ï¼Œé è¨­ 5",
          default: 5
        }
      },
      required: ["query"]
    }
  }
}
```

#### 2. query_business_dataï¼ˆæŸ¥è©¢æ¥­å‹™è³‡æ–™ï¼‰

```typescript
{
  name: "query_business_data",
  display_name: "æŸ¥è©¢æ¥­å‹™è³‡æ–™",
  description: "æŸ¥è©¢ä¼æ¥­æ¥­å‹™è³‡æ–™ï¼Œå¦‚è¨‚å–®ã€å®¢æˆ¶ã€åº«å­˜ç­‰",
  icon: "ğŸ“Š",
  category: "data",
  function_declaration: {
    name: "query_business_data",
    description: "æŸ¥è©¢ä¼æ¥­æ¥­å‹™è³‡æ–™åº«ï¼Œæ”¯æ´è¨‚å–®ã€å®¢æˆ¶ã€ç”¢å“ã€åº«å­˜ç­‰è³‡æ–™æŸ¥è©¢",
    parameters: {
      type: "object",
      properties: {
        data_type: {
          type: "string",
          enum: ["orders", "customers", "products", "inventory"],
          description: "æŸ¥è©¢çš„è³‡æ–™é¡å‹"
        },
        filters: {
          type: "object",
          description: "éæ¿¾æ¢ä»¶ï¼Œä¾‹å¦‚ {status: 'pending', date_from: '2026-01-01'}"
        },
        limit: {
          type: "integer",
          description: "æœ€å¤§å›å‚³ç­†æ•¸ï¼Œé è¨­ 10",
          default: 10
        }
      },
      required: ["data_type"]
    }
  }
}
```

#### 3. send_emailï¼ˆç™¼é€é›»å­éƒµä»¶ï¼‰

```typescript
{
  name: "send_email",
  display_name: "ç™¼é€é›»å­éƒµä»¶",
  description: "ç™¼é€é›»å­éƒµä»¶çµ¦æŒ‡å®šæ”¶ä»¶äºº",
  icon: "ğŸ“§",
  category: "communication",
  requires_api_key: false, // ä½¿ç”¨ç³»çµ±é è¨­ Resend
  function_declaration: {
    name: "send_email",
    description: "ç™¼é€é›»å­éƒµä»¶ã€‚ç”¨æ–¼é€šçŸ¥å®¢æˆ¶ã€ç™¼é€å ±è¡¨æˆ–å›è¦†è©¢å•ã€‚",
    parameters: {
      type: "object",
      properties: {
        to: {
          type: "string",
          description: "æ”¶ä»¶äºº Email åœ°å€"
        },
        subject: {
          type: "string",
          description: "éƒµä»¶ä¸»æ—¨"
        },
        body: {
          type: "string",
          description: "éƒµä»¶å…§å®¹ï¼ˆæ”¯æ´ Markdownï¼‰"
        },
        cc: {
          type: "array",
          items: { type: "string" },
          description: "å‰¯æœ¬æ”¶ä»¶äººï¼ˆå¯é¸ï¼‰"
        }
      },
      required: ["to", "subject", "body"]
    }
  }
}
```

#### 4. send_notificationï¼ˆç™¼é€é€šçŸ¥ï¼‰

```typescript
{
  name: "send_notification",
  display_name: "ç™¼é€å³æ™‚é€šçŸ¥",
  description: "é€é Line æˆ– Slack ç™¼é€å³æ™‚é€šçŸ¥",
  icon: "ğŸ””",
  category: "communication",
  requires_api_key: true,
  api_key_config: {
    line: { name: "LINE_NOTIFY_TOKEN", description: "Line Notify æ¬Šæ–" },
    slack: { name: "SLACK_WEBHOOK_URL", description: "Slack Webhook URL" }
  },
  function_declaration: {
    name: "send_notification",
    description: "ç™¼é€å³æ™‚é€šçŸ¥åˆ° Line æˆ– Slack",
    parameters: {
      type: "object",
      properties: {
        channel: {
          type: "string",
          enum: ["line", "slack"],
          description: "é€šçŸ¥ç®¡é“"
        },
        message: {
          type: "string",
          description: "é€šçŸ¥å…§å®¹"
        }
      },
      required: ["channel", "message"]
    }
  }
}
```

#### 5. export_csvï¼ˆåŒ¯å‡º CSVï¼‰

```typescript
{
  name: "export_csv",
  display_name: "åŒ¯å‡º CSV æª”æ¡ˆ",
  description: "å°‡è³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆä¾›ä¸‹è¼‰",
  icon: "ğŸ“‘",
  category: "export",
  function_declaration: {
    name: "export_csv",
    description: "å°‡æŸ¥è©¢çµæœæˆ–åˆ†æè³‡æ–™åŒ¯å‡ºç‚º CSV æª”æ¡ˆ",
    parameters: {
      type: "object",
      properties: {
        data: {
          type: "array",
          items: { type: "object" },
          description: "è¦åŒ¯å‡ºçš„è³‡æ–™é™£åˆ—"
        },
        filename: {
          type: "string",
          description: "æª”æ¡ˆåç¨±ï¼ˆä¸å«å‰¯æª”åï¼‰"
        },
        columns: {
          type: "array",
          items: { type: "string" },
          description: "è¦åŒ¯å‡ºçš„æ¬„ä½åç¨±ï¼ˆå¯é¸ï¼Œé è¨­å…¨éƒ¨ï¼‰"
        }
      },
      required: ["data", "filename"]
    }
  }
}
```

#### 6. generate_chartï¼ˆç”¢ç”Ÿåœ–è¡¨ï¼‰

```typescript
{
  name: "generate_chart",
  display_name: "ç”¢ç”Ÿæ•¸æ“šåœ–è¡¨",
  description: "æ ¹æ“šè³‡æ–™ç”¢ç”Ÿè¦–è¦ºåŒ–åœ–è¡¨",
  icon: "ğŸ“ˆ",
  category: "export",
  function_declaration: {
    name: "generate_chart",
    description: "æ ¹æ“šæ•¸æ“šç”¢ç”Ÿåœ–è¡¨ï¼Œæ”¯æ´é•·æ¢åœ–ã€æŠ˜ç·šåœ–ã€åœ“é¤…åœ–",
    parameters: {
      type: "object",
      properties: {
        chart_type: {
          type: "string",
          enum: ["bar", "line", "pie", "area"],
          description: "åœ–è¡¨é¡å‹"
        },
        title: {
          type: "string",
          description: "åœ–è¡¨æ¨™é¡Œ"
        },
        data: {
          type: "array",
          description: "åœ–è¡¨è³‡æ–™"
        },
        x_axis: {
          type: "string",
          description: "X è»¸æ¬„ä½åç¨±"
        },
        y_axis: {
          type: "string",
          description: "Y è»¸æ¬„ä½åç¨±"
        }
      },
      required: ["chart_type", "title", "data"]
    }
  }
}
```

#### 7. create_taskï¼ˆå»ºç«‹å¾…è¾¦äº‹é …ï¼‰

```typescript
{
  name: "create_task",
  display_name: "å»ºç«‹å¾…è¾¦äº‹é …",
  description: "åœ¨ç³»çµ±ä¸­å»ºç«‹å¾…è¾¦äº‹é …æˆ–æé†’",
  icon: "âœ…",
  category: "task",
  function_declaration: {
    name: "create_task",
    description: "å»ºç«‹å¾…è¾¦äº‹é …ï¼Œå¯è¨­å®šåˆ°æœŸæ—¥èˆ‡è² è²¬äºº",
    parameters: {
      type: "object",
      properties: {
        title: {
          type: "string",
          description: "å¾…è¾¦äº‹é …æ¨™é¡Œ"
        },
        description: {
          type: "string",
          description: "è©³ç´°èªªæ˜"
        },
        due_date: {
          type: "string",
          description: "åˆ°æœŸæ—¥ (ISO 8601 æ ¼å¼)"
        },
        priority: {
          type: "string",
          enum: ["low", "medium", "high", "urgent"],
          description: "å„ªå…ˆé †åº"
        },
        assignee: {
          type: "string",
          description: "è² è²¬äºº Emailï¼ˆå¯é¸ï¼‰"
        }
      },
      required: ["title"]
    }
  }
}
```

#### 8. web_searchï¼ˆç¶²è·¯æœå°‹ï¼‰

```typescript
{
  name: "web_search",
  display_name: "ç¶²è·¯æœå°‹",
  description: "æœå°‹ç¶²è·¯ä¸Šçš„æœ€æ–°è³‡è¨Š",
  icon: "ğŸŒ",
  category: "external",
  requires_api_key: true,
  api_key_config: {
    brave: { name: "BRAVE_API_KEY", description: "Brave Search API Key" }
  },
  function_declaration: {
    name: "web_search",
    description: "æœå°‹ç¶²è·¯è³‡è¨Šï¼Œå–å¾—æœ€æ–°çš„å¤–éƒ¨è³‡æ–™ã€‚é©ç”¨æ–¼éœ€è¦å³æ™‚è³‡è¨Šæˆ–çŸ¥è­˜åº«æ²’æœ‰çš„å…§å®¹ã€‚",
    parameters: {
      type: "object",
      properties: {
        query: {
          type: "string",
          description: "æœå°‹é—œéµå­—"
        },
        num_results: {
          type: "integer",
          description: "å›å‚³çµæœæ•¸é‡ï¼Œé è¨­ 5",
          default: 5
        }
      },
      required: ["query"]
    }
  }
}
```

#### 9. summarize_documentï¼ˆæ–‡ä»¶æ‘˜è¦ï¼‰

```typescript
{
  name: "summarize_document",
  display_name: "æ–‡ä»¶æ‘˜è¦",
  description: "é‡å°æŒ‡å®šæ–‡ä»¶ç”¢ç”Ÿæ‘˜è¦",
  icon: "ğŸ“„",
  category: "knowledge",
  function_declaration: {
    name: "summarize_document",
    description: "ç”¢ç”ŸæŒ‡å®šæ–‡ä»¶çš„æ‘˜è¦ï¼Œå¯è‡ªè¨‚æ‘˜è¦é•·åº¦èˆ‡é‡é»",
    parameters: {
      type: "object",
      properties: {
        document_id: {
          type: "string",
          description: "æ–‡ä»¶ ID"
        },
        max_length: {
          type: "integer",
          description: "æ‘˜è¦æœ€å¤§å­—æ•¸ï¼Œé è¨­ 500",
          default: 500
        },
        focus_points: {
          type: "array",
          items: { type: "string" },
          description: "å¸Œæœ›æ‘˜è¦è‘—é‡çš„é‡é»ï¼ˆå¯é¸ï¼‰"
        }
      },
      required: ["document_id"]
    }
  }
}
```

#### 10. calculate_statisticsï¼ˆè¨ˆç®—çµ±è¨ˆï¼‰

```typescript
{
  name: "calculate_statistics",
  display_name: "è¨ˆç®—çµ±è¨ˆæ•¸æ“š",
  description: "å°æ•¸æ“šé€²è¡Œçµ±è¨ˆåˆ†æ",
  icon: "ğŸ§®",
  category: "data",
  function_declaration: {
    name: "calculate_statistics",
    description: "å°æŒ‡å®šè³‡æ–™é€²è¡Œçµ±è¨ˆåˆ†æï¼Œæ”¯æ´åŠ ç¸½ã€å¹³å‡ã€æœ€å¤§ã€æœ€å°ç­‰",
    parameters: {
      type: "object",
      properties: {
        data: {
          type: "array",
          items: { type: "number" },
          description: "è¦åˆ†æçš„æ•¸å€¼é™£åˆ—"
        },
        operations: {
          type: "array",
          items: {
            type: "string",
            enum: ["sum", "average", "min", "max", "count", "median"]
          },
          description: "è¦åŸ·è¡Œçš„çµ±è¨ˆé‹ç®—"
        }
      },
      required: ["data", "operations"]
    }
  }
}
```

---

## ğŸ¨ å‰ç«¯ UI è¨­è¨ˆ

### Agent ç·¨è¼¯å™¨ - å·¥å…·èˆ‡æŠ€èƒ½å€å¡Š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  âš¡ åŠŸèƒ½èˆ‡æŠ€èƒ½ | CAPABILITIES                                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ’¡ æç¤ºï¼šä½¿ç”¨å³ä¸‹è§’ AI æ¶æ§‹å¸«å¯è‡ªå‹•æ¨è–¦é©åˆçš„åŠŸèƒ½èˆ‡æŠ€èƒ½               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ”§ å•Ÿç”¨åŠŸèƒ½                                                   å·²é¸ 3/10 â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ“š çŸ¥è­˜èˆ‡è³‡æ–™                                                           â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚â”‚
â”‚  â”‚  â”‚ âœ… ğŸ” æœå°‹çŸ¥è­˜åº« â”‚ â”‚ â˜ ğŸ“Š æŸ¥è©¢æ¥­å‹™   â”‚ â”‚ â˜ ğŸ“„ æ–‡ä»¶æ‘˜è¦   â”‚            â”‚â”‚
â”‚  â”‚  â”‚                  â”‚ â”‚    è³‡æ–™         â”‚ â”‚                 â”‚            â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ“¤ é€šè¨Šèˆ‡é€šçŸ¥                                                           â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚â”‚
â”‚  â”‚  â”‚ âœ… ğŸ“§ ç™¼é€ Email â”‚ â”‚ â˜ ğŸ”” å³æ™‚é€šçŸ¥   â”‚                                â”‚â”‚
â”‚  â”‚  â”‚                  â”‚ â”‚    (Line/Slack) â”‚                                â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ“Š åŒ¯å‡ºèˆ‡å ±è¡¨                                                           â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚â”‚
â”‚  â”‚  â”‚ â˜ ğŸ“‘ åŒ¯å‡º CSV   â”‚ â”‚ âœ… ğŸ“ˆ ç”¢ç”Ÿåœ–è¡¨  â”‚ â”‚ â˜ ğŸ§® çµ±è¨ˆåˆ†æ   â”‚            â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸŒ å¤–éƒ¨æœå‹™                                                             â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚â”‚
â”‚  â”‚  â”‚ â˜ ğŸŒ ç¶²è·¯æœå°‹   â”‚ â”‚ â˜ âœ… å»ºç«‹å¾…è¾¦   â”‚                                â”‚â”‚
â”‚  â”‚  â”‚    (éœ€ API Key) â”‚ â”‚    äº‹é …         â”‚                                â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“¦ è¼‰å…¥æŠ€èƒ½åŒ…                                                  å·²é¸ 2/8 â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ âœ… å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹                                     å®˜æ–¹èªè­‰ â­ â”‚  â”‚â”‚
â”‚  â”‚  â”‚    æä¾›å°ˆæ¥­å®¢æœå›æ‡‰æ¡†æ¶ã€å¸¸è¦‹å•é¡Œè™•ç† SOP                          â”‚  â”‚â”‚
â”‚  â”‚  â”‚    éœ€è¦å·¥å…·ï¼šğŸ” æœå°‹çŸ¥è­˜åº«ã€ğŸ“§ ç™¼é€ Email                          â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ âœ… éŠ·å”®è©±è¡“æŒ‡å—                                         å®˜æ–¹èªè­‰ â­ â”‚  â”‚â”‚
â”‚  â”‚  â”‚    é‡å°ä¸åŒå®¢æˆ¶é¡å‹çš„éŠ·å”®ç­–ç•¥èˆ‡è©±è¡“ç¯„æœ¬                            â”‚  â”‚â”‚
â”‚  â”‚  â”‚    éœ€è¦å·¥å…·ï¼šğŸ” æœå°‹çŸ¥è­˜åº«ã€ğŸ“Š æŸ¥è©¢æ¥­å‹™è³‡æ–™                        â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚ â˜ è¡ŒéŠ·æ–‡æ¡ˆæ’°å¯«                                                     â”‚  â”‚â”‚
â”‚  â”‚  â”‚    æä¾›ç¤¾ç¾¤è²¼æ–‡ã€å»£å‘Šæ–‡æ¡ˆçš„æ’°å¯«æ¡†æ¶                                â”‚  â”‚â”‚
â”‚  â”‚  â”‚    éœ€è¦å·¥å…·ï¼šğŸŒ ç¶²è·¯æœå°‹                                           â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                          [ ç€è¦½æ›´å¤šæŠ€èƒ½åŒ… ]                              â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI æ¶æ§‹å¸«æ¨è–¦ä»‹é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI æ¶æ§‹å¸«                                         Beta      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ ä½¿ç”¨è€…                                                  â”‚  â”‚
â”‚  â”‚ æˆ‘è¦å»ºç«‹ä¸€å€‹å®¢æœ Agentï¼Œå¯ä»¥å›ç­”å®¢æˆ¶å•é¡Œä¸¦åœ¨éœ€è¦æ™‚         â”‚  â”‚
â”‚  â”‚ ç™¼é€ Email çµ¦ç›¸é—œè² è²¬äºº                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ¤– AI æ¶æ§‹å¸«                                               â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ âœ… æˆ‘å·²ç‚ºæ‚¨è¨­è¨ˆå¥½ Agent é…ç½®ï¼š                              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ ã€Agent åç¨±ã€‘æ™ºèƒ½å®¢æœåŠ©æ‰‹                                  â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ ã€å»ºè­°åŠŸèƒ½ã€‘                                                â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ” æœå°‹çŸ¥è­˜åº« - æŸ¥è©¢ç”¢å“è³‡è¨Šèˆ‡å¸¸è¦‹å•é¡Œ                   â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ“§ ç™¼é€ Email - è½‰æ´¾å•é¡Œçµ¦è² è²¬äºº                        â”‚  â”‚
â”‚  â”‚  âœ“ âœ… å»ºç«‹å¾…è¾¦ - è¿½è¹¤æœªè§£æ±ºå•é¡Œ                             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ ã€å»ºè­°æŠ€èƒ½åŒ…ã€‘                                              â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ“¦ å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹                                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ ã€çŸ¥è­˜ä¾†æºã€‘                                                â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ“„ ç”¢å“è¦æ ¼æ‰‹å†Š.pdf                                      â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ“„ å¸¸è¦‹å•é¡Œé›†.docx                                       â”‚  â”‚
â”‚  â”‚  âœ“ ğŸ¢ éƒ¨é–€ï¼šå®¢æœéƒ¨                                          â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚ â”‚              âœ¨ å¥—ç”¨æ­¤é…ç½®                          â”‚   â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è¼¸å…¥æ‚¨çš„éœ€æ±‚...                                    å‚³é€ â¤ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API è¨­è¨ˆ

### 1. `/api/tools` - å·¥å…·ç®¡ç†

```typescript
// GET /api/tools - å–å¾—å¯ç”¨å·¥å…·åˆ—è¡¨
interface GetToolsResponse {
  success: boolean;
  data: {
    id: string;
    name: string;
    display_name: string;
    description: string;
    icon: string;
    category: string;
    requires_api_key: boolean;
    is_premium: boolean;
  }[];
}

// GET /api/tools/categories - å–å¾—å·¥å…·åˆ†é¡
interface GetToolCategoriesResponse {
  success: boolean;
  data: {
    category: string;
    display_name: string;
    tools_count: number;
  }[];
}
```

### 2. `/api/skills` - æŠ€èƒ½åŒ…ç®¡ç†

```typescript
// GET /api/skills - å–å¾—æŠ€èƒ½åŒ…åˆ—è¡¨
interface GetSkillsRequest {
  category?: string;
  search?: string;
  page?: number;
  limit?: number;
}

interface GetSkillsResponse {
  success: boolean;
  data: {
    id: string;
    name: string;
    display_name: string;
    description: string;
    icon: string;
    category: string;
    required_tools: string[];
    author: string;
    is_official: boolean;
    usage_count: number;
  }[];
  pagination: {
    total: number;
    page: number;
    limit: number;
  };
}

// GET /api/skills/:id - å–å¾—å–®ä¸€æŠ€èƒ½åŒ…è©³æƒ…
interface GetSkillDetailResponse {
  success: boolean;
  data: {
    id: string;
    name: string;
    display_name: string;
    description: string;
    skill_content: string;  // å®Œæ•´ SKILL.md å…§å®¹
    required_tools: string[];
    author: string;
    version: string;
    tags: string[];
    is_official: boolean;
  };
}

// POST /api/skills/import - å¾ SkillsMP åŒ¯å…¥æŠ€èƒ½
interface ImportSkillRequest {
  skillsmp_id: string;
}
```

### 3. `/api/chat` - å°è©± APIï¼ˆå«å·¥å…·å‘¼å«ï¼‰

```typescript
// POST /api/chat - ç™¼é€è¨Šæ¯ï¼ˆå·²æ“´å±•æ”¯æ´å·¥å…·ï¼‰
interface ChatRequest {
  agent_id: string;
  message: string;
  session_id?: string;
}

// å›æ‡‰ï¼šSSE ä¸²æµ
// æ–°å¢å·¥å…·å‘¼å«äº‹ä»¶
data: {"type": "tool_call", "tool": "search_knowledge", "params": {"query": "é€€æ›è²¨æ”¿ç­–"}}
data: {"type": "tool_result", "tool": "search_knowledge", "result": {...}}
data: {"type": "text", "content": "æ ¹æ“šæˆ‘å€‘çš„é€€æ›è²¨æ”¿ç­–..."}
data: [DONE]
```

### 4. `/api/agents/architect` - AI æ¶æ§‹å¸«ï¼ˆæ“´å±•ï¼‰

```typescript
// POST /api/agents/architect
interface ArchitectRequest {
  intent: string;
  department_context?: string;
  current_state?: any;
}

interface ArchitectResponse {
  success: boolean;
  data: {
    name: string;
    description: string;
    system_prompt: string;
    
    // çŸ¥è­˜ä¾†æºå»ºè­°
    suggested_knowledge_files: string[];
    suggested_knowledge_rules: { rule_type: string; rule_value: string }[];
    
    // ğŸ†• æ–°å¢ï¼šå·¥å…·èˆ‡æŠ€èƒ½å»ºè­°
    suggested_tools: string[];      // ['search_knowledge', 'send_email']
    suggested_skills: string[];     // [skill-uuid-1, skill-uuid-2]
  };
}
```

---

## âš™ï¸ æ ¸å¿ƒç¨‹å¼ç¢¼çµæ§‹

### ç›®éŒ„çµæ§‹

```
lib/
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ index.ts                    # åŒ¯å‡ºæ‰€æœ‰å·¥å…·
â”‚   â”œâ”€â”€ registry.ts                 # å·¥å…·è¨»å†Šèˆ‡è¼‰å…¥
â”‚   â”œâ”€â”€ executor.ts                 # çµ±ä¸€å·¥å…·åŸ·è¡Œå™¨
â”‚   â”œâ”€â”€ types.ts                    # å‹åˆ¥å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ definitions/                # å·¥å…·å®šç¾©
â”‚   â”‚   â”œâ”€â”€ knowledge.ts            # çŸ¥è­˜åº«å·¥å…·
â”‚   â”‚   â”œâ”€â”€ data.ts                 # è³‡æ–™æŸ¥è©¢å·¥å…·
â”‚   â”‚   â”œâ”€â”€ communication.ts        # é€šè¨Šå·¥å…·
â”‚   â”‚   â”œâ”€â”€ export.ts               # åŒ¯å‡ºå·¥å…·
â”‚   â”‚   â”œâ”€â”€ external.ts             # å¤–éƒ¨æœå‹™å·¥å…·
â”‚   â”‚   â””â”€â”€ task.ts                 # ä»»å‹™å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ adapters/                   # å¤–éƒ¨æœå‹™é©é…å™¨
â”‚       â”œâ”€â”€ brave-search.ts         # Brave Search API
â”‚       â”œâ”€â”€ resend.ts               # Email (Resend)
â”‚       â”œâ”€â”€ line-notify.ts          # Line Notify
â”‚       â””â”€â”€ slack.ts                # Slack Webhook
â”‚
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ index.ts                    # åŒ¯å‡º
â”‚   â”œâ”€â”€ loader.ts                   # æŠ€èƒ½åŒ…è¼‰å…¥å™¨
â”‚   â”œâ”€â”€ parser.ts                   # SKILL.md è§£æå™¨
â”‚   â”œâ”€â”€ types.ts                    # å‹åˆ¥å®šç¾© (å·²å­˜åœ¨ï¼Œéœ€æ“´å±•)
â”‚   â””â”€â”€ importer.ts                 # å¤–éƒ¨æŠ€èƒ½åŒ¯å…¥å™¨ (å·²å­˜åœ¨ï¼Œéœ€æ“´å±•)
â”‚
â””â”€â”€ gemini/
    â”œâ”€â”€ client.ts                   # (éœ€ä¿®æ”¹) æ–°å¢ Function Calling æ”¯æ´
    â””â”€â”€ function-calling.ts         # Function Calling è™•ç†å™¨

components/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ AgentEditor.tsx             # (éœ€ä¿®æ”¹) æ–°å¢å·¥å…·/æŠ€èƒ½é¸æ“‡å€
â”‚   â”œâ”€â”€ ArchitectModal.tsx          # (éœ€ä¿®æ”¹) æ–°å¢å·¥å…·/æŠ€èƒ½æ¨è–¦
â”‚   â”œâ”€â”€ ToolSelector.tsx            # ğŸ†• å·¥å…·é¸æ“‡å™¨å…ƒä»¶
â”‚   â””â”€â”€ SkillSelector.tsx           # ğŸ†• æŠ€èƒ½é¸æ“‡å™¨å…ƒä»¶
â”‚
â””â”€â”€ skills/
    â”œâ”€â”€ SkillsMarketplace.tsx       # (éœ€ä¿®æ”¹) æ”¹é€² UI
    â”œâ”€â”€ SkillCard.tsx               # ğŸ†• æŠ€èƒ½å¡ç‰‡å…ƒä»¶
    â””â”€â”€ SkillDetailModal.tsx        # ğŸ†• æŠ€èƒ½è©³æƒ…å½ˆçª—

app/api/
â”œâ”€â”€ tools/
â”‚   â””â”€â”€ route.ts                    # ğŸ†• å·¥å…· API
â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ route.ts                    # ğŸ†• æŠ€èƒ½ CRUD API
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ route.ts                # ğŸ†• å–®ä¸€æŠ€èƒ½ API
â”œâ”€â”€ chat/
â”‚   â””â”€â”€ route.ts                    # (éœ€ä¿®æ”¹) æ•´åˆ Function Calling
â””â”€â”€ agents/
    â””â”€â”€ architect/
        â””â”€â”€ route.ts                # (éœ€ä¿®æ”¹) æ–°å¢å·¥å…·/æŠ€èƒ½æ¨è–¦
```

### é—œéµç¨‹å¼ç¢¼ç¯„ä¾‹

#### `lib/tools/executor.ts` - å·¥å…·åŸ·è¡Œå™¨

```typescript
import { createAdminClient } from '@/lib/supabase/admin';
import { searchKnowledge } from './definitions/knowledge';
import { sendEmail } from './definitions/communication';
import { webSearch } from './definitions/external';
// ... å…¶ä»–å·¥å…·

// å·¥å…·å¯¦ä½œå°ç…§è¡¨
const TOOL_IMPLEMENTATIONS: Record<string, Function> = {
  search_knowledge: searchKnowledge,
  query_business_data: queryBusinessData,
  send_email: sendEmail,
  send_notification: sendNotification,
  export_csv: exportCsv,
  generate_chart: generateChart,
  create_task: createTask,
  web_search: webSearch,
  summarize_document: summarizeDocument,
  calculate_statistics: calculateStatistics,
};

/**
 * åŸ·è¡Œå·¥å…·
 */
export async function executeTool(
  toolName: string,
  params: Record<string, any>,
  context: {
    userId: string;
    agentId: string;
    sessionId?: string;
    organizationId?: string;
  }
): Promise<{ success: boolean; result?: any; error?: string }> {
  const supabase = createAdminClient();
  const startTime = Date.now();
  
  // è¨˜éŒ„åŸ·è¡Œé–‹å§‹
  const { data: logEntry } = await supabase
    .from('tool_executions_log')
    .insert({
      tool_name: toolName,
      input_params: params,
      agent_id: context.agentId,
      session_id: context.sessionId,
      user_id: context.userId,
      status: 'pending'
    })
    .select()
    .single();
  
  try {
    // æª¢æŸ¥å·¥å…·æ˜¯å¦å­˜åœ¨
    const toolFn = TOOL_IMPLEMENTATIONS[toolName];
    if (!toolFn) {
      throw new Error(`Unknown tool: ${toolName}`);
    }
    
    // åŸ·è¡Œå·¥å…·
    const result = await toolFn(params, context);
    
    // è¨˜éŒ„æˆåŠŸ
    await supabase
      .from('tool_executions_log')
      .update({
        status: 'success',
        output_result: result,
        execution_time_ms: Date.now() - startTime
      })
      .eq('id', logEntry.id);
    
    return { success: true, result };
    
  } catch (error: any) {
    // è¨˜éŒ„å¤±æ•—
    await supabase
      .from('tool_executions_log')
      .update({
        status: 'failed',
        error_message: error.message,
        execution_time_ms: Date.now() - startTime
      })
      .eq('id', logEntry.id);
    
    return { success: false, error: error.message };
  }
}
```

#### `lib/gemini/function-calling.ts` - Function Calling è™•ç†

```typescript
import { GoogleGenerativeAI, FunctionDeclaration } from '@google/generative-ai';
import { executeTool } from '@/lib/tools/executor';

/**
 * å»ºç«‹å¸¶æœ‰ Function Calling çš„ Gemini å°è©±
 */
export async function chatWithTools(
  modelVersion: string,
  systemPrompt: string,
  userMessage: string,
  enabledTools: string[],
  context: {
    userId: string;
    agentId: string;
    sessionId?: string;
  },
  history: Array<{ role: string; content: string }> = []
): Promise<ReadableStream<Uint8Array>> {
  const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || '');
  
  // å¾è³‡æ–™åº«è¼‰å…¥å·¥å…·å®šç¾©
  const toolDeclarations = await loadToolDeclarations(enabledTools);
  
  const model = genAI.getGenerativeModel({
    model: modelVersion || 'gemini-3-flash-preview',
    systemInstruction: systemPrompt,
    tools: toolDeclarations.length > 0 ? [{
      functionDeclarations: toolDeclarations
    }] : undefined,
  });
  
  // é–‹å§‹å°è©±
  const chat = model.startChat({
    history: history.map(msg => ({
      role: msg.role === 'assistant' ? 'model' : 'user',
      parts: [{ text: msg.content }],
    })),
  });
  
  // ç™¼é€è¨Šæ¯
  const result = await chat.sendMessage([{ text: userMessage }]);
  const response = await result.response;
  
  // å»ºç«‹ä¸²æµå›æ‡‰
  const encoder = new TextEncoder();
  
  return new ReadableStream({
    async start(controller) {
      try {
        // è™•ç†å¯èƒ½çš„ Function Call
        const functionCalls = response.functionCalls();
        
        if (functionCalls && functionCalls.length > 0) {
          for (const call of functionCalls) {
            // é€šçŸ¥å‰ç«¯æ­£åœ¨åŸ·è¡Œå·¥å…·
            controller.enqueue(encoder.encode(
              `data: ${JSON.stringify({ type: 'tool_call', tool: call.name, params: call.args })}\n\n`
            ));
            
            // åŸ·è¡Œå·¥å…·
            const toolResult = await executeTool(call.name, call.args, context);
            
            // é€šçŸ¥å‰ç«¯å·¥å…·çµæœ
            controller.enqueue(encoder.encode(
              `data: ${JSON.stringify({ type: 'tool_result', tool: call.name, result: toolResult })}\n\n`
            ));
            
            // å°‡å·¥å…·çµæœå‚³å›çµ¦ AI
            const toolResponse = await chat.sendMessage([{
              functionResponse: {
                name: call.name,
                response: toolResult
              }
            }]);
            
            // ä¸²æµ AI çš„æœ€çµ‚å›æ‡‰
            const finalResponse = await toolResponse.response;
            const text = finalResponse.text();
            
            if (text) {
              controller.enqueue(encoder.encode(
                `data: ${JSON.stringify({ type: 'text', content: text })}\n\n`
              ));
            }
          }
        } else {
          // ç„¡ Function Callï¼Œç›´æ¥è¼¸å‡ºæ–‡å­—
          const text = response.text();
          if (text) {
            controller.enqueue(encoder.encode(
              `data: ${JSON.stringify({ type: 'text', content: text })}\n\n`
            ));
          }
        }
        
        controller.enqueue(encoder.encode('data: [DONE]\n\n'));
        controller.close();
        
      } catch (error) {
        console.error('Function Calling Error:', error);
        controller.error(error);
      }
    }
  });
}

/**
 * å¾è³‡æ–™åº«è¼‰å…¥å·¥å…·å®šç¾©
 */
async function loadToolDeclarations(toolNames: string[]): Promise<FunctionDeclaration[]> {
  if (toolNames.length === 0) return [];
  
  const supabase = createAdminClient();
  const { data: tools } = await supabase
    .from('tools_registry')
    .select('function_declaration')
    .in('name', toolNames)
    .eq('is_active', true);
  
  return tools?.map(t => t.function_declaration) || [];
}
```

---

## ğŸ“… å¯¦ä½œæ™‚ç¨‹

### Phase 1ï¼šåŸºç¤æ¶æ§‹ï¼ˆç¬¬ 1-2 é€±ï¼‰

| ä»»å‹™ | å·¥æ™‚ä¼°è¨ˆ | å„ªå…ˆé †åº |
|------|---------|---------|
| å»ºç«‹è³‡æ–™åº« Migration | 1 å¤© | P0 |
| å¯¦ä½œ `lib/tools/` æ¶æ§‹ | 2 å¤© | P0 |
| ä¿®æ”¹ Gemini Client æ”¯æ´ Function Calling | 1 å¤© | P0 |
| ä¿®æ”¹ `/api/chat` æ•´åˆå·¥å…·å‘¼å« | 2 å¤© | P0 |
| å¯¦ä½œ 5 å€‹æ ¸å¿ƒå·¥å…· | 3 å¤© | P0 |

**Phase 1 äº¤ä»˜ç‰©**ï¼š
- å·¥å…·å¯åœ¨å°è©±ä¸­åŸ·è¡Œ
- 5 å€‹æ ¸å¿ƒå·¥å…·å¯ç”¨

### Phase 2ï¼šå‰ç«¯æ•´åˆï¼ˆç¬¬ 3-4 é€±ï¼‰

| ä»»å‹™ | å·¥æ™‚ä¼°è¨ˆ | å„ªå…ˆé †åº |
|------|---------|---------|
| å»ºç«‹ `ToolSelector` å…ƒä»¶ | 2 å¤© | P0 |
| å»ºç«‹ `SkillSelector` å…ƒä»¶ | 2 å¤© | P0 |
| ä¿®æ”¹ `AgentEditor` æ•´åˆæ–°å…ƒä»¶ | 2 å¤© | P0 |
| ä¿®æ”¹ `ArchitectModal` æ”¯æ´æ¨è–¦ | 2 å¤© | P0 |
| å»ºç«‹å·¥å…·èˆ‡æŠ€èƒ½ API | 2 å¤© | P0 |

**Phase 2 äº¤ä»˜ç‰©**ï¼š
- å®¢æˆ¶å¯åœ¨ UI å‹¾é¸å·¥å…·èˆ‡æŠ€èƒ½
- AI æ¶æ§‹å¸«å¯è‡ªå‹•æ¨è–¦

### Phase 3ï¼šæŠ€èƒ½åŒ…ç³»çµ±ï¼ˆç¬¬ 5-6 é€±ï¼‰

| ä»»å‹™ | å·¥æ™‚ä¼°è¨ˆ | å„ªå…ˆé †åº |
|------|---------|---------|
| å»ºç«‹æŠ€èƒ½åŒ…å…§å®¹è¼‰å…¥å™¨ | 2 å¤© | P0 |
| å¯¦ä½œå‰©é¤˜ 5 å€‹å·¥å…· | 3 å¤© | P1 |
| å»ºç«‹ 10 å€‹å®˜æ–¹æŠ€èƒ½åŒ… | 3 å¤© | P1 |
| æ•´åˆ SkillsMP APIï¼ˆæœå°‹+åŒ¯å…¥ï¼‰ | 3 å¤© | P1 |
| å®Œå–„ SkillsMarketplace UI | 2 å¤© | P1 |

**Phase 3 äº¤ä»˜ç‰©**ï¼š
- 10 å€‹æ ¸å¿ƒå·¥å…·å…¨éƒ¨å¯ç”¨
- 10 å€‹å®˜æ–¹æŠ€èƒ½åŒ…
- SkillsMP æ•´åˆ

### Phase 4ï¼šå„ªåŒ–èˆ‡æ¸¬è©¦ï¼ˆç¬¬ 7-8 é€±ï¼‰

| ä»»å‹™ | å·¥æ™‚ä¼°è¨ˆ | å„ªå…ˆé †åº |
|------|---------|---------|
| æ•ˆèƒ½å„ªåŒ– | 2 å¤© | P1 |
| éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒå®Œå–„ | 2 å¤© | P1 |
| æ•´åˆæ¸¬è©¦ | 3 å¤© | P0 |
| ä½¿ç”¨è€…æ¸¬è©¦èˆ‡ä¿®æ­£ | 3 å¤© | P0 |
| æ–‡ä»¶æ’°å¯« | 2 å¤© | P1 |

**Phase 4 äº¤ä»˜ç‰©**ï¼š
- ç³»çµ±ç©©å®šå¯ä¸Šç·š
- å®Œæ•´æ–‡ä»¶

---

## ğŸ§ª æ¸¬è©¦è¨ˆåŠƒ

### å–®å…ƒæ¸¬è©¦

```typescript
// __tests__/tools/executor.test.ts
describe('Tool Executor', () => {
  it('should execute search_knowledge tool', async () => {
    const result = await executeTool('search_knowledge', {
      query: 'é€€æ›è²¨æ”¿ç­–'
    }, mockContext);
    
    expect(result.success).toBe(true);
    expect(result.result).toHaveProperty('documents');
  });
  
  it('should handle unknown tool gracefully', async () => {
    const result = await executeTool('unknown_tool', {}, mockContext);
    
    expect(result.success).toBe(false);
    expect(result.error).toContain('Unknown tool');
  });
});
```

### æ•´åˆæ¸¬è©¦

| æ¸¬è©¦æ¡ˆä¾‹ | é æœŸçµæœ |
|---------|---------|
| å»ºç«‹ Agent ä¸¦å‹¾é¸å·¥å…· | Agent å„²å­˜æ™‚åŒ…å« enabled_tools |
| ä½¿ç”¨ AI æ¶æ§‹å¸«å»ºç«‹ Agent | è‡ªå‹•æ¨è–¦ä¸¦å¥—ç”¨å·¥å…·èˆ‡æŠ€èƒ½ |
| å°è©±æ™‚è§¸ç™¼çŸ¥è­˜æœå°‹ | æ­£ç¢ºåŸ·è¡Œ search_knowledge ä¸¦å›å‚³çµæœ |
| å°è©±æ™‚è§¸ç™¼ç™¼é€ Email | Email æˆåŠŸç™¼é€ä¸¦è¨˜éŒ„ log |
| è¼‰å…¥æŠ€èƒ½åŒ…å¾Œå°è©± | System Prompt åŒ…å«æŠ€èƒ½å…§å®¹ |

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™

| æŒ‡æ¨™ | ç›®æ¨™ | è¡¡é‡æ–¹å¼ |
|------|------|---------|
| **å·¥å…·åŸ·è¡ŒæˆåŠŸç‡** | > 99% | `tool_executions_log` åˆ†æ |
| **å®¢æˆ¶è¨­å®šæ™‚é–“** | < 5 åˆ†é˜ | ä½¿ç”¨è€…æ¸¬è©¦ |
| **AI æ¨è–¦æº–ç¢ºç‡** | > 80% | ä½¿ç”¨è€…æ»¿æ„åº¦èª¿æŸ¥ |
| **ç³»çµ±å›æ‡‰æ™‚é–“** | < 3 ç§’ï¼ˆå«å·¥å…·åŸ·è¡Œï¼‰ | æ•ˆèƒ½ç›£æ§ |

---

## ğŸ”’ å®‰å…¨è€ƒé‡

### å·¥å…·æ¬Šé™æ§åˆ¶

1. **API Key ç®¡ç†**ï¼šéœ€è¦å¤–éƒ¨ API Key çš„å·¥å…·ï¼Œç”±çµ„ç¹”ç®¡ç†å“¡åœ¨è¨­å®šé é…ç½®
2. **åŸ·è¡Œæ¬Šé™**ï¼šæ ¹æ“šä½¿ç”¨è€…è§’è‰²é™åˆ¶å¯ç”¨å·¥å…·
3. **è¼¸å…¥é©—è­‰**ï¼šæ‰€æœ‰å·¥å…·åƒæ•¸ç¶“é Zod é©—è­‰
4. **åŸ·è¡Œæ—¥èªŒ**ï¼šæ‰€æœ‰å·¥å…·å‘¼å«è¨˜éŒ„æ–¼ `tool_executions_log`

### è³‡æ–™ä¿è­·

1. **çŸ¥è­˜åº«å­˜å–**ï¼š`search_knowledge` éµå®ˆç¾æœ‰ RLS è¦å‰‡
2. **Email ç™¼é€**ï¼šé™åˆ¶æ¯æ—¥ç™¼é€é‡ï¼Œé˜²æ­¢æ¿«ç”¨
3. **å¤–éƒ¨æœå°‹**ï¼šå¿«å–çµæœï¼Œé™ä½ API æˆæœ¬

---

## ğŸ“š é™„éŒ„

### A. å®˜æ–¹æŠ€èƒ½åŒ…åˆå§‹æ¸…å–®

| ç·¨è™Ÿ | æŠ€èƒ½åŒ…åç¨± | åˆ†é¡ | éœ€è¦å·¥å…· |
|------|-----------|------|---------|
| 1 | å®¢æˆ¶æœå‹™æ¨™æº–æµç¨‹ | support | search_knowledge, send_email |
| 2 | éŠ·å”®è©±è¡“æŒ‡å— | sales | search_knowledge, query_business_data |
| 3 | è¡ŒéŠ·æ–‡æ¡ˆæ’°å¯« | marketing | web_search |
| 4 | ç”¢å“å•é¡Œæ’è§£ | support | search_knowledge, create_task |
| 5 | äººè³‡æ”¿ç­–è«®è©¢ | hr | search_knowledge |
| 6 | è²¡å‹™å ±è¡¨åˆ†æ | finance | query_business_data, generate_chart |
| 7 | æ¡è³¼æµç¨‹æŒ‡å— | operations | search_knowledge, send_email |
| 8 | å°ˆæ¡ˆé€²åº¦è¿½è¹¤ | management | create_task, query_business_data |
| 9 | æ³•å¾‹æ–‡ä»¶å¯©é–± | legal | search_knowledge, summarize_document |
| 10 | è³‡æ–™åˆ†æåŠ©æ‰‹ | analytics | query_business_data, calculate_statistics, generate_chart |

### B. API Key å®‰å…¨å­˜å„²

éœ€è¦ API Key çš„å·¥å…·ï¼Œå…¶é‡‘é‘°å­˜å„²æ–¼ `organization_settings` è¡¨ï¼š

```sql
-- çµ„ç¹”è¨­å®šè¡¨ä¸­çš„ API Key å­˜å„²
ALTER TABLE organization_settings
ADD COLUMN IF NOT EXISTS api_keys JSONB DEFAULT '{}';

COMMENT ON COLUMN organization_settings.api_keys IS 
'åŠ å¯†å­˜å„²çš„ç¬¬ä¸‰æ–¹ API Keyï¼Œæ ¼å¼ï¼š{"brave_search": "encrypted_key", "line_notify": "encrypted_key"}';
```

### C. ç›¸é—œæ–‡ä»¶

- [AGENT_EDITOR_REDESIGN_SUMMARY.md](./AGENT_EDITOR_REDESIGN_SUMMARY.md) - Agent ç·¨è¼¯å™¨åŸè¨­è¨ˆ
- [EAKAP_PLATFORM_MASTER_PLAN.md](./EAKAP_PLATFORM_MASTER_PLAN.md) - å¹³å°ç¸½é«”è¦åŠƒ
- [ENV_VARIABLES_GUIDE.md](./ENV_VARIABLES_GUIDE.md) - ç’°å¢ƒè®Šæ•¸èªªæ˜

---

**æ–‡ä»¶çµæŸ**

*æœ€å¾Œæ›´æ–°ï¼š2026-01-13*
