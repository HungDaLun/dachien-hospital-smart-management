# Agent æœƒè­°ç³»çµ±è¨­è¨ˆæ–‡ä»¶
**ç‰ˆæœ¬ï¼š** v1.1
**å»ºç«‹æ—¥æœŸï¼š** 2026-01-15
**æœ€å¾Œæ›´æ–°ï¼š** 2026-01-15
**åŠŸèƒ½åç¨±ï¼š** Agent Meeting Systemï¼ˆæ™ºèƒ½æœƒè­°å®¤ï¼‰

---

## ğŸ“‹ åŸ·è¡Œæ‘˜è¦

### æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ

**ã€Œå¬é›†éƒ¨é–€ä»£è¡¨èˆ‡å¤§å¸«é¡§å•ï¼Œåœ¨çœŸå¯¦æœƒè­°å‰å…ˆä¾†ä¸€å ´ AI é æ¼”ã€**

ä¼æ¥­ä¸»æˆ–é«˜éšä¸»ç®¡åœ¨å¬é–‹é‡è¦æœƒè­°å‰ï¼Œå¾€å¾€éœ€è¦ï¼š
1. é åˆ¤å„éƒ¨é–€çš„ç«‹å ´èˆ‡åæ‡‰
2. é‡æ¸…è­°é¡Œçš„å¤šæ–¹è§€é»
3. æ‰¾å‡ºæ½›åœ¨çš„è¡çªé»èˆ‡å…±è­˜å€
4. æº–å‚™å¥½æ‡‰å°å„ç¨®è³ªç–‘çš„è«–è¿°
5. **ç²å¾—å¤–éƒ¨å°ˆå®¶è¦–è§’çš„å•Ÿç™¼**

æœ¬ç³»çµ±è®“ä½¿ç”¨è€…èƒ½å¤ å¬é–‹ä¸€å ´ã€ŒAI æœƒè­°ã€ï¼Œåƒèˆ‡è€…åŒ…å«ï¼š
- **éƒ¨é–€ Agent**ï¼šä»£è¡¨å„éƒ¨é–€ï¼ŒåŸºæ–¼è©²éƒ¨é–€çš„çœŸå¯¦æ–‡ä»¶ç™¼è¨€
- **é¡§å• Agent**ï¼šä½¿ç”¨è€…è‡ªå»ºçš„æ™ºæ…§é¡§å•ï¼ˆå¦‚å·´è²ç‰¹ã€å½¼å¾—Â·æœæ‹‰å…‹ï¼‰ï¼ŒåŸºæ–¼å…¶è‘—ä½œèˆ‡æ€æƒ³ç™¼è¨€

### ğŸŒŸ v1.1 æ–°å¢ï¼šé¡§å• Agent æ©Ÿåˆ¶

ä½¿ç”¨è€…å¯ä»¥å°‡ç³»çµ±ä¸­è‡ªå»ºçš„ Agent é‚€è«‹ç‚ºã€Œé¡§å•ã€åƒèˆ‡æœƒè­°ï¼š

| é¡å‹ | éƒ¨é–€ Agent | é¡§å• Agent |
|-----|-----------|-----------|
| ä¾†æº | ç³»çµ±è‡ªå‹•å¾ `departments` å»ºç«‹ | ä½¿ç”¨è€…åœ¨ã€Œæ™ºèƒ½ä»£ç†ã€è‡ªå»º |
| çŸ¥è­˜åº« | è©²éƒ¨é–€çš„æ‰€æœ‰æ–‡ä»¶ | Agent ç¶å®šçš„æ–‡ä»¶é›† |
| è§’è‰²å®šä½ | éƒ¨é–€åˆ©ç›Šä»£è¡¨ | å¤–éƒ¨å°ˆå®¶/é¡§å•è¦–è§’ |
| ç™¼è¨€é¢¨æ ¼ | å‹™å¯¦ã€æ•¸æ“šå°å‘ | æ€æƒ³æ€§ã€åŸå‰‡å°å‘ |
| ç¯„ä¾‹ | è²¡å‹™éƒ¨ã€ç ”ç™¼éƒ¨ã€æ¥­å‹™éƒ¨ | å·´è²ç‰¹ã€å½¼å¾—Â·æœæ‹‰å…‹ã€å­«å­ |

**ä½¿ç”¨å ´æ™¯**ï¼š
- è¨è«–æŠ•è³‡æ±ºç­–æ™‚ï¼Œé‚€è«‹ã€Œå·´è²ç‰¹ã€é¡§å•
- è¨è«–ç®¡ç†å•é¡Œæ™‚ï¼Œé‚€è«‹ã€Œå½¼å¾—Â·æœæ‹‰å…‹ã€é¡§å•
- è¨è«–ç«¶çˆ­ç­–ç•¥æ™‚ï¼Œé‚€è«‹ã€Œå­«å­ã€é¡§å•
- è¨è«–å‰µæ–°æ™‚ï¼Œé‚€è«‹ã€Œè³ˆä¼¯æ–¯ã€é¡§å•

### èˆ‡ç¾æœ‰åŠŸèƒ½çš„å·®ç•°

| åŠŸèƒ½ | ä¼æ¥­åƒè¬€ | Agent æœƒè­° |
|-----|---------|-----------|
| äº’å‹•æ¨¡å¼ | ä¸€å°ä¸€å•ç­” | å¤šæ–¹è¨è«– |
| çŸ¥è­˜ä¾†æº | å…¨åŸŸçŸ¥è­˜ | å„åƒèˆ‡è€…ç¨ç«‹çŸ¥è­˜ |
| å°è©±é¢¨æ ¼ | è«®è©¢å»ºè­° | è¾¯è«–å”å•† |
| è¼¸å‡ºçµæœ | å³æ™‚å›ç­” | æœƒè­°è¨˜éŒ„ |
| ä½¿ç”¨å ´æ™¯ | å¿«é€Ÿæ±ºç­–æ”¯æ´ | è¤‡é›œè­°é¡Œé æ¼” |
| **åƒèˆ‡è€…** | å–®ä¸€ AI | **éƒ¨é–€ + é¡§å• Agent** |

---

## ğŸ¯ ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šå¹´åº¦é ç®—åˆ†é…æœƒè­°é æ¼”

**è­°é¡Œ**ï¼šã€Œ2026 å¹´åº¦å„éƒ¨é–€é ç®—å¦‚ä½•åˆ†é…ï¼Ÿç ”ç™¼éƒ¨è¦æ±‚å¢åŠ  30%ï¼Œä½†è²¡å‹™éƒ¨å¸Œæœ›æ§åˆ¶ç¸½æ”¯å‡ºã€‚ã€

**åƒèˆ‡ Agent**ï¼š
- ğŸ“‚ **éƒ¨é–€**ï¼šè²¡å‹™éƒ¨ã€ç ”ç™¼éƒ¨ã€æ¥­å‹™éƒ¨ã€è¡ŒéŠ·éƒ¨
- ğŸ“ **é¡§å•**ï¼šå·´è²ç‰¹ï¼ˆæŠ•è³‡è¦–è§’ï¼‰

**é æœŸè¨è«–**ï¼š
- è²¡å‹™éƒ¨ï¼šå¼•ç”¨ç¾é‡‘æµå ±è¡¨ï¼Œåˆ†æå¯åˆ†é…é¡åº¦
- ç ”ç™¼éƒ¨ï¼šå¼•ç”¨æŠ€è¡“è·¯ç·šåœ–ï¼Œèªªæ˜æŠ•è³‡å¿…è¦æ€§
- æ¥­å‹™éƒ¨ï¼šå¼•ç”¨å¸‚å ´åˆ†æï¼Œè©•ä¼° ROI
- è¡ŒéŠ·éƒ¨ï¼šå¼•ç”¨ç«¶å“å ±å‘Šï¼Œå»ºè­°è³‡æºé…ç½®
- **å·´è²ç‰¹**ï¼šå¼•ç”¨ã€Šè‡´è‚¡æ±ä¿¡ã€‹ï¼Œå¾é•·æœŸåƒ¹å€¼æŠ•è³‡è§’åº¦è©•è«–

### å ´æ™¯ 2ï¼šæ–°ç”¢å“ä¸Šå¸‚æ±ºç­–

**è­°é¡Œ**ï¼šã€Œæ–°ç”¢å“ A æ˜¯å¦æ‡‰è©²åœ¨ Q2 æå‰ä¸Šå¸‚ï¼Ÿã€

**åƒèˆ‡ Agent**ï¼š
- ğŸ“‚ **éƒ¨é–€**ï¼šç ”ç™¼éƒ¨ã€ç”Ÿç®¡éƒ¨ã€æ¥­å‹™éƒ¨ã€ä¾›æ‡‰éˆéƒ¨
- ğŸ“ **é¡§å•**ï¼šè³ˆä¼¯æ–¯ï¼ˆç”¢å“è¦–è§’ï¼‰

**é æœŸè¨è«–**ï¼š
- ç ”ç™¼éƒ¨ï¼šæŠ€è¡“å®Œæˆåº¦èˆ‡é¢¨éšª
- ç”Ÿç®¡éƒ¨ï¼šç”¢èƒ½è¦åŠƒèˆ‡äº¤æœŸ
- è³ˆä¼¯æ–¯ï¼šå¼•ç”¨å…¶ç”¢å“å“²å­¸ï¼Œè©•è«–ã€Œæ¨å‡ºåŠæˆå“ã€vsã€Œè¿½æ±‚å®Œç¾ã€

### å ´æ™¯ 3ï¼šçµ„ç¹”æ¶æ§‹èª¿æ•´

**è­°é¡Œ**ï¼šã€Œæ˜¯å¦åˆä½µå®¢æœéƒ¨èˆ‡è¡ŒéŠ·éƒ¨ï¼Ÿã€

**åƒèˆ‡ Agent**ï¼š
- ğŸ“‚ **éƒ¨é–€**ï¼šäººè³‡éƒ¨ã€å®¢æœéƒ¨ã€è¡ŒéŠ·éƒ¨ã€è²¡å‹™éƒ¨
- ğŸ“ **é¡§å•**ï¼šå½¼å¾—Â·æœæ‹‰å…‹ï¼ˆç®¡ç†è¦–è§’ï¼‰

### å ´æ™¯ 4ï¼šç«¶çˆ­ç­–ç•¥ç ”è¨

**è­°é¡Œ**ï¼šã€Œé¢å°ç«¶çˆ­å°æ‰‹çš„ä½åƒ¹æ”»å‹¢ï¼Œæˆ‘å€‘æ‡‰è©²å¦‚ä½•æ‡‰å°ï¼Ÿã€

**åƒèˆ‡ Agent**ï¼š
- ğŸ“‚ **éƒ¨é–€**ï¼šæ¥­å‹™éƒ¨ã€è¡ŒéŠ·éƒ¨ã€è²¡å‹™éƒ¨ã€ç ”ç™¼éƒ¨
- ğŸ“ **é¡§å•**ï¼šå­«å­ï¼ˆå…µæ³•è¦–è§’ï¼‰ã€ä¹˜æ³•ç­–ç•¥é¡§å•

**é æœŸè¨è«–**ï¼š
- æ¥­å‹™éƒ¨ï¼šå®¢æˆ¶æµå¤±æ•¸æ“šèˆ‡åé¥‹
- è¡ŒéŠ·éƒ¨ï¼šå“ç‰Œå®šä½èˆ‡å·®ç•°åŒ–ç­–ç•¥
- **å­«å­**ï¼šå¼•ç”¨ã€Šå­«å­å…µæ³•ã€‹ï¼Œå¾ã€Œé¿å¯¦æ“Šè™›ã€è§’åº¦å»ºè­°

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### æ•´é«”æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¤ Agent æœƒè­°ç³»çµ±                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1ï¸âƒ£ æœƒè­°è¨­å®šå€ (Meeting Setup)                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“‹ è­°é¡Œè¼¸å…¥                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ [                                                  ] â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ä¾‹ï¼š2026 å¹´åº¦é ç®—å¦‚ä½•åˆ†é…ï¼Ÿ                          â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“‚ é¸æ“‡åƒèˆ‡éƒ¨é–€                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â˜‘ï¸ å…¨é¸  â˜ è²¡å‹™éƒ¨  â˜ ç ”ç™¼éƒ¨  â˜ æ¥­å‹™éƒ¨  â˜ è¡ŒéŠ·éƒ¨   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â˜ ç”Ÿç®¡éƒ¨  â˜ ä¾›æ‡‰éˆéƒ¨  â˜ æ³•å‹™éƒ¨                     â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ é‚€è«‹é¡§å• Agentï¼ˆå¯é¸ï¼‰                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ å¾ã€Œæ™ºèƒ½ä»£ç†ã€ä¸­é¸æ“‡æ‚¨å»ºç«‹çš„ Agent ä½œç‚ºå¤–éƒ¨é¡§å•     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”‚ â˜ ğŸ§  å·´è²ç‰¹        ğŸ“š 12ä»½æ–‡ä»¶  ğŸ’¬ æŠ•è³‡æ™ºæ…§   â”‚   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”‚ â˜ ğŸ“˜ å½¼å¾—Â·æœæ‹‰å…‹   ğŸ“š 8ä»½æ–‡ä»¶   ğŸ’¬ ç®¡ç†å“²å­¸   â”‚   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”‚ â˜ âš”ï¸ å­«å­          ğŸ“š 3ä»½æ–‡ä»¶   ğŸ’¬ å…µæ³•ç­–ç•¥   â”‚   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”‚ â˜ ğŸ è³ˆä¼¯æ–¯        ğŸ“š 5ä»½æ–‡ä»¶   ğŸ’¬ ç”¢å“è¨­è¨ˆ   â”‚   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ’¡ é¡§å•å°‡ä»¥å…¶çŸ¥è­˜åº«ç‚ºåŸºç¤ï¼Œæä¾›ç¨ç‰¹è¦–è§’            â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ â±ï¸ æœƒè­°æ™‚é•·                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â—‹ 3 åˆ†é˜ï¼ˆå¿«é€Ÿè¨è«–ï¼‰                                â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â— 5 åˆ†é˜ï¼ˆæ¨™æº–è¨è«–ï¼‰                                â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â—‹ 10 åˆ†é˜ï¼ˆæ·±åº¦è¨è«–ï¼‰                               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â—‹ è‡ªè¨‚ï¼š[    ] åˆ†é˜                                 â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ âš™ï¸ é€²éšè¨­å®šï¼ˆå¯é¸ï¼‰                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â˜ å•Ÿç”¨è¾¯è«–æ¨¡å¼ï¼ˆé¼“å‹µä¸åŒè§€é»ç¢°æ’ï¼‰                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â˜ å¼·åˆ¶å¼•ç”¨ä¾†æºï¼ˆæ¯æ®µç™¼è¨€å¿…é ˆå¼•ç”¨æ–‡ä»¶ï¼‰              â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â˜ æœ€çµ‚æŠ•ç¥¨ï¼ˆæœƒè­°çµæŸæ™‚å„ Agent è¡¨æ…‹ï¼‰               â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚                    [ğŸš€ é–‹å§‹æœƒè­°]                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  2ï¸âƒ£ æœƒè­°é€²è¡Œå€ (Meeting Room)                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“Œ è­°é¡Œï¼š2026 å¹´åº¦é ç®—å¦‚ä½•åˆ†é…ï¼Ÿ                    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â±ï¸ å‰©é¤˜æ™‚é–“ï¼š3:42 / 5:00                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ‘¥ åƒèˆ‡è€…ï¼šè²¡å‹™éƒ¨ã€ç ”ç™¼éƒ¨ã€æ¥­å‹™éƒ¨ã€è¡ŒéŠ·éƒ¨           â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ’¬ æœƒè­°å°è©±                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ”µ è²¡å‹™éƒ¨ Agent                          10:32:15   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ æ ¹æ“šã€Š2025 å¹´åº¦è²¡å‹™å ±è¡¨ã€‹ï¼Œç›®å‰å¯æ”¯é…é ç®—ç‚º...      â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å¼•ç”¨ï¼š2025_è²¡å‹™å ±è¡¨.pdf                          â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸŸ¢ ç ”ç™¼éƒ¨ Agent                          10:32:48   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ æˆ‘ç†è§£è²¡å‹™çš„è€ƒé‡ï¼Œä½†æ ¹æ“šã€ŠæŠ€è¡“è·¯ç·šåœ–ã€‹...           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å¼•ç”¨ï¼š2026_æŠ€è¡“è·¯ç·šåœ–.md                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸŸ¡ æ¥­å‹™éƒ¨ Agent                          10:33:21   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ å¾å¸‚å ´è§’åº¦ï¼Œæˆ‘æ”¯æŒç ”ç™¼éƒ¨çš„è§€é»ï¼Œå› ç‚º...             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å¼•ç”¨ï¼šå¸‚å ´åˆ†æå ±å‘Š_Q4.pdf                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å·´è²ç‰¹ï¼ˆé¡§å•ï¼‰                        10:33:52   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ å¾é•·æœŸæŠ•è³‡çš„è§’åº¦ï¼Œæˆ‘èªç‚ºæ‡‰è©²å„ªå…ˆè€ƒæ…®...             â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ã€Œè­·åŸæ²³ã€çš„å»ºç«‹æ¯”çŸ­æœŸç²åˆ©æ›´é‡è¦...                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å¼•ç”¨ï¼šè‡´è‚¡æ±ä¿¡_2015.pdf                          â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸŸ£ æ‚¨ï¼ˆä¸»æŒäººï¼‰                          10:34:15   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ å·´è²ç‰¹æåˆ°çš„è­·åŸæ²³æ¦‚å¿µå¾ˆæœ‰å•Ÿç™¼ï¼Œé‚£è²¡å‹™éƒ¨æ€éº¼çœ‹ï¼Ÿ    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ”µ è²¡å‹™éƒ¨ Agent                          10:34:38   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ åŒæ„é¡§å•çš„è§€é»ï¼Œå¾è²¡å‹™æ•¸æ“šä¾†çœ‹...                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“ å¼•ç”¨ï¼šç¾é‡‘æµé æ¸¬_2026.xlsx                       â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ¤ ä¸»æŒäººç™¼è¨€å€                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ [è¼¸å…¥æ‚¨çš„ç™¼è¨€æˆ–å•é¡Œ...]                     [ğŸ“¤ é€å‡º]â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                           â”‚    â”‚
â”‚  â”‚  [â¸ï¸ æš«åœæœƒè­°]  [â¹ï¸ çµæŸæœƒè­°]  [ğŸ“Š æŸ¥çœ‹å³æ™‚æ‘˜è¦]        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3ï¸âƒ£ æœƒè­°çµæŸå€ (Meeting Summary)                         â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚ âœ… æœƒè­°å·²çµæŸ                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ“Š æœƒè­°çµ±è¨ˆ                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ç¸½æ™‚é•·ï¼š5 åˆ† 23 ç§’                                â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ç¸½ç™¼è¨€æ•¸ï¼š12 å‰‡                                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ å¼•ç”¨æ–‡ä»¶æ•¸ï¼š8 ä»½                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ ä¸»æŒäººç™¼è¨€ï¼š3 å‰‡                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ ğŸ¤– æ˜¯å¦ç”Ÿæˆæœƒè­°è¨˜éŒ„ï¼Ÿ                               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ [ğŸ“ ç”Ÿæˆæœƒè­°è¨˜éŒ„]  [â­ï¸ è·³é]                        â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¨¡çµ„æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent æœƒè­°ç³»çµ±æ ¸å¿ƒæ¨¡çµ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   æœƒè­°ç®¡ç†   â”‚    â”‚  ç™¼è¨€èª¿åº¦    â”‚    â”‚  çŸ¥è­˜éš”é›¢    â”‚         â”‚
â”‚  â”‚   Manager   â”‚â”€â”€â”€â–¶â”‚  Scheduler  â”‚â”€â”€â”€â–¶â”‚  Isolator   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â–¼                  â–¼                  â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  è¨ˆæ™‚æ§åˆ¶    â”‚    â”‚  å°è©±æ­·å²    â”‚    â”‚  å¼•ç”¨è¿½è¹¤    â”‚         â”‚
â”‚  â”‚   Timer     â”‚    â”‚   History   â”‚    â”‚   Tracker   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â–¼                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                   â”‚   æœƒè­°è¨˜éŒ„ç”Ÿæˆ   â”‚                           â”‚
â”‚                   â”‚   Summarizer    â”‚                           â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œè¨­è¨ˆ

### 1. è³‡æ–™æ¨¡å‹

```typescript
// lib/meeting/types.ts

/**
 * åƒèˆ‡è€…é¡å‹
 */
export type ParticipantType = 'department' | 'consultant';

/**
 * æœƒè­°åƒèˆ‡è€…
 */
export interface MeetingParticipant {
    id: string;                      // éƒ¨é–€ ID æˆ– Agent ID
    type: ParticipantType;           // 'department' = éƒ¨é–€ä»£è¡¨, 'consultant' = é¡§å• Agent
    name: string;                    // é¡¯ç¤ºåç¨±
    icon?: string;                   // åœ–ç¤ºï¼ˆemoji æˆ– icon nameï¼‰
    knowledge_source: 'department' | 'agent';  // çŸ¥è­˜ä¾†æºé¡å‹
    knowledge_count: number;         // ç¶å®šçš„æ–‡ä»¶æ•¸é‡
    description?: string;            // è§’è‰²æè¿°ï¼ˆå¦‚ã€ŒæŠ•è³‡æ™ºæ…§ã€ï¼‰
}

/**
 * æœƒè­°è¨­å®š
 */
export interface MeetingConfig {
    id: string;
    user_id: string;

    // è­°é¡Œ
    topic: string;
    topic_context?: string;  // è£œå……èƒŒæ™¯èªªæ˜

    // åƒèˆ‡è€…ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´éƒ¨é–€ + é¡§å•ï¼‰
    participants: {
        departments: string[];       // éƒ¨é–€ ID é™£åˆ—
        consultants: string[];       // é¡§å• Agent ID é™£åˆ—ï¼ˆä¾†è‡ª agents è¡¨ï¼‰
    };

    // æ™‚é–“è¨­å®š
    duration_minutes: number;  // 3, 5, 10 æˆ–è‡ªè¨‚

    // é€²éšè¨­å®š
    settings: {
        debate_mode: boolean;         // è¾¯è«–æ¨¡å¼ï¼šé¼“å‹µä¸åŒè§€é»
        force_citations: boolean;     // å¼·åˆ¶å¼•ç”¨ï¼šæ¯æ®µç™¼è¨€å¿…é ˆå¼•ç”¨
        final_voting: boolean;        // æœ€çµ‚æŠ•ç¥¨ï¼šå„ Agent è¡¨æ…‹
        allow_interruption: boolean;  // å…è¨±ä¸»æŒäººéš¨æ™‚æ’è©±
        consultant_priority: 'normal' | 'high';  // é¡§å•ç™¼è¨€å„ªå…ˆç´š
    };

    // ç‹€æ…‹
    status: 'setup' | 'in_progress' | 'paused' | 'completed';

    created_at: string;
    started_at?: string;
    ended_at?: string;
}

/**
 * æœƒè­°è¨Šæ¯
 */
export interface MeetingMessage {
    id: string;
    meeting_id: string;

    // ç™¼è¨€è€…ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´éƒ¨é–€ + é¡§å•ï¼‰
    speaker_type: 'department' | 'consultant' | 'user';
    speaker_id?: string;             // éƒ¨é–€ ID æˆ– Agent ID
    speaker_name?: string;           // é¡¯ç¤ºåç¨±
    speaker_icon?: string;           // åœ–ç¤º

    // å…§å®¹
    content: string;

    // å¼•ç”¨ä¾†æº
    citations: {
        file_id: string;
        file_name: string;
        snippet: string;
    }[];

    // ç«‹å ´æ¨™è¨˜ï¼ˆå¯é¸ï¼‰
    stance?: 'support' | 'oppose' | 'neutral' | 'conditional';

    // å°èª°çš„ç™¼è¨€çš„å›æ‡‰
    reply_to_message_id?: string;

    timestamp: string;
    sequence_number: number;  // ç™¼è¨€é †åº
}

/**
 * æœƒè­°è¨˜éŒ„
 */
export interface MeetingMinutes {
    id: string;
    meeting_id: string;

    // åŸºæœ¬è³‡è¨Š
    topic: string;
    duration_seconds: number;

    // åƒèˆ‡è€…çµ±è¨ˆï¼ˆv1.1 æ›´æ–°ï¼šåˆ†é–‹çµ±è¨ˆéƒ¨é–€èˆ‡é¡§å•ï¼‰
    participants: {
        departments: {
            id: string;
            name: string;
            message_count: number;
        }[];
        consultants: {
            id: string;
            name: string;
            message_count: number;
        }[];
    };

    // AI ç”Ÿæˆçš„æ‘˜è¦
    executive_summary: string;  // åŸ·è¡Œæ‘˜è¦ï¼ˆ100 å­—ï¼‰

    // å„éƒ¨é–€ç«‹å ´å½™æ•´
    department_positions: {
        department_id: string;
        department_name: string;
        position_summary: string;    // ç«‹å ´æ‘˜è¦
        key_arguments: string[];     // é—œéµè«–é»
        cited_documents: string[];   // å¼•ç”¨æ–‡ä»¶
        final_stance?: 'support' | 'oppose' | 'neutral' | 'conditional';
    }[];

    // é¡§å•è§€é»å½™æ•´ï¼ˆv1.1 æ–°å¢ï¼‰
    consultant_insights: {
        consultant_id: string;
        consultant_name: string;
        role_perspective: string;    // è§’è‰²è¦–è§’ï¼ˆå¦‚ã€ŒæŠ•è³‡è¦–è§’ã€ï¼‰
        key_insights: string[];      // é—œéµæ´è¦‹
        cited_sources: string[];     // å¼•ç”¨ä¾†æºï¼ˆå¦‚ã€Šè‡´è‚¡æ±ä¿¡ã€‹ï¼‰
        memorable_quotes: string[];  // ç²¾å½©èªéŒ„
    }[];

    // å…±è­˜èˆ‡åˆ†æ­§
    consensus_points: string[];      // å„æ–¹å…±è­˜
    divergence_points: string[];     // å°šæœ‰åˆ†æ­§

    // å»ºè­°è¡Œå‹•
    recommended_actions: {
        action: string;
        responsible_department?: string;
        priority: 'high' | 'medium' | 'low';
    }[];

    // çµ±è¨ˆæ•¸æ“š
    statistics: {
        total_messages: number;
        user_messages: number;
        cited_documents_count: number;
        discussion_keywords: string[];
    };

    generated_at: string;

    // åŒ¯å‡ºé¸é …
    export_formats: ('markdown' | 'pdf' | 'knowledge_base')[];
}
```

### 2. ç™¼è¨€èª¿åº¦å¼•æ“

```typescript
// lib/meeting/scheduler.ts

/**
 * ç™¼è¨€è€…è³‡è¨Š
 */
interface SpeakerInfo {
    id: string;
    type: 'department' | 'consultant';
    name: string;
}

/**
 * ç™¼è¨€èª¿åº¦å¼•æ“ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´éƒ¨é–€ + é¡§å•ï¼‰
 *
 * æ ¸å¿ƒè·è²¬ï¼š
 * 1. æ±ºå®šä¸‹ä¸€å€‹ç™¼è¨€çš„ Agentï¼ˆéƒ¨é–€æˆ–é¡§å•ï¼‰
 * 2. ç¢ºä¿ç™¼è¨€é€£è²«æ€§ï¼ˆå›æ‡‰å‰æ–‡ï¼‰
 * 3. é¿å…å–®ä¸€ Agent éœ¸ä½”ç™¼è¨€æ¬Š
 * 4. é©æ™‚è®“é¡§å•æä¾›å¤–éƒ¨è¦–è§’
 */
export class MeetingSpeakerScheduler {
    private meeting: MeetingConfig;
    private messages: MeetingMessage[];
    private speakCounts: Map<string, number>;  // ID -> ç™¼è¨€æ¬¡æ•¸
    private allParticipants: SpeakerInfo[];    // æ‰€æœ‰åƒèˆ‡è€…

    constructor(meeting: MeetingConfig, participants: SpeakerInfo[]) {
        this.meeting = meeting;
        this.messages = [];
        this.speakCounts = new Map();
        this.allParticipants = participants;

        // åˆå§‹åŒ–ç™¼è¨€æ¬¡æ•¸
        participants.forEach(p => {
            this.speakCounts.set(p.id, 0);
        });
    }

    /**
     * æ±ºå®šä¸‹ä¸€å€‹ç™¼è¨€è€…
     *
     * ç­–ç•¥ï¼ˆv1.1 æ›´æ–°ï¼‰ï¼š
     * 1. ä½¿ç”¨è€…é»åç‰¹å®šéƒ¨é–€æˆ–é¡§å• â†’ è©²å°è±¡å„ªå…ˆ
     * 2. éƒ¨é–€ç™¼è¨€ç´¯ç© 3 è¼ªå¾Œ â†’ è®“é¡§å•ç™¼è¨€æä¾›å¤–éƒ¨è¦–è§’
     * 3. è¾¯è«–æ¨¡å¼ä¸‹ â†’ æ‰¾ç«‹å ´ä¸åŒçš„åƒèˆ‡è€…
     * 4. é è¨­ç­–ç•¥ â†’ ç™¼è¨€æ¬¡æ•¸å°‘çš„å„ªå…ˆ
     */
    getNextSpeaker(): SpeakerInfo {
        const lastMessage = this.messages[this.messages.length - 1];

        // æƒ…æ³ 1ï¼šä½¿ç”¨è€…é»åäº†æŸå€‹åƒèˆ‡è€…
        if (lastMessage?.speaker_type === 'user') {
            const mentioned = this.detectMentionedParticipant(lastMessage.content);
            if (mentioned) {
                return mentioned;
            }
        }

        // æƒ…æ³ 2ï¼šé¡§å•å„ªå…ˆæ¨¡å¼ - æ¯ 3 è¼ªéƒ¨é–€ç™¼è¨€å¾Œï¼Œè®“é¡§å•ç™¼è¨€
        if (this.meeting.settings.consultant_priority === 'high') {
            const recentDeptMessages = this.getRecentDepartmentMessageCount();
            const consultants = this.allParticipants.filter(p => p.type === 'consultant');

            if (recentDeptMessages >= 3 && consultants.length > 0) {
                // æ‰¾ç™¼è¨€æœ€å°‘çš„é¡§å•
                return this.getLeastSpokenAmong(consultants);
            }
        }

        // æƒ…æ³ 3ï¼šè¾¯è«–æ¨¡å¼ä¸‹ï¼Œæ‰¾ç«‹å ´ä¸åŒçš„åƒèˆ‡è€…
        if (this.meeting.settings.debate_mode && lastMessage?.stance) {
            const opposing = this.findOpposingParticipant(lastMessage);
            if (opposing) {
                return opposing;
            }
        }

        // æƒ…æ³ 4ï¼šé è¨­ç­–ç•¥ - è¼ªæµ + å…¬å¹³æ€§
        return this.getLeastSpokenParticipant();
    }

    /**
     * æ‰¾å‡ºç™¼è¨€æ¬¡æ•¸æœ€å°‘çš„åƒèˆ‡è€…
     */
    private getLeastSpokenParticipant(): SpeakerInfo {
        return this.getLeastSpokenAmong(this.allParticipants);
    }

    /**
     * å¾æŒ‡å®šç¾¤çµ„ä¸­æ‰¾å‡ºç™¼è¨€æœ€å°‘çš„
     */
    private getLeastSpokenAmong(group: SpeakerInfo[]): SpeakerInfo {
        let minCount = Infinity;
        let candidates: SpeakerInfo[] = [];

        group.forEach(p => {
            const count = this.speakCounts.get(p.id) || 0;
            if (count < minCount) {
                minCount = count;
                candidates = [p];
            } else if (count === minCount) {
                candidates.push(p);
            }
        });

        return candidates[Math.floor(Math.random() * candidates.length)];
    }

    /**
     * åµæ¸¬ä½¿ç”¨è€…ç™¼è¨€ä¸­æ˜¯å¦é»åäº†æŸå€‹åƒèˆ‡è€…
     */
    private detectMentionedParticipant(content: string): SpeakerInfo | null {
        for (const participant of this.allParticipants) {
            if (content.includes(participant.name)) {
                return participant;
            }
        }
        return null;
    }

    /**
     * è¨ˆç®—æœ€è¿‘é€£çºŒçš„éƒ¨é–€ç™¼è¨€æ•¸
     */
    private getRecentDepartmentMessageCount(): number {
        let count = 0;
        for (let i = this.messages.length - 1; i >= 0; i--) {
            if (this.messages[i].speaker_type === 'department') {
                count++;
            } else {
                break;
            }
        }
        return count;
    }

    /**
     * æ‰¾å‡ºç«‹å ´ç›¸åçš„åƒèˆ‡è€…ï¼ˆè¾¯è«–æ¨¡å¼ï¼‰
     */
    private findOpposingParticipant(lastMessage: MeetingMessage): SpeakerInfo | null {
        // æ‰¾å‡ºèˆ‡ä¸Šä¸€å‰‡ç™¼è¨€ç«‹å ´ä¸åŒçš„åƒèˆ‡è€…
        // å¯¦ä½œï¼šæ ¹æ“šæ­·å²ç™¼è¨€åˆ†æå„åƒèˆ‡è€…å‚¾å‘
        return null;  // å¾…å¯¦ä½œ
    }

    /**
     * è¨˜éŒ„ç™¼è¨€
     */
    recordMessage(message: MeetingMessage): void {
        this.messages.push(message);

        if (message.speaker_type !== 'user' && message.speaker_id) {
            const currentCount = this.speakCounts.get(message.speaker_id) || 0;
            this.speakCounts.set(message.speaker_id, currentCount + 1);
        }
    }
}
```

### 3. çŸ¥è­˜éš”é›¢å¼•æ“ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´é¡§å• Agentï¼‰

```typescript
// lib/meeting/knowledge-isolator.ts

/**
 * çŸ¥è­˜éš”é›¢å¼•æ“ï¼ˆv1.1 æ›´æ–°ï¼‰
 *
 * æ ¸å¿ƒè·è²¬ï¼š
 * 1. ç¢ºä¿éƒ¨é–€ Agent åªèƒ½å­˜å–è‡ªå·±éƒ¨é–€çš„çŸ¥è­˜åº«
 * 2. ç¢ºä¿é¡§å• Agent åªèƒ½å­˜å–å…¶ç¶å®šçš„æ–‡ä»¶é›†
 */
export class KnowledgeIsolator {

    /**
     * ç‚ºç‰¹å®šéƒ¨é–€ Agent å»ºæ§‹å°ˆå±¬ System Prompt
     */
    async buildDepartmentPrompt(
        departmentId: string,
        topic: string,
        meetingContext: string
    ): Promise<string> {
        const department = await this.getDepartment(departmentId);
        const departmentKnowledge = await this.getDepartmentKnowledge(departmentId, topic);

        return `
ä½ æ˜¯ã€Œ${department.name}ã€çš„éƒ¨é–€ä»£è¡¨ï¼Œæ­£åœ¨åƒåŠ ä¸€å ´é—œæ–¼ä»¥ä¸‹è­°é¡Œçš„æœƒè­°ï¼š

ã€æœƒè­°è­°é¡Œã€‘
${topic}

ã€ä½ çš„è§’è‰²èˆ‡è·è²¬ã€‘
1. ä½ ä»£è¡¨ ${department.name}ï¼Œå¿…é ˆå¾æœ¬éƒ¨é–€çš„è§’åº¦ç™¼è¨€
2. ä½ çš„ç™¼è¨€å¿…é ˆåŸºæ–¼ä»¥ä¸‹ã€Œéƒ¨é–€å°ˆå±¬çŸ¥è­˜åº«ã€ä¸­çš„æ–‡ä»¶
3. ä½ å¯ä»¥æ”¯æŒæˆ–åå°å…¶ä»–éƒ¨é–€çš„è§€é»ï¼Œä½†å¿…é ˆæœ‰ç†æœ‰æ“š
4. ä½ çš„ç›®æ¨™ä¸æ˜¯çˆ­è¼¸è´ï¼Œè€Œæ˜¯æ‰¾å‡ºå°å…¬å¸æœ€æœ‰åˆ©çš„æ–¹æ¡ˆ
5. ç™¼è¨€æ™‚è«‹å¼•ç”¨å…·é«”æ–‡ä»¶æˆ–æ•¸æ“šï¼Œå¢åŠ èªªæœåŠ›

ã€éƒ¨é–€å°ˆå±¬çŸ¥è­˜åº«ã€‘
${departmentKnowledge.map(k => `
---
æ–‡ä»¶åç¨±ï¼š${k.filename}
æ–‡ä»¶æ‘˜è¦ï¼š${k.summary}
é—œéµå…§å®¹ï¼š
${k.key_content}
---
`).join('\n')}

ã€ç™¼è¨€æº–å‰‡ã€‘
1. æ¯æ¬¡ç™¼è¨€æ§åˆ¶åœ¨ 100-200 å­—
2. æ˜ç¢ºè¡¨é”æœ¬éƒ¨é–€çš„ç«‹å ´ï¼ˆæ”¯æŒ/åå°/æœ‰æ¢ä»¶æ”¯æŒï¼‰
3. å¼•ç”¨è‡³å°‘ä¸€ä»½æ–‡ä»¶ä½œç‚ºä¾æ“š
4. å›æ‡‰å‰é¢ç™¼è¨€è€…çš„è«–é»ï¼Œä¸è¦è‡ªèªªè‡ªè©±
5. ä½¿ç”¨å°ˆæ¥­ä½†æ˜“æ‡‚çš„èªè¨€

ã€ç¦æ­¢äº‹é …ã€‘
1. ä¸å¾—ç·¨é€ ä¸å­˜åœ¨çš„æ•¸æ“šæˆ–æ–‡ä»¶
2. ä¸å¾—å‡è£äº†è§£å…¶ä»–éƒ¨é–€çš„å…§éƒ¨è³‡è¨Š
3. ä¸å¾—ä½¿ç”¨ã€Œæˆ‘å€‘å…¬å¸ã€ä»¥å¤–çš„è¦–è§’
4. ä¸å¾—éåº¦é™„å’Œå…¶ä»–éƒ¨é–€ï¼ˆè¦æœ‰è‡ªå·±çš„ç«‹å ´ï¼‰

ã€ç•¶å‰æœƒè­°è„ˆçµ¡ã€‘
${meetingContext}

è«‹åŸºæ–¼ä»¥ä¸ŠèƒŒæ™¯ï¼Œç™¼è¡¨ä½ çš„ä¸‹ä¸€å‰‡ç™¼è¨€ã€‚
        `.trim();
    }

    /**
     * ğŸ†• ç‚ºé¡§å• Agent å»ºæ§‹å°ˆå±¬ System Promptï¼ˆv1.1 æ–°å¢ï¼‰
     *
     * é—œéµå·®ç•°ï¼š
     * - é¡§å•ä½¿ç”¨è‡ªå·±ç¶å®šçš„æ–‡ä»¶ï¼ˆå¦‚å·´è²ç‰¹çš„è‘—ä½œï¼‰
     * - é¡§å•ä»¥ã€Œå¤–éƒ¨å°ˆå®¶ã€èº«ä»½ç™¼è¨€ï¼Œæä¾›ç¨ç‰¹è¦–è§’
     * - é¡§å•ä¸ä»£è¡¨ä»»ä½•éƒ¨é–€åˆ©ç›Š
     */
    async buildConsultantPrompt(
        agentId: string,
        topic: string,
        meetingContext: string
    ): Promise<string> {
        const supabase = await createClient();

        // 1. å–å¾— Agent è³‡è¨Šï¼ˆåŒ…å« system_promptï¼‰
        const { data: agent } = await supabase
            .from('agents')
            .select('id, name, description, system_prompt, avatar')
            .eq('id', agentId)
            .single();

        if (!agent) throw new Error('Consultant agent not found');

        // 2. å–å¾— Agent ç¶å®šçš„çŸ¥è­˜åº«
        const consultantKnowledge = await this.getConsultantKnowledge(agentId, topic);

        // 3. å»ºæ§‹é¡§å•å°ˆå±¬ Prompt
        return `
${agent.system_prompt || ''}

---

ä½ ç¾åœ¨æ­£ä»¥ã€Œå¤–éƒ¨é¡§å•ã€çš„èº«ä»½ï¼ŒåƒåŠ ä¸€å ´ä¼æ¥­æœƒè­°ã€‚

ã€æœƒè­°è­°é¡Œã€‘
${topic}

ã€ä½ çš„è§’è‰²å®šä½ã€‘
1. ä½ æ˜¯ã€Œ${agent.name}ã€ï¼Œä»¥ç¨ç«‹é¡§å•çš„èº«ä»½åƒèˆ‡è¨è«–
2. ä½ ä¸ä»£è¡¨ä»»ä½•éƒ¨é–€çš„åˆ©ç›Šï¼Œè€Œæ˜¯æä¾›å¤–éƒ¨å°ˆå®¶è¦–è§’
3. ä½ çš„ç™¼è¨€åŸºæ–¼ä½ çš„å°ˆæ¥­çŸ¥è­˜èˆ‡è‘—ä½œ
4. ä½ å¯ä»¥æŒ‘æˆ°å„éƒ¨é–€çš„è§€é»ï¼Œæå‡ºä»–å€‘å¯èƒ½å¿½ç•¥çš„é¢å‘
5. ä½ çš„ç›®æ¨™æ˜¯å¹«åŠ©ä¼æ¥­åšå‡ºæ›´æ˜æ™ºçš„æ±ºç­–

ã€ä½ çš„çŸ¥è­˜åº«ã€‘
${consultantKnowledge.map(k => `
---
ä¾†æºï¼š${k.filename}
å…§å®¹ï¼š
${k.key_content}
---
`).join('\n')}

ã€ç™¼è¨€é¢¨æ ¼ã€‘
1. ä»¥ä½ ç¨ç‰¹çš„æ€æƒ³é«”ç³»ç™¼è¨€ï¼ˆå¦‚å·´è²ç‰¹æœƒç”¨æŠ•è³‡åŸå‰‡ã€å­«å­æœƒç”¨å…µæ³•æ¦‚å¿µï¼‰
2. æ¯æ¬¡ç™¼è¨€ 100-200 å­—
3. å¼•ç”¨ä½ çš„è‘—ä½œæˆ–ç†å¿µä½œç‚ºä¾æ“š
4. æä¾›éƒ¨é–€ä»£è¡¨å¯èƒ½æ²’æƒ³åˆ°çš„è§’åº¦
5. å¯ä»¥ç”¨ä½ æ…£ç”¨çš„åè¨€æˆ–æ¯”å–»

ã€ç™¼è¨€ç¯„ä¾‹ã€‘
- å·´è²ç‰¹é¢¨æ ¼ï¼šã€Œå¾æˆ‘çš„æŠ•è³‡ç¶“é©—ä¾†çœ‹ï¼Œé€™å°±åƒæ˜¯åœ¨è­·åŸæ²³ä¸Šå»ºåŸå ¡...æ ¹æ“šã€Šè‡´è‚¡æ±ä¿¡ã€‹ä¸­æåˆ°çš„...ã€
- å­«å­é¢¨æ ¼ï¼šã€Œå…µæ³•æœ‰äº‘ï¼šã€çŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ°ä¸æ®†ã€ã€‚é¢å°é€™å€‹ç«¶çˆ­æ…‹å‹¢...ã€
- æœæ‹‰å…‹é¢¨æ ¼ï¼šã€Œç®¡ç†çš„æœ¬è³ªæ˜¯æ¿€ç™¼äººçš„æ½›èƒ½ã€‚å¾çµ„ç¹”è¨­è¨ˆçš„è§’åº¦...ã€

ã€ç¦æ­¢äº‹é …ã€‘
1. ä¸å¾—ç·¨é€ ä¸å­˜åœ¨æ–¼çŸ¥è­˜åº«çš„å…§å®¹
2. ä¸å¾—å‡è£äº†è§£ä¼æ¥­çš„å…§éƒ¨è³‡è¨Š
3. ä¸å¾—åè¢’ä»»ä½•ç‰¹å®šéƒ¨é–€

ã€ç•¶å‰æœƒè­°è„ˆçµ¡ã€‘
${meetingContext}

è«‹åŸºæ–¼ä»¥ä¸ŠèƒŒæ™¯ï¼Œä»¥é¡§å•èº«ä»½ç™¼è¡¨ä½ çš„è§€é»ã€‚
        `.trim();
    }

    /**
     * ğŸ†• å–å¾—é¡§å• Agent çš„çŸ¥è­˜åº«ï¼ˆv1.1 æ–°å¢ï¼‰
     */
    private async getConsultantKnowledge(
        agentId: string,
        topic: string
    ): Promise<ConsultantKnowledge[]> {
        const supabase = await createClient();

        // 1. å–å¾— Agent ç¶å®šçš„æ–‡ä»¶ ID
        const { data: agentFiles } = await supabase
            .from('agent_files')
            .select('file_id')
            .eq('agent_id', agentId);

        if (!agentFiles || agentFiles.length === 0) {
            return [];
        }

        const fileIds = agentFiles.map(f => f.file_id);

        // 2. èªç¾©æœå°‹ï¼šæ‰¾å‡ºèˆ‡è­°é¡Œç›¸é—œçš„æ–‡ä»¶
        const embedding = await generateEmbedding(topic);

        const { data: relevantFiles } = await supabase.rpc('search_knowledge_by_file_ids', {
            query_embedding: embedding,
            file_ids: fileIds,
            match_threshold: 0.5,
            match_count: 5
        });

        // 3. å–å¾—å®Œæ•´å…§å®¹
        const knowledge: ConsultantKnowledge[] = [];

        for (const file of relevantFiles || []) {
            knowledge.push({
                file_id: file.id,
                filename: file.filename,
                key_content: await this.extractKeyContent(file.id, topic)
            });
        }

        return knowledge;
    }

    /**
     * å–å¾—éƒ¨é–€å°ˆå±¬çŸ¥è­˜ï¼ˆèˆ‡è­°é¡Œç›¸é—œï¼‰
     */
    private async getDepartmentKnowledge(
        departmentId: string,
        topic: string
    ): Promise<DepartmentKnowledge[]> {
        const supabase = await createClient();

        const embedding = await generateEmbedding(topic);

        const { data: relevantFiles } = await supabase.rpc('search_department_knowledge', {
            query_embedding: embedding,
            department_id: departmentId,
            match_threshold: 0.6,
            match_count: 5
        });

        const knowledge: DepartmentKnowledge[] = [];

        for (const file of relevantFiles || []) {
            knowledge.push({
                file_id: file.id,
                filename: file.filename,
                summary: file.ai_summary || '',
                key_content: await this.extractKeyContent(file.id, topic)
            });
        }

        return knowledge;
    }

    /**
     * å¾æ–‡ä»¶ä¸­æå–èˆ‡è­°é¡Œç›¸é—œçš„é—œéµå…§å®¹
     */
    private async extractKeyContent(fileId: string, topic: string): Promise<string> {
        // ä½¿ç”¨ AI æå–èˆ‡è­°é¡Œæœ€ç›¸é—œçš„æ®µè½
        // é™åˆ¶åœ¨ 500 å­—ä»¥å…§
        return '';  // å¾…å¯¦ä½œ
    }
}
```

### 4. æœƒè­° API

```typescript
// app/api/meeting/route.ts

import { NextRequest, NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { MeetingSpeakerScheduler } from '@/lib/meeting/scheduler';
import { KnowledgeIsolator } from '@/lib/meeting/knowledge-isolator';

/**
 * å»ºç«‹æ–°æœƒè­°
 */
export async function POST(request: NextRequest) {
    const supabase = await createClient();
    const { data: { user } } = await supabase.auth.getUser();

    if (!user) {
        return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const body = await request.json();
    const { topic, participant_departments, duration_minutes, settings } = body;

    // é©—è­‰åƒèˆ‡éƒ¨é–€éƒ½å­˜åœ¨
    const { data: departments } = await supabase
        .from('departments')
        .select('id, name')
        .in('id', participant_departments);

    if (!departments || departments.length !== participant_departments.length) {
        return NextResponse.json({ error: 'éƒ¨åˆ†éƒ¨é–€ä¸å­˜åœ¨' }, { status: 400 });
    }

    // å»ºç«‹æœƒè­°
    const { data: meeting, error } = await supabase
        .from('meetings')
        .insert({
            user_id: user.id,
            topic,
            participant_departments,
            duration_minutes,
            settings,
            status: 'setup'
        })
        .select()
        .single();

    if (error) {
        return NextResponse.json({ error: error.message }, { status: 500 });
    }

    return NextResponse.json({ success: true, meeting });
}

/**
 * é–‹å§‹æœƒè­°
 */
export async function PATCH(request: NextRequest) {
    const supabase = await createClient();
    const body = await request.json();
    const { meeting_id, action } = body;

    if (action === 'start') {
        // æ›´æ–°æœƒè­°ç‹€æ…‹
        await supabase
            .from('meetings')
            .update({
                status: 'in_progress',
                started_at: new Date().toISOString()
            })
            .eq('id', meeting_id);

        return NextResponse.json({ success: true, action: 'started' });
    }

    if (action === 'pause') {
        await supabase
            .from('meetings')
            .update({ status: 'paused' })
            .eq('id', meeting_id);

        return NextResponse.json({ success: true, action: 'paused' });
    }

    if (action === 'resume') {
        await supabase
            .from('meetings')
            .update({ status: 'in_progress' })
            .eq('id', meeting_id);

        return NextResponse.json({ success: true, action: 'resumed' });
    }

    if (action === 'end') {
        await supabase
            .from('meetings')
            .update({
                status: 'completed',
                ended_at: new Date().toISOString()
            })
            .eq('id', meeting_id);

        return NextResponse.json({ success: true, action: 'ended' });
    }

    return NextResponse.json({ error: 'Invalid action' }, { status: 400 });
}
```

### 5. æœƒè­°ä¸²æµ APIï¼ˆAgent ç™¼è¨€ï¼‰

```typescript
// app/api/meeting/[meetingId]/speak/route.ts

import { NextRequest } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { KnowledgeIsolator } from '@/lib/meeting/knowledge-isolator';
import { MeetingSpeakerScheduler } from '@/lib/meeting/scheduler';
import { GoogleGenerativeAI } from '@google/generative-ai';

/**
 * è®“æŒ‡å®šéƒ¨é–€ Agent ç™¼è¨€
 * ä½¿ç”¨ SSE ä¸²æµå›å‚³
 */
export async function POST(
    request: NextRequest,
    { params }: { params: { meetingId: string } }
) {
    const supabase = await createClient();
    const { meetingId } = params;

    // å–å¾—æœƒè­°è³‡è¨Š
    const { data: meeting } = await supabase
        .from('meetings')
        .select('*')
        .eq('id', meetingId)
        .single();

    if (!meeting || meeting.status !== 'in_progress') {
        return new Response('Meeting not in progress', { status: 400 });
    }

    // å–å¾—æœƒè­°æ­·å²
    const { data: messages } = await supabase
        .from('meeting_messages')
        .select('*')
        .eq('meeting_id', meetingId)
        .order('sequence_number', { ascending: true });

    // æ±ºå®šä¸‹ä¸€å€‹ç™¼è¨€è€…
    const scheduler = new MeetingSpeakerScheduler(meeting);
    messages?.forEach(m => scheduler.recordMessage(m));
    const nextSpeakerId = scheduler.getNextSpeaker();

    // å–å¾—éƒ¨é–€è³‡è¨Š
    const { data: department } = await supabase
        .from('departments')
        .select('id, name')
        .eq('id', nextSpeakerId)
        .single();

    if (!department) {
        return new Response('Department not found', { status: 400 });
    }

    // å»ºæ§‹æœƒè­°è„ˆçµ¡ï¼ˆæœ€è¿‘ 5 å‰‡ç™¼è¨€ï¼‰
    const recentContext = (messages || [])
        .slice(-5)
        .map(m => `[${m.speaker_department_name || 'ä¸»æŒäºº'}]: ${m.content}`)
        .join('\n\n');

    // å»ºæ§‹éƒ¨é–€å°ˆå±¬ Prompt
    const isolator = new KnowledgeIsolator();
    const systemPrompt = await isolator.buildDepartmentPrompt(
        department.id,
        meeting.topic,
        recentContext
    );

    // ä½¿ç”¨ Gemini ç”Ÿæˆç™¼è¨€
    const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);
    const model = genAI.getGenerativeModel({
        model: 'gemini-2.0-flash',
        systemInstruction: systemPrompt
    });

    // SSE ä¸²æµ
    const encoder = new TextEncoder();
    const stream = new ReadableStream({
        async start(controller) {
            try {
                // ç™¼é€ç™¼è¨€è€…è³‡è¨Š
                controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                    type: 'speaker_info',
                    department_id: department.id,
                    department_name: department.name
                })}\n\n`));

                // ä¸²æµç”Ÿæˆç™¼è¨€
                const result = await model.generateContentStream(
                    `è«‹é‡å°ç•¶å‰è­°é¡Œç™¼è¡¨ä½ çš„è§€é»ã€‚è¨˜å¾—å¼•ç”¨ä½ çš„éƒ¨é–€æ–‡ä»¶ä½œç‚ºä¾æ“šã€‚`
                );

                let fullContent = '';
                let citations: any[] = [];

                for await (const chunk of result.stream) {
                    const text = chunk.text();
                    if (text) {
                        fullContent += text;
                        controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                            type: 'content',
                            text
                        })}\n\n`));
                    }
                }

                // å„²å­˜ç™¼è¨€åˆ°è³‡æ–™åº«
                const sequenceNumber = (messages?.length || 0) + 1;

                await supabase.from('meeting_messages').insert({
                    meeting_id: meetingId,
                    speaker_type: 'agent',
                    speaker_department_id: department.id,
                    speaker_department_name: department.name,
                    content: fullContent,
                    citations,
                    sequence_number: sequenceNumber
                });

                // ç™¼é€å®Œæˆè¨Šè™Ÿ
                controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                    type: 'complete',
                    sequence_number: sequenceNumber
                })}\n\n`));

                controller.close();

            } catch (error) {
                console.error('[Meeting Speak Error]', error);
                controller.enqueue(encoder.encode(`data: ${JSON.stringify({
                    type: 'error',
                    message: 'Agent ç™¼è¨€å¤±æ•—'
                })}\n\n`));
                controller.close();
            }
        }
    });

    return new Response(stream, {
        headers: {
            'Content-Type': 'text/event-stream',
            'Cache-Control': 'no-cache',
            'Connection': 'keep-alive'
        }
    });
}
```

### 6. æœƒè­°è¨˜éŒ„ç”Ÿæˆ

```typescript
// lib/meeting/minutes-generator.ts

import { GoogleGenerativeAI } from '@google/generative-ai';

/**
 * æœƒè­°è¨˜éŒ„ç”Ÿæˆå™¨
 */
export class MeetingMinutesGenerator {
    private genAI: GoogleGenerativeAI;

    constructor() {
        this.genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY!);
    }

    /**
     * ç”Ÿæˆå®Œæ•´æœƒè­°è¨˜éŒ„
     */
    async generateMinutes(meetingId: string): Promise<MeetingMinutes> {
        const supabase = await createClient();

        // 1. å–å¾—æœƒè­°è³‡è¨Š
        const { data: meeting } = await supabase
            .from('meetings')
            .select('*')
            .eq('id', meetingId)
            .single();

        // 2. å–å¾—æ‰€æœ‰ç™¼è¨€
        const { data: messages } = await supabase
            .from('meeting_messages')
            .select('*')
            .eq('meeting_id', meetingId)
            .order('sequence_number', { ascending: true });

        // 3. å–å¾—åƒèˆ‡éƒ¨é–€è³‡è¨Š
        const { data: departments } = await supabase
            .from('departments')
            .select('id, name')
            .in('id', meeting.participant_departments);

        // 4. å»ºæ§‹æœƒè­°å®Œæ•´å°è©±
        const fullTranscript = messages?.map(m =>
            `[${m.speaker_department_name || 'ä¸»æŒäºº'}] (${new Date(m.timestamp).toLocaleTimeString()}):\n${m.content}\n${m.citations?.length ? `ğŸ“ å¼•ç”¨: ${m.citations.map((c: any) => c.file_name).join(', ')}` : ''}`
        ).join('\n\n---\n\n');

        // 5. ä½¿ç”¨ AI ç”Ÿæˆçµæ§‹åŒ–æœƒè­°è¨˜éŒ„
        const model = this.genAI.getGenerativeModel({ model: 'gemini-2.0-flash' });

        const prompt = `
è«‹åˆ†æä»¥ä¸‹æœƒè­°è¨˜éŒ„ï¼Œä¸¦ç”Ÿæˆçµæ§‹åŒ–çš„æœƒè­°æ‘˜è¦ï¼š

ã€æœƒè­°è­°é¡Œã€‘
${meeting.topic}

ã€åƒèˆ‡éƒ¨é–€ã€‘
${departments?.map(d => d.name).join('ã€')}

ã€å®Œæ•´æœƒè­°è¨˜éŒ„ã€‘
${fullTranscript}

è«‹ä»¥ JSON æ ¼å¼è¼¸å‡ºä»¥ä¸‹å…§å®¹ï¼š
{
  "executive_summary": "100å­—å…§çš„åŸ·è¡Œæ‘˜è¦ï¼Œèªªæ˜æœƒè­°çµè«–",
  "department_positions": [
    {
      "department_name": "éƒ¨é–€åç¨±",
      "position_summary": "è©²éƒ¨é–€çš„ç«‹å ´æ‘˜è¦ï¼ˆ50å­—å…§ï¼‰",
      "key_arguments": ["é—œéµè«–é»1", "è«–é»2", "è«–é»3"],
      "cited_documents": ["å¼•ç”¨çš„æ–‡ä»¶åç¨±"],
      "final_stance": "support/oppose/neutral/conditional"
    }
  ],
  "consensus_points": ["å„æ–¹é”æˆå…±è­˜çš„äº‹é …"],
  "divergence_points": ["å°šæœ‰åˆ†æ­§éœ€é€²ä¸€æ­¥è¨è«–çš„äº‹é …"],
  "recommended_actions": [
    {
      "action": "å…·é«”è¡Œå‹•å»ºè­°",
      "responsible_department": "å»ºè­°è² è²¬çš„éƒ¨é–€",
      "priority": "high/medium/low"
    }
  ],
  "discussion_keywords": ["è¨è«–ä¸­çš„é—œéµè©å½™"]
}
        `;

        const result = await model.generateContent(prompt);
        const response = await result.response;
        const aiOutput = JSON.parse(response.text());

        // 6. çµ„è£å®Œæ•´æœƒè­°è¨˜éŒ„
        const minutes: MeetingMinutes = {
            id: crypto.randomUUID(),
            meeting_id: meetingId,
            topic: meeting.topic,
            duration_seconds: this.calculateDuration(meeting.started_at, meeting.ended_at),
            participants: departments?.map(d => ({
                department_id: d.id,
                department_name: d.name,
                message_count: messages?.filter(m => m.speaker_department_id === d.id).length || 0
            })) || [],
            ...aiOutput,
            statistics: {
                total_messages: messages?.length || 0,
                user_messages: messages?.filter(m => m.speaker_type === 'user').length || 0,
                cited_documents_count: this.countUniqueDocuments(messages || []),
                discussion_keywords: aiOutput.discussion_keywords
            },
            generated_at: new Date().toISOString(),
            export_formats: ['markdown', 'pdf', 'knowledge_base']
        };

        // 7. å„²å­˜æœƒè­°è¨˜éŒ„
        await supabase.from('meeting_minutes').insert(minutes);

        return minutes;
    }

    /**
     * å°‡æœƒè­°è¨˜éŒ„è½‰ç‚º Markdown æ ¼å¼
     */
    async exportToMarkdown(minutes: MeetingMinutes): Promise<string> {
        return `
# æœƒè­°è¨˜éŒ„

## åŸºæœ¬è³‡è¨Š
- **è­°é¡Œ**ï¼š${minutes.topic}
- **æ™‚é•·**ï¼š${Math.floor(minutes.duration_seconds / 60)} åˆ† ${minutes.duration_seconds % 60} ç§’
- **åƒèˆ‡éƒ¨é–€**ï¼š${minutes.participants.map(p => p.department_name).join('ã€')}
- **ç”Ÿæˆæ™‚é–“**ï¼š${new Date(minutes.generated_at).toLocaleString('zh-TW')}

---

## åŸ·è¡Œæ‘˜è¦

${minutes.executive_summary}

---

## å„éƒ¨é–€ç«‹å ´å½™æ•´

${minutes.department_positions.map(pos => `
### ${pos.department_name}

**ç«‹å ´**ï¼š${this.getStanceLabel(pos.final_stance)}

**æ‘˜è¦**ï¼š${pos.position_summary}

**é—œéµè«–é»**ï¼š
${pos.key_arguments.map(arg => `- ${arg}`).join('\n')}

**å¼•ç”¨æ–‡ä»¶**ï¼š${pos.cited_documents.join('ã€') || 'ç„¡'}
`).join('\n')}

---

## å…±è­˜èˆ‡åˆ†æ­§

### âœ… å„æ–¹å…±è­˜
${minutes.consensus_points.map(p => `- ${p}`).join('\n')}

### âš ï¸ å°šæœ‰åˆ†æ­§
${minutes.divergence_points.map(p => `- ${p}`).join('\n')}

---

## å»ºè­°è¡Œå‹•

| å„ªå…ˆç´š | è¡Œå‹•é …ç›® | å»ºè­°è² è²¬éƒ¨é–€ |
|-------|---------|------------|
${minutes.recommended_actions.map(a =>
    `| ${this.getPriorityEmoji(a.priority)} ${a.priority} | ${a.action} | ${a.responsible_department || '-'} |`
).join('\n')}

---

## æœƒè­°çµ±è¨ˆ
- ç¸½ç™¼è¨€æ•¸ï¼š${minutes.statistics.total_messages}
- ä¸»æŒäººç™¼è¨€ï¼š${minutes.statistics.user_messages}
- å¼•ç”¨æ–‡ä»¶æ•¸ï¼š${minutes.statistics.cited_documents_count}
- é—œéµè©ï¼š${minutes.statistics.discussion_keywords.join('ã€')}

---

*æ­¤æœƒè­°è¨˜éŒ„ç”± AI è‡ªå‹•ç”Ÿæˆï¼Œåƒ…ä¾›åƒè€ƒï¼Œé‡è¦æ±ºç­–è«‹ä»¥æ­£å¼æœƒè­°ç‚ºæº–ã€‚*
        `.trim();
    }

    private getStanceLabel(stance?: string): string {
        const labels: Record<string, string> = {
            support: 'âœ… æ”¯æŒ',
            oppose: 'âŒ åå°',
            neutral: 'âš–ï¸ ä¸­ç«‹',
            conditional: 'ğŸ¤” æœ‰æ¢ä»¶æ”¯æŒ'
        };
        return labels[stance || ''] || 'æœªè¡¨æ…‹';
    }

    private getPriorityEmoji(priority: string): string {
        const emojis: Record<string, string> = {
            high: 'ğŸ”´',
            medium: 'ğŸŸ¡',
            low: 'ğŸŸ¢'
        };
        return emojis[priority] || '';
    }

    // ... å…¶ä»–è¼”åŠ©æ–¹æ³•
}
```

---

## ğŸ—„ï¸ è³‡æ–™åº«çµæ§‹ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´é¡§å• Agentï¼‰

```sql
-- æœƒè­°è¡¨ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´é¡§å• Agentï¼‰
CREATE TABLE IF NOT EXISTS meetings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES user_profiles(id) ON DELETE CASCADE,

    -- è­°é¡Œ
    topic TEXT NOT NULL,
    topic_context TEXT,

    -- åƒèˆ‡è€…ï¼ˆv1.1 æ›´æ–°ï¼šåˆ†é–‹å„²å­˜éƒ¨é–€èˆ‡é¡§å•ï¼‰
    participant_departments UUID[] DEFAULT '{}',  -- éƒ¨é–€ ID é™£åˆ—
    participant_consultants UUID[] DEFAULT '{}',  -- é¡§å• Agent ID é™£åˆ—

    -- æ™‚é–“è¨­å®š
    duration_minutes INTEGER NOT NULL DEFAULT 5,

    -- é€²éšè¨­å®šï¼ˆv1.1 æ›´æ–°ï¼šæ–°å¢é¡§å•å„ªå…ˆç´šï¼‰
    settings JSONB DEFAULT '{
        "debate_mode": false,
        "force_citations": true,
        "final_voting": false,
        "allow_interruption": true,
        "consultant_priority": "normal"
    }',

    -- ç‹€æ…‹
    status VARCHAR(20) DEFAULT 'setup',

    -- æ™‚é–“æˆ³è¨˜
    created_at TIMESTAMPTZ DEFAULT NOW(),
    started_at TIMESTAMPTZ,
    ended_at TIMESTAMPTZ
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_meetings_user ON meetings(user_id);
CREATE INDEX IF NOT EXISTS idx_meetings_status ON meetings(status);

-- æœƒè­°è¨Šæ¯è¡¨ï¼ˆv1.1 æ›´æ–°ï¼šæ”¯æ´é¡§å•ç™¼è¨€ï¼‰
CREATE TABLE IF NOT EXISTS meeting_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    meeting_id UUID REFERENCES meetings(id) ON DELETE CASCADE,

    -- ç™¼è¨€è€…ï¼ˆv1.1 æ›´æ–°ï¼šå€åˆ†éƒ¨é–€/é¡§å•/ä½¿ç”¨è€…ï¼‰
    speaker_type VARCHAR(20) NOT NULL,  -- 'department', 'consultant', 'user'
    speaker_id UUID,                     -- éƒ¨é–€ ID æˆ– Agent ID
    speaker_name VARCHAR(100),           -- é¡¯ç¤ºåç¨±
    speaker_icon VARCHAR(50),            -- åœ–ç¤ºï¼ˆemoji æˆ– iconï¼‰

    -- å…§å®¹
    content TEXT NOT NULL,

    -- å¼•ç”¨
    citations JSONB DEFAULT '[]',

    -- ç«‹å ´
    stance VARCHAR(20),

    -- å›æ‡‰å°è±¡
    reply_to_message_id UUID REFERENCES meeting_messages(id),

    -- é †åº
    sequence_number INTEGER NOT NULL,
    timestamp TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_meeting_messages_meeting ON meeting_messages(meeting_id, sequence_number);

-- æœƒè­°è¨˜éŒ„è¡¨ï¼ˆv1.1 æ›´æ–°ï¼šæ–°å¢é¡§å•æ´è¦‹å€å¡Šï¼‰
CREATE TABLE IF NOT EXISTS meeting_minutes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    meeting_id UUID REFERENCES meetings(id) ON DELETE CASCADE UNIQUE,

    -- åŸºæœ¬è³‡è¨Š
    topic TEXT NOT NULL,
    duration_seconds INTEGER,

    -- åƒèˆ‡è€…ï¼ˆv1.1 æ›´æ–°ï¼šåˆ†é–‹çµ±è¨ˆï¼‰
    participants JSONB NOT NULL DEFAULT '{
        "departments": [],
        "consultants": []
    }',

    -- AI ç”Ÿæˆå…§å®¹
    executive_summary TEXT,
    department_positions JSONB DEFAULT '[]',
    consultant_insights JSONB DEFAULT '[]',  -- v1.1 æ–°å¢ï¼šé¡§å•æ´è¦‹
    consensus_points JSONB DEFAULT '[]',
    divergence_points JSONB DEFAULT '[]',
    recommended_actions JSONB DEFAULT '[]',

    -- çµ±è¨ˆ
    statistics JSONB DEFAULT '{}',

    -- åŒ¯å‡ºç‹€æ…‹
    exported_to_knowledge_base BOOLEAN DEFAULT FALSE,
    exported_file_id UUID REFERENCES files(id),

    generated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX IF NOT EXISTS idx_meeting_minutes_meeting ON meeting_minutes(meeting_id);

-- è§¸ç™¼å™¨ï¼šæœƒè­°çµæŸæ™‚è‡ªå‹•è¨ˆç®—æ™‚é•·
CREATE OR REPLACE FUNCTION calculate_meeting_duration()
RETURNS TRIGGER AS $$
BEGIN
    IF NEW.status = 'completed' AND NEW.ended_at IS NOT NULL AND NEW.started_at IS NOT NULL THEN
        NEW.duration_seconds := EXTRACT(EPOCH FROM (NEW.ended_at - NEW.started_at));
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

DROP TRIGGER IF EXISTS trigger_meeting_duration ON meetings;
CREATE TRIGGER trigger_meeting_duration
    BEFORE UPDATE ON meetings
    FOR EACH ROW
    EXECUTE FUNCTION calculate_meeting_duration();
```

---

## ğŸ›£ï¸ API ç«¯é»è¦åŠƒï¼ˆv1.1 æ›´æ–°ï¼‰

| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|-----|-----|-----|
| `/api/meeting` | POST | å»ºç«‹æ–°æœƒè­° |
| `/api/meeting` | PATCH | æ§åˆ¶æœƒè­°ï¼ˆé–‹å§‹/æš«åœ/çµæŸï¼‰ |
| `/api/meeting/[meetingId]` | GET | å–å¾—æœƒè­°è©³æƒ… |
| `/api/meeting/[meetingId]/messages` | GET | å–å¾—æœƒè­°è¨Šæ¯åˆ—è¡¨ |
| `/api/meeting/[meetingId]/speak` | POST | è§¸ç™¼ Agent ç™¼è¨€ï¼ˆSSEï¼‰ |
| `/api/meeting/[meetingId]/user-speak` | POST | ä¸»æŒäººç™¼è¨€ |
| `/api/meeting/[meetingId]/minutes` | POST | ç”Ÿæˆæœƒè­°è¨˜éŒ„ |
| `/api/meeting/[meetingId]/minutes` | GET | å–å¾—æœƒè­°è¨˜éŒ„ |
| `/api/meeting/[meetingId]/export` | POST | åŒ¯å‡ºæœƒè­°è¨˜éŒ„ï¼ˆMD/PDF/çŸ¥è­˜åº«ï¼‰ |
| `/api/meeting/consultants` | GET | ğŸ†• å–å¾—å¯é‚€è«‹çš„é¡§å• Agent åˆ—è¡¨ |
| `/api/meeting/departments` | GET | ğŸ†• å–å¾—å¯åƒèˆ‡çš„éƒ¨é–€åˆ—è¡¨ |

---

## ğŸ¨ å‰ç«¯å…ƒä»¶è¦åŠƒ

### é é¢çµæ§‹

```
/app/[lang]/meeting/
â”œâ”€â”€ page.tsx              # æœƒè­°åˆ—è¡¨ï¼ˆæ­·å²æœƒè­°ï¼‰
â”œâ”€â”€ new/
â”‚   â””â”€â”€ page.tsx          # æ–°å¢æœƒè­°è¨­å®šé 
â”œâ”€â”€ [meetingId]/
â”‚   â”œâ”€â”€ page.tsx          # æœƒè­°é€²è¡Œé 
â”‚   â””â”€â”€ minutes/
â”‚       â””â”€â”€ page.tsx      # æœƒè­°è¨˜éŒ„é 
```

### æ ¸å¿ƒå…ƒä»¶

```
/components/meeting/
â”œâ”€â”€ MeetingSetupForm.tsx      # æœƒè­°è¨­å®šè¡¨å–®
â”œâ”€â”€ MeetingRoom.tsx           # æœƒè­°é€²è¡Œä¸­ä»‹é¢
â”œâ”€â”€ MeetingHeader.tsx         # è­°é¡Œ + è¨ˆæ™‚å™¨ + åƒèˆ‡è€…
â”œâ”€â”€ MeetingChat.tsx           # å°è©±ä¸²æµå€
â”œâ”€â”€ MeetingMessage.tsx        # å–®å‰‡è¨Šæ¯ï¼ˆå€åˆ† Agent/Userï¼‰
â”œâ”€â”€ MeetingControls.tsx       # æ§åˆ¶æŒ‰éˆ•ï¼ˆæš«åœ/çµæŸï¼‰
â”œâ”€â”€ MeetingUserInput.tsx      # ä¸»æŒäººç™¼è¨€è¼¸å…¥å€
â”œâ”€â”€ MeetingMinutesView.tsx    # æœƒè­°è¨˜éŒ„å±•ç¤º
â”œâ”€â”€ MeetingExportModal.tsx    # åŒ¯å‡ºé¸é …å½ˆçª—
â”œâ”€â”€ DepartmentSelector.tsx    # éƒ¨é–€é¸æ“‡å™¨ï¼ˆå¤šé¸ï¼‰
â””â”€â”€ MeetingTimer.tsx          # å€’æ•¸è¨ˆæ™‚å™¨
```

---

## â±ï¸ å¯¦æ–½è·¯ç·šåœ–

### Phase 1: åŸºç¤å»ºè¨­ï¼ˆ1 é€±ï¼‰

| ä»»å‹™ | é ä¼°æ™‚é–“ |
|-----|---------|
| è³‡æ–™åº«çµæ§‹å»ºç«‹ | 2 å°æ™‚ |
| API éª¨æ¶å»ºç«‹ | 4 å°æ™‚ |
| é é¢è·¯ç”±å»ºç«‹ | 2 å°æ™‚ |
| æœƒè­°è¨­å®šè¡¨å–® UI | 4 å°æ™‚ |

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ï¼ˆ2 é€±ï¼‰

| ä»»å‹™ | é ä¼°æ™‚é–“ |
|-----|---------|
| ç™¼è¨€èª¿åº¦å¼•æ“ | 8 å°æ™‚ |
| çŸ¥è­˜éš”é›¢å¼•æ“ | 8 å°æ™‚ |
| Agent ç™¼è¨€ APIï¼ˆSSEï¼‰ | 6 å°æ™‚ |
| æœƒè­°é€²è¡Œä¸­ UI | 8 å°æ™‚ |
| è¨ˆæ™‚å™¨èˆ‡æ§åˆ¶é‚è¼¯ | 4 å°æ™‚ |

### Phase 3: æœƒè­°è¨˜éŒ„ï¼ˆ1 é€±ï¼‰

| ä»»å‹™ | é ä¼°æ™‚é–“ |
|-----|---------|
| æœƒè­°è¨˜éŒ„ç”Ÿæˆ AI | 6 å°æ™‚ |
| æœƒè­°è¨˜éŒ„ UI | 4 å°æ™‚ |
| Markdown åŒ¯å‡º | 2 å°æ™‚ |
| çŸ¥è­˜åº«åŒ¯å…¥ | 4 å°æ™‚ |

### Phase 4: å„ªåŒ–èˆ‡æ¸¬è©¦ï¼ˆ1 é€±ï¼‰

| ä»»å‹™ | é ä¼°æ™‚é–“ |
|-----|---------|
| æ•ˆèƒ½å„ªåŒ– | 4 å°æ™‚ |
| éŒ¯èª¤è™•ç† | 4 å°æ™‚ |
| ä½¿ç”¨è€…æ¸¬è©¦ | 8 å°æ™‚ |
| Bug ä¿®å¾© | 8 å°æ™‚ |

**ç¸½é ä¼°æ™‚é–“**ï¼šç´„ 5 é€±

---

## ğŸš€ é€²éšåŠŸèƒ½æ§‹æƒ³ï¼ˆæœªä¾†æ“´å……ï¼‰

### 1. æœƒè­°ç¯„æœ¬

é è¨­å¸¸è¦‹è­°é¡Œç¯„æœ¬ï¼Œå¿«é€Ÿå•Ÿå‹•æœƒè­°ï¼š
- å¹´åº¦é ç®—åˆ†é…
- æ–°ç”¢å“ä¸Šå¸‚è©•ä¼°
- çµ„ç¹”æ¶æ§‹èª¿æ•´
- ä¾›æ‡‰å•†é¸æ“‡
- é¢¨éšªè©•ä¼°

### 2. æœƒè­°è§’è‰²æ‰®æ¼”ï¼ˆå·²åœ¨ v1.1 éƒ¨åˆ†å¯¦ç¾ï¼‰

é€éé¡§å• Agent æ©Ÿåˆ¶ï¼Œä½¿ç”¨è€…å¯ä»¥é‚€è«‹å„ç¨®ã€Œè§’è‰²ã€åƒèˆ‡ï¼š
- **æŠ•è³‡å¤§å¸«**ï¼šå·´è²ç‰¹ã€æŸ¥ç†Â·è’™æ ¼
- **ç®¡ç†å¤§å¸«**ï¼šå½¼å¾—Â·æœæ‹‰å…‹ã€ç¨»ç››å’Œå¤«
- **ç­–ç•¥å¤§å¸«**ï¼šå­«å­ã€å…‹å‹å¡ç¶­èŒ¨
- **å‰µæ–°å¤§å¸«**ï¼šè³ˆä¼¯æ–¯ã€ä¼Šéš†Â·é¦¬æ–¯å…‹
- **é­”é¬¼ä»£è¨€äºº**ï¼šå°ˆé–€æ‰¾æ¼æ´çš„è§’è‰²
- **æ¨‚è§€ä¸»ç¾©è€…**ï¼šå°ˆæ³¨æ©Ÿæœƒçš„è§’è‰²

### 3. å¤šè¼ªæœƒè­°

æ”¯æ´ã€Œç³»åˆ—æœƒè­°ã€ï¼Œå°‡å‰æ¬¡æœƒè­°çµè«–ä½œç‚ºä¸‹æ¬¡æœƒè­°çš„å‰æã€‚

### 4. æœƒè­°æ¯”è¼ƒ

åŒä¸€è­°é¡Œç”¨ä¸åŒåƒèˆ‡è€…çµ„åˆé–‹æœƒï¼Œæ¯”è¼ƒçµè«–å·®ç•°ã€‚

### 5. å³æ™‚ AI æ‘˜è¦

æœƒè­°é€²è¡Œä¸­ï¼Œå´é‚Šæ¬„å³æ™‚é¡¯ç¤ºï¼š
- ç›®å‰å„æ–¹ç«‹å ´
- ä¸»è¦çˆ­è­°é»
- å¯èƒ½çš„å…±è­˜å€

### 6. èªéŸ³æ¨¡å¼

æ•´åˆ TTSï¼Œè®“ Agent ç”¨èªéŸ³ç™¼è¨€ï¼Œæ›´æœ‰æœƒè­°è‡¨å ´æ„Ÿã€‚

---

## ğŸ“‹ æª¢æŸ¥æ¸…å–®

### æŠ€è¡“å¯è¡Œæ€§ âœ…

- [x] Gemini API æ”¯æ´å¤šè¼ªå°è©±
- [x] Supabase æ”¯æ´æ‰€éœ€è³‡æ–™çµæ§‹
- [x] SSE ä¸²æµæŠ€è¡“æˆç†Ÿ
- [x] ç¾æœ‰çŸ¥è­˜åº«æ¶æ§‹å¯æ”¯æ´éƒ¨é–€éš”é›¢
- [x] ç¾æœ‰ Agent æ¶æ§‹å¯æ”¯æ´é¡§å•æ©Ÿåˆ¶ï¼ˆv1.1ï¼‰

### æ¥­å‹™å¯è¡Œæ€§ âœ…

- [x] ç¬¦åˆä¼æ¥­æ±ºç­–æµç¨‹éœ€æ±‚
- [x] æä¾›å¯é©—è­‰çš„æ±ºç­–ä¾æ“š
- [x] è¼¸å‡ºå¯è½‰åŒ–ç‚ºè¡Œå‹•é …ç›®
- [x] èˆ‡ç¾æœ‰åŠŸèƒ½äº’è£œï¼ˆä¼æ¥­åƒè¬€ï¼‰
- [x] é¡§å•æ©Ÿåˆ¶å¢åŠ ç­–ç•¥æ·±åº¦ï¼ˆv1.1ï¼‰

### ä½¿ç”¨è€…é«”é©— âœ…

- [x] æ“ä½œæµç¨‹ç›´è¦º
- [x] å³æ™‚å›é¥‹ï¼ˆä¸²æµï¼‰
- [x] å¯ä¸­æ–·æ§åˆ¶
- [x] çµæœå¯åŒ¯å‡ºç•™å­˜
- [x] é¡§å•é¸æ“‡ä»‹é¢å‹å–„ï¼ˆv1.1ï¼‰

---

## ğŸ“ ç¸½çµ

**Agent æœƒè­°ç³»çµ±**æ˜¯ä¸€å€‹å‰µæ–°ä¸”å¯è¡Œçš„åŠŸèƒ½ï¼Œå®ƒï¼š

1. **å¡«è£œç©ºç™½**ï¼šç¾æœ‰ã€Œä¼æ¥­åƒè¬€ã€æ˜¯ä¸€å°ä¸€è«®è©¢ï¼Œç¼ºä¹å¤šæ–¹è¦–è§’
2. **æ¨¡æ“¬çœŸå¯¦**ï¼šè®“ AI ä»£è¡¨å„éƒ¨é–€ï¼ŒåŸºæ–¼çœŸå¯¦æ–‡ä»¶ç™¼è¨€
3. **é™ä½é¢¨éšª**ï¼šåœ¨æ­£å¼æœƒè­°å‰é æ¼”ï¼Œæ¸›å°‘æ„å¤–
4. **ç•™å­˜çŸ¥è­˜**ï¼šæœƒè­°è¨˜éŒ„å¯åŒ¯å…¥çŸ¥è­˜åº«ï¼Œæˆç‚ºçµ„ç¹”è³‡ç”¢
5. **ğŸ†• å¤§å¸«é¡§å•**ï¼šé‚€è«‹å·´è²ç‰¹ã€æœæ‹‰å…‹ç­‰å¤§å¸«è¦–è§’ï¼Œæå‡æ±ºç­–å“è³ªï¼ˆv1.1ï¼‰

**v1.1 äº®é»ï¼šé¡§å• Agent æ©Ÿåˆ¶**

æƒ³åƒä¸€ä¸‹ï¼šä½ åœ¨è¨è«–æŠ•è³‡æ±ºç­–æ™‚ï¼Œé™¤äº†è½è²¡å‹™éƒ¨çš„æ•¸æ“šåˆ†æï¼Œé‚„èƒ½è½åˆ°ã€Œå·´è²ç‰¹ã€åŸºæ–¼ä»–çš„è‘—ä½œçµ¦å‡ºçš„å»ºè­°ã€‚é€™ä¸æ˜¯å¤©é¦¬è¡Œç©ºï¼Œè€Œæ˜¯åŸºæ–¼ä½ ä¸Šå‚³çš„ã€Šè‡´è‚¡æ±ä¿¡ã€‹ç­‰æ–‡ä»¶ï¼Œè®“ AI ä»¥å·´è²ç‰¹çš„æ€ç¶­æ¨¡å¼ç™¼è¨€ã€‚

é€™è®“ Agent æœƒè­°å¾ã€Œéƒ¨é–€è§’åŠ›å ´ã€å‡ç´šç‚ºã€Œæ™ºæ…§æ±ºç­–æ®¿å ‚ã€ã€‚

---

**æ–‡ä»¶ç‰ˆæœ¬**: v1.1
**å»ºç«‹æ—¥æœŸ**: 2026-01-15
**æœ€å¾Œæ›´æ–°**: 2026-01-15
**ä½œè€…**: EAKAP ç³»çµ±æ¶æ§‹åœ˜éšŠ

**v1.1 æ›´æ–°å…§å®¹**:
- æ–°å¢é¡§å• Agent æ©Ÿåˆ¶ï¼ˆå¯é‚€è«‹è‡ªå»º Agent ä½œç‚ºå¤–éƒ¨é¡§å•ï¼‰
- æ›´æ–°è³‡æ–™æ¨¡å‹ï¼ˆæ”¯æ´éƒ¨é–€ + é¡§å•ï¼‰
- æ›´æ–°ç™¼è¨€èª¿åº¦å¼•æ“ï¼ˆæ™ºæ…§åˆ‡æ›éƒ¨é–€/é¡§å•ç™¼è¨€ï¼‰
- æ›´æ–°çŸ¥è­˜éš”é›¢å¼•æ“ï¼ˆé¡§å•ä½¿ç”¨ Agent ç¶å®šçš„æ–‡ä»¶ï¼‰
- æ›´æ–°è³‡æ–™åº«çµæ§‹ï¼ˆåˆ†é–‹å„²å­˜éƒ¨é–€èˆ‡é¡§å•åƒèˆ‡è€…ï¼‰
- æ›´æ–°æœƒè­°è¨˜éŒ„æ ¼å¼ï¼ˆæ–°å¢é¡§å•æ´è¦‹å€å¡Šï¼‰
- æ–°å¢ä½¿ç”¨å ´æ™¯ç¯„ä¾‹ï¼ˆå«é¡§å•åƒèˆ‡ï¼‰
